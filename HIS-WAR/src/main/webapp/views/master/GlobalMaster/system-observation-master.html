<div id="page-content-wrapper">
	<div class="container-fluid his-style">
		<fieldset>
		<form name="systemObservationForm" >
			<!-- <legend class="heading-div">Rack Master</legend> -->
			<div class="row">
			
					<div
					class="col-lg-2 col-md-2 col-sm-2 padding-left-right-set4 padding-top10">
					<div class="row input-container">
						<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
							<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
						</div>
						<div class="col-lg-11 col-sm-11 col-md-11">
							<div class="form-group" show-errors>
								<select class="text-input floating-label" name="examination" ng-model="typeId" ng-change="getSystemListByObservationId(typeId)" required="required"> 
									<option ng-repeat="x in examinationList" value={{x.typeId}}>{{x.typeName}}</option>
								</select> <label for="code">Type</label>
								<p class="help-block" ng-if="systemObservationForm.examination.$error.required">Type is required</p>
							</div>
						</div>
					</div>
				</div>
				
				<div
					class="col-lg-2 col-md-2 col-sm-2 padding-left-right-set4 padding-top10">
					<div class="row input-container">
						<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
							<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
						</div>
						<div class="col-lg-11 col-sm-11 col-md-11 ">
							<div class="form-group" show-errors>
								<select class="text-input floating-label" name="systemId" ng-model="observationObj.systemId"  required>
									<option ng-repeat="info in systemList" value="{{info.systemId}}">{{info.systemName}}</option>
								</select> <label for="code">System</label>
								<p class="help-block" ng-if="systemObservationForm.systemId.$error.required">System is required</p>
							</div>
						</div>
					</div>
				</div>
				<div
					class="col-lg-2 col-md-2 col-sm-2 padding-left-right-set4 padding-top10">
					<div class="row input-container">
						<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
							<i class="fa fa fa-stop-circle-o" aria-hidden="true"></i>
						</div>
						<div class="col-lg-11 col-sm-11 col-md-11 ">
							<div class="form-group" show-errors>
								<input type="text" name="observationCode" id="" ng-model="observationObj.observationCode"
									class="text-input floating-label" required> <label
									for="description" class="LISDynamicLabel">Observation
									Code</label>
									<p class="help-block" ng-if="systemObservationForm.systemId.$error.required">Code is required</p>
							</div>
						</div>
					</div>
				</div>
				<div
					class="col-lg-2 col-md-2 col-sm-2 padding-left-right-set4 padding-top10">
					<div class="row input-container">
						<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
							<i class="fa fa fa-stop-circle-o" aria-hidden="true"></i>
						</div>
						<div class="col-lg-11 col-sm-11 col-md-11 ">
							<div class="form-group" show-errors>
								<input type="text" name="observationName" id="" ng-model="observationObj.observationName"
									class="text-input floating-label" required> <label
									for="description" class="LISDynamicLabel">Observation
									Name</label>
									<p class="help-block" ng-if="systemObservationForm.systemId.$error.required">Name is required</p>
							</div>
						</div>
					</div>
				</div>
				<div
					class="col-lg-2 col-md-2 col-sm-2 padding-left-right-set4 padding-top10 text-center">
					<div class="row input-container padding-top10">
						<input type="checkbox" name="" id="propertyReq" class="propertyReq" ng-model="observationObj.isPropertyRequired" ng-true-value="'Y'" ng-false-value="'N'">
						<label for="propertyReq" class="checkbox-margin-left-right">
							Property Required</label>
					</div>
				</div>
				<div ng-if="observationObj.isPropertyRequired == 'Y'">
				<div ng-repeat="info in oservationPropertyObjList">
				<div class="col-lg-2 col-md-2 col-sm-2 padding-left-right-set4 padding-top10 propertyReqDiv" >
					<div class="row input-container">
						<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
							<i class="fa fa fa-stop-circle-o" aria-hidden="true"></i>
						</div>
						<div class="col-lg-11 col-sm-11 col-md-11 ">
							<div class="">
								<input type="text" name="description" id="" ng-model="info.propertyName"
									class="text-input floating-label"> <label
									for="description" class="LISDynamicLabel">Property
									Name</label>
							</div>
						</div>
					</div>
				</div>
				<div class="col-lg-1 col-md-1 col-sm-1 propertyReqDiv padding-top10" ng-if="saveBtnFlag" >
						<div class="col-lg-2 col-md-2 col-sm-2 padding-left-right-set4">
							<input style="width: 100%;" type="button" name="" id="addr"
								ng-click="add($index)" value="+" class="btn btn-info">&nbsp;
						</div>
						<div class="col-lg-2 col-md-2 col-sm-2 padding-left-right-set4">
							<input style="width: 100%;" type="button" name="" id="" value="-"
								ng-click="remove($index+1)" class="btn btn-info">&nbsp;&nbsp;
						</div>
					</div>
					<div class="col-lg-1 col-md-1 col-sm-1 propertyReqDiv padding-top10" ng-if="updateBtnFlag" >
						<div class="col-lg-2 col-md-2 col-sm-2 padding-left-right-set4">
							<input style="width: 100%;" type="button" name="" id="addr"
								ng-click="addUpdate($index)" value="+" class="btn btn-info">&nbsp;
						</div>
						<div class="col-lg-2 col-md-2 col-sm-2 padding-left-right-set4">
							<input style="width: 100%;" type="button" name="" id="" value="-"
								ng-click="removeUpdate($index+1)" class="btn btn-info">&nbsp;&nbsp;
						</div>
					</div>
					</div>
			</div>
			</div>
			</form>
		</fieldset>
		<div class="row">
			<div
				class="col-lg-1 col-md-1 col-sm-2 padding-left-right-set4 float_right text-width-auto margin-top10">
				<div class=" ">
						<a href="" class="btn btn-primary btn-save-box-shadow"
								title="Save" data-toggle="modal" ng-click="saveSystemObservation()"
								ng-if="saveBtnFlag"> <i class="fa fa-floppy-o"
								style="font-size: 21px" aria-hidden="true"></i></a> 
								<a href=""
								class="btn btn-primary btn-save-box-shadow" title="Update"
								data-toggle="modal" ng-click="updateSystemObservation()"
								ng-if="updateBtnFlag"> <i class="fa fa-floppy-o"
								style="font-size: 21px" aria-hidden="true"></i></a>
				</div>
			</div>
			<div
				class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 float_right margin-top10">
				<input type="text" class="text-search-box" placeholder="Search"
					style="margin-top: 0px"> <i
					class="fa fa-search common-search-text-icon" aria-hidden="true"></i>
			</div>
		</div>
		<div class="row padding-left-right-set4 margin-top4">
			<div class="col-md-12 fix-height-scroll230">
				<table class="table table-bordered">
					<thead>
						<tr>
							<th class="width10">System</th>
							<th class="width10">Observation Code</th>
							<th class="width10">Observation Name</th>
							<th class="width10">Property Required</th>
							<th class="width8 text-center">Property Details</th>
							<th class="width5 text-center">Status</th>
							<!-- <th class="width5 text-center">Action</th> -->
						</tr>
					</thead>
					<tbody>
					<tr ng-repeat="(key, value) in systemObservationList | groupBy : 'observationId'">
					
						<td>{{value[0].systemName}}</td>
						<td>{{value[0].observationCode}}</td>
						<td>{{value[0].observationName}}</td>
						<td>{{value[0].isPropertyRequired}}</td><!-- data-toggle="modal" data-target="#notesForall" -->
						<td class="vertical-middle text-center"><a><i class="fa fa-info-circle" aria-hidden="true"  ng-click="displayNote(value,value[0].isPropertyRequired)" data-toggle="modal" data-target="#notesForall"></i></a></td>
						<td class="text-center"><label class="switch">
							 <input type="checkbox" ng-model="value[0].status"  ng-true-value="'A'"  ng-false-value="'I'"  ng-change="updateStatus(value[0].observationId,value[0].status)">
									<div class="slider round"></div>
							</label></td>
						<!-- <td class="padding-edit-button-table text-center vertical-middle">
							<a><i class="fa fa-pencil" aria-hidden="true" ng-click="showUpdateBtn(value[0],value)"></i></a>
							</td> -->
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>

<div id="notesForall" class="modal fade ng-scope in common-small-popup" role="dialog">
	<div class="modal-dialog">
		<!-- width: 25% !important;margin: 200px 0 0 510px !important; -->
		<div class="modal-content">
			<div class="modal-header">
				<div class="modal-title patient-details-row">
					Property Details
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>
			</div>
			<div class="modal-body common-sub-table">
				<div class="row padding-left-right-set4 margin-top4">
					<div class="col-md-12 fix-height-scroll230">
						<table class="table table-bordered">
							<thead>
								<tr>
									<th class="width10">Property Name</th>
									<th class="width5 text-center">Status</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="info in observationPropertyList">
									<td>{{info.propertyName}}</td>
									<td class="text-center"><label class="switch"> <input
										type="checkbox" ng-model="info.status" ng-true-value="'A'"
										ng-false-value="'I'"
										ng-change="updateStatusObservationProperty(info,info.status)"
										class="ng-pristine ng-untouched ng-valid ng-not-empty">
										<div class="slider round"></div>
								</label></td>
								</tr>
								
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<modal visible="showModal"></modal>
<script type="text/javascript">
	$(document).ready(function() {

		$(".selectedPageName").text("System Observation Master");
		$(".sidebar-nav li").each(function() {
			$(this).find("a").parents("li").removeClass("active");
		});
		$('a[href$="systemMaster"]').parents("li").addClass("active");
		
		/* $('.propertyReq').change(function () {                
		    $('.propertyReqDiv').toggle(this.checked);
		}).change(); */
		
	});
</script>