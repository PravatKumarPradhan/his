 <div id="page-content-wrapper" >
	<div class="container-fluid his-style">
		<fieldset class="" style="margin-top:-5px !important">
		
			 	<div ng-include="'./views/common/common-patient-search-opd.html'"></div>
			 	<div ng-include="'./views/common/patient-demography-info.html'"></div>
			 	
				<div class="row margin-top4">
					<div class="col-lg-6 col-md-6 col-sm-6 padding-left-right-set4">
						<fieldset class="normalRegistration sub-fieldset border-left-right border-bottom border-top">
								<div class="row">
									<div class="col-lg-4 col-md-4 col-sm-4 padding-left-right-set4 padding-top10">
										<div class="row input-container">
											<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
												<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
											</div>
											<div class="col-lg-11 col-sm-11 col-md-11">
												<div class="">
													<select class="text-input floating-label dirty" ng-model="encounterDetails.encounterId" ng-change="getEncounterDetails(encounterDetails.encounterId)">
														<option ng-repeat="encounters in patientEncounterList" value="{{encounters.encounterId}}">{{encounters.encounterNumber+'|'+encounters.specialityName+'|'+encounters.doctorName}}</option>
													</select>
													<label for="code">Encounter No.</label>
												</div>
											</div>
										</div>
									</div>
									<div class="col-lg-4 col-md-4 col-sm-4 padding-left-right-set4 padding-top10">
										<div class="row input-container">
											<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
												<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
											</div>
											<div class="col-lg-11 col-sm-11 col-md-11 ">
												<div class="">
													<input type="text" name="description" id="" class="text-input floating-label dirty" value="{{encounterDetails.encounterDateString}}"> 
													<label for="description" class="LISDynamicLabel" >Encounter Date</label>
												</div>
											</div>
										</div>
									</div>
									<div class="col-lg-4 col-md-4 col-sm-4 padding-left-right-set4 padding-top10">
										<div class="row input-container">
											<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
												<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
											</div>
											<div class="col-lg-11 col-sm-11 col-md-11">
												<div class="">
													<select class="text-input floating-label">
														<option>{{encounterDetails.referralDesc}}</option>
													</select> <label for="code">Referred By</label>
												</div>
											</div>
										</div>
									</div> 
								</div>
								<div class="row">
									<div class="col-lg-4 col-md-4 col-sm-4 padding-left-right-set4 padding-top10">
										<div class="row input-container">
											<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
												<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
											</div>
											<div class="col-lg-11 col-sm-11 col-md-11">
												<div class="">
													<input type="text" name="description" id="" class="text-input floating-label dirty" ng-model="encounterDetails.specialityName" > 
													<label for="description" class="LISDynamicLabel">Specialty</label>
												</div>
											</div>
										</div>
									</div>
									<div class="col-lg-4 col-md-4 col-sm-4 padding-left-right-set4 padding-top10">
										<div class="row input-container">
											<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
												<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
											</div>
											<div class="col-lg-11 col-sm-11 col-md-11 ">
												<div class="">
													<input type="text" name="description" id="" class="text-input floating-label dirty" value="Mark Potter" ng-model="encounterDetails.doctorName"> 
													<label for="description" class="LISDynamicLabel">Doctor</label>
												</div>
											</div>
										</div>
									</div>
								</div>
						</fieldset>
					</div>
					<div class="col-lg-6 col-md-6 col-sm-6 padding-left-right-set4 ">
						<fieldset class="normalRegistration sub-fieldset border-left-right border-bottom border-top">
								<div class="row">
									<div class="col-lg-4 col-md-4 col-sm-4 padding-left-right-set4 padding-top10">
										<div class="row input-container">
											<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
												<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
											</div>
											<div class="col-lg-11 col-sm-11 col-md-11">
												<div class="">
													<input type="text" name="description" id="" class="text-input floating-label" ng-model="encounterDetails.patientCategory"> 
													<label for="description" class="LISDynamicLabel">Patient Category</label>
												</div>
											</div>
										</div>
									</div>
									<div class="col-lg-4 col-md-4 col-sm-4 padding-left-right-set4 padding-top10">
										<div class="row input-container">
											<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
												<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
											</div>
											<div class="col-lg-11 col-sm-11 col-md-11 ">
												<div class="">
													<input type="text" name="description" id="" class="text-input floating-label dirty" value="Self" ng-model="encounterDetails.paymentEntitlementDesc"> 
													<label for="description" class="LISDynamicLabel">Payment Entitlement</label>
												</div>
											</div>
										</div>
									</div>
									<div class="col-lg-4 col-md-4 col-sm-4 padding-left-right-set4 padding-top10">
										<div class="row input-container">
											<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
												<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
											</div>
											<div class="col-lg-11 col-sm-11 col-md-11">
												<div class="">
													<select class="text-input floating-label">
														<option>{{encounterDetails.companyDesc}}</option>
													</select> <label for="code">Payer</label>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-lg-4 col-md-4 col-sm-4 padding-left-right-set4 padding-top10">
										<div class="row input-container">
											<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
												<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
											</div>
											<div class="col-lg-11 col-sm-11 col-md-11 ">
												<div class="">
													<input type="text" name="description" id="" class="text-input floating-label"> 
													<label for="description" class="LISDynamicLabel">Contract</label>
												</div>
											</div>
										</div>
									</div>
									<div class="col-lg-4 col-md-4 col-sm-4 padding-left-right-set4 padding-top10">
										<div class="row input-container">
											<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
												<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
											</div>
											<div class="col-lg-11 col-sm-11 col-md-11">
												<div class="">
													<input type="text" name="description" id="" class="text-input floating-label"> 
													<label for="description" class="LISDynamicLabel">Validity From</label>
												</div>
											</div>
										</div>
									</div>
									<div class="col-lg-4 col-md-4 col-sm-4 padding-left-right-set4 padding-top10">
										<div class="row input-container">
											<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
												<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
											</div>
											<div class="col-lg-11 col-sm-11 col-md-11">
												<div class="">
													<input readonly="readonly" type="text" name="description" id="" class="text-input floating-label"> 
													<label for="description" class="LISDynamicLabel">Validity To</label>
												</div>
											</div>
										</div>
									</div>
								</div>
						</fieldset>
					</div>
				</div>
				
				<div class="row custom-sub-tab padding-left-right-set4 margin-top10">
					<div class="col-lg-6 col-md-6 col-sm-6 padding-left-right-set4 ">
						<ul class="tabs nav nav-tabs">
							<li ng-class="{ active : isSetFirstTabLevel(1) }" class="active width25" ><a href="" ng-click="setFirstTabLevel(1)">Service</a></li>
							<li ng-class="{ active : isSetFirstTabLevel(2) }" class="width25"><a href="" ng-click="setFirstTabLevel(2);getPackages()">Package</a></li>
							<li ng-class="{ active : isSetFirstTabLevel(3) }" class="width25"><a href="" ng-click="setFirstTabLevel(3)">Payer</a></li>
						</ul>
					</div>
					<div class="col-lg-1 col-md-1 col-sm-1 padding-left-right-set4 float_right width4 margin-top-5">
							<div class=" ">
								<!-- <a href="" class="btn btn-primary btn-save-box-shadow" ng-click="saveBillings()"
									title="Save" data-toggle="modal" data-target="#collectPayment">
									<i class="fa fa-floppy-o" style="font-size: 21px" aria-hidden="true"></i></a> -->
									<a href="" class="btn btn-primary btn-save-box-shadow" ng-click="saveBillings()"
									title="Save" >
									<i class="fa fa-floppy-o" style="font-size: 21px" aria-hidden="true"></i></a>
							</div>
						</div>
						<div class="col-lg-1 col-md-1 col-sm-1 padding-left-right-set4 float_right margin-top-5">
							<div class=" ">
								<a href="" class="btn btn-primary btn-save-box-shadow" title="" data-toggle="modal" data-target="#addServicePopup" ng-click="getservicesPop()">
									Add Service
								</a>
							</div>
						</div>
						<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 float_right margin-top-5">
							<input type="text" class="text-search-box dirty" placeholder="Search" ng-model="searchOrderFilter" style="margin-top:0px">
							<i class="fa fa-search common-search-text-icon" aria-hidden="true"></i>
						</div>
				</div>
				
				<div class="row padding-left-right-set4">
					<div ng-show="isSetFirstTabLevel(1)" class="second-level-tab-display-div" style="">
						<form name="serviceOrderForm" novalidate>
							<div class="row table-container">
								<div class="table-container">
								   <div class="table-container-header">
								      <table class="table table-striped table-hover table-condensed table-bordered">
								         <thead>
								            <tr>
								            <th class="width3" >
								             	<input type="checkbox" ng-click="checkAll()"/>
										       </th>
										       <th class="width8" title="Order No.">
										        Order No.
										       </th>
										       <th class="width8" title="Service Name">
										        Service Name
										       </th>
										       <th class="width8" title="Specialty">
										        Specialty
										       </th>
										       <th class="width8" title=" Doctor">
										        Doctor
										       </th>
										       <th class="width6" title="Qty">
										        Qty
										       </th>
										       <th class="width8" title="Unit Price">
										       Unit Price
										       </th>
										       <th class="width8" title="Total Amount">
										        Total Amount
										       </th>
										       <th class="width8" title="Concession">
										        Concession
										       </th>
										       <th class="width8" title="Discount %">
										        Disc %
										       </th>
										       <th class="width8" title="Discount Amount">
										        Disc Amt
										       </th>
										       <th class="width6" title="GST">
										        GST
										       </th>
										       <th class="width6" title="GST %">
										        GST %
										       </th>
										       <th class="width8" title=" GST Amount">
										        GST Amt
										       </th>
										       <th class="width8" title=" Net Payable">
										        Net Payable
										       </th>
										       <th class="width8" title="Discount Category">
										        Disc Category
										       </th>
										       <th class="width8" title="Discount Details">
										        Discount Details
										       </th>
										       <th class="width6" title="Order By">
										        Order By
										       </th>
										       <th class="width8" title="Order On">
										        Order On
										       </th>
										        <th class="width8" title="Order On">
										        Self Payable
										       </th>
										        <th class="width8" title="Order On">
										       	Credit Payable 
										       </th>
										       <th class="width4" title="">
										        
										       </th>
									      </tr>
								         </thead>
								      </table>
								   </div>
								   <div class="table-container-body" style="overflow: overlay;background: #ffffce;">
								      <table class="table table-striped table-hover table-condensed table-bordered">
								         <tbody>
								            <tr ng-repeat="service in autoRenderedServicesFinalList|filter : searchOrderFilter">
								            
								           		 <td class="width3"><input type="checkbox" checklist-model="servicesSelectedList.services" checklist-value="service.serviceMasterId" /></td>
								         		<td class="width8">{{service.orderNo}}</td>
								         		<td class="width8">{{service.serviceStandardName}}</td>
								         		<td class="width8">{{service.specialityName}}</td>
								         		<td class="width8">{{service.doctorName}}</td>
								         		<td class="width6"><input class="w-100" allow-decimal-numbers ng-disabled="service.isQuantityEditable == 'N'" type="text" ng-model="service.quantity" ng-blur="getQuantityCal(service,$index)" /></td>
								         		<td class="width8"><input class="w-100" allow-decimal-numbers ng-disabled="service.isRateEditable == 'N'" type="text" ng-model="service.basePrice" ng-blur="getBasePriceCal(service,$index)" /></td>
								         		<td class="width8">{{service.totalAmt}}</td>
								         		<td class="width8">{{service.concession}}</td>
								         		<td class="width8"><input class="w-100" type="text" allow-decimal-numbers ng-blur="getDiscountPerCal(service,$index)" ng-disabled="service.isDiscountApplicable == 'N' || service.discountDisabledFlag == 'N'" ng-model="service.discountPercentage"/></td>
								         		<td class="width8"><input class="w-100" type="text" allow-decimal-numbers ng-blur="getDiscountCal(service,$index)" ng-disabled="service.isDiscountApplicable == 'N' || service.discountDisabledFlag == 'N'" ng-model="service.discount"/></td>
								         		<td class="width6">{{service.taxName}}</td>
								         		<td class="width6">{{service.taxPercentage}}%</td>
								         		<td class="width8">{{service.taxAmt}}</td>
								         		<td class="width8">{{service.netPay}}</td>
								         		<td class="width8">
								         			<div class="form-group" ng-class="{ 'has-error' : serviceOrderForm.discountCategoryId.$invalid }">
													<select class="border-dropdown" style="" ng-disabled="service.isDiscountApplicable == 'N' || service.discountDisabledFlag == 'N'" name="discountCategoryId" ng-model="service.discountCategoryId" required>
														<option ng-repeat="info in discountCategoryList" value="{{info.id}}">{{info.type}} </option>
														<option value="0">Multiple</option>
														
													</select>
													 <!-- <p class="help-block" ng-show="serviceOrderForm.discountCategoryId.$invalid">Discount Category Is Required</p> -->
												</div>
								         		</td>
								         		<td class="width8 text-center">
								         			<span title="Add"><a class="cursor-pointer" data-toggle="modal"  data-target="{{service.isDiscountApplicable == 'Y' ? '#addViewDiscountDetails':''}}" ng-click="getDiscountList(service,$index)">Add</a></span>
								         			<span title="View"><a class="cursor-pointer" data-toggle="modal" data-target="{{service.isDiscountApplicable == 'Y' ? '#addViewDiscountDetails':''}}" ng-click="getDiscountListForInfo(service,$index)"><i class="fa fa-info-circle"></i></a></span></td>
								         		<td class="width6">-</td>
								         		<td class="width8">{{service.orderDate | date:'dd/MM/yyyy'}}</td>
								         		<td class="width8">{{service.selfPayable}}</td>
								         		<td class="width8">{{service.creditPayable}}</td>
								         		<td class="width4 text-center"><a title="Cancel" data-toggle="modal" data-target="#serviceCancellationModal" ng-click="getRemoveServicePopup(service,$index)"><i class="fa fa-times"></i></a></td>
								         	</tr>
								         </tbody>
								      </table>
								   </div>
								   <div class="table-container-footer">
								      <table class="table table-striped table-hover table-condensed table-bordered">
								         <tfoot>
								         	<tr>
								         		<td class="width3 border-right-none"></td>
								         		<td class="width8 border-right-none"></td>
								         		<td class="width8 border-right-none"></td>
								         		<td class="width8 border-right-none"></td>
								         		<td class="width8 border-right-none"></td>
								         		<td class="width6 border-right-none"></td>
								         		<td class="width8" title="Account Summary">Summary</td>
								         		<td class="width8">{{totalAmountSummary}}<!-- <input type="text" style="width:100%" class="dirty"> --></td>
								         		<td class="width8"><!-- <input type="text" style="width:100%" class="dirty"> -->{{totalConcessionSummary}}</td>
								         		<td class="width8"></td>
								         		<td class="width8"><!-- <input type="text" style="width:100%" class="dirty"> -->{{totalDiscountSummary}}</td>
								         		<td class="width6 border-right-none"></td>
								         		<td class="width6"></td>
								         		<td class="width8"><!-- <input type="text" style="width:100%" class="dirty"> -->{{totalGstTaxSummary}}</td>
								         		<td class="width8"><!-- <input type="text" style="width:100%" class="dirty"> --> {{netPayableSummary}}</td>
								         		<td class="width8 border-right-none"></td>
								         		<td class="width8 border-right-none"></td>
								         		<td class="width6 border-right-none"></td>
								         		<td class="width8 border-right-none"></td>
								         		<td class="width8">{{totalSelfPayble}}</td>
								         		<td class="width8"></td>
								         		<td class="width4 text-center border-right-none"></td>
								         	</tr>
								         </tfoot>
								      </table>
								      <div ng-class="has-error" class="form-group has-error text-right"><p class="help-block" ng-show="serviceOrderForm.discountCategoryId.$invalid">Discount Category Is Required</p></div>
								   </div>
								</div>
							</div>
							</form>
					</div>
					<div ng-show="isSetFirstTabLevel(2)" class="second-level-tab-display-div" style="">
						<div class="OPDBillService">
							<div ng-include="'./views/common/billing/comon-package.html'" style="">
								
							</div>	
						</div>
					</div>
					<div ng-show="isSetFirstTabLevel(3)" class="second-level-tab-display-div" style="">
							
					</div>
				</div>
				
			<div class="row padding-left-right-set4">
					<div class="col-lg-12 col-md-12 col-sm-12 ">
						<fieldset class="normalRegistration">
							<legend class="heading-div">Discount Details</legend>
								 <div class="row">
									<div id="mediaType" class="col-lg-4 col-md-4 col-sm-4 customRadioBtn">													
										<span>
												<input id="billDiscount" name="discount" type="radio" value="1" val="yes" checked="checked">
												<label for="billDiscount">Bill Wise Discount</label>
										</span>
										<span>
												<input id="groupDiscount" name="discount" type="radio" value="2">
												<label for="groupDiscount" data-toggle="modal" data-target="#groupWiseDiscountModal" ng-click="groupWiseDiscountPopup()">Group Wise Discount</label>
										</span>
										<span>
												<input id="cancelDiscountSer" name="discount" type="radio" value="3">
												<label for="cancelDiscountSer" ng-click="cancelDiscountForServices()">Cancel Discount</label>
										</span>
									</div>
								</div>
								
								<div class="row">
									<div class="col-lg-6 col-md-6 col-sm-6 padding-left-right-set4">
										
										<div class="row">
											<div class="col-lg-4 col-md-4 col-sm-4 padding-left-right-set4 padding-top10">
												<div class="row input-container">
													<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
														<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
													</div>
													<div class="col-lg-11 col-sm-11 col-md-11">
														<div class="">
															<input type="text" name="description" id="" class="text-input floating-label ng-pristine ng-valid dirty ng-empty ng-touched" allow-decimal-numbers ng-model="billWiseDiscountObj.discountPercentageBillWise"  ng-blur="funDiscountPercentageBillWise()" style=""><!-- ng-blur="calculateDiscountAmount()" --> 
															<label for="description" class="LISDynamicLabel">Discount %</label>
														</div>
													</div>
												</div>
											</div>
											<div class="col-lg-4 col-md-4 col-sm-4 padding-left-right-set4 padding-top10">
												<div class="row input-container">
													<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
														<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
													</div>
													<div class="col-lg-11 col-sm-11 col-md-11">
														<div class="">
															<input type="text" name="description" id="" class="text-input floating-label ng-pristine ng-valid dirty ng-empty ng-touched" allow-decimal-numbers ng-model="billWiseDiscountObj.discountAmountBillWise"  ng-blur="funDiscountAmountBillWise()" style=""> <!--  ng-blur="calculateDiscountPercentage()" -->
															<label for="description" class="LISDynamicLabel">Discount Amount</label>
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-lg-4 col-md-4 col-sm-4 padding-left-right-set4 padding-top10">
												<div class="row input-container">
													<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
														<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
													</div>
													<div class="col-lg-11 col-sm-11 col-md-11 ">
														<div class="">
															<select class="text-input floating-label ng-valid dirty ng-touched ng-not-empty ng-dirty ng-valid-parse" ng-model="billWiseDiscountObj.discountCategoryId" style="">
																<option ng-repeat="info in discountCategoryList" value="{{info.id}}">{{info.type}} </option>
															</select> <label for="code">Discount Category</label>
														</div>
													</div>
												</div>
											</div>
											<div class="col-lg-4 col-md-4 col-sm-4 padding-left-right-set4 padding-top10">
												<div class="row input-container">
													<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
														<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
													</div>
													<div class="col-lg-11 col-sm-11 col-md-11 ">
														<div class="">
															<select class="text-input floating-label ng-valid dirty ng-touched ng-not-empty ng-dirty ng-valid-parse" ng-model="billWiseDiscountObj.discountGivenBy" style="">
																<option value="1">1</option>
																<option value="2">2</option>
															</select> <label for="code">Discount Given By</label>
														</div>
													</div>
												</div>
											</div>
											<div class="col-lg-1 col-md-2 text-width-auto">
												<div class=" margin-left-padding-top">
													<a href="" class="btn btn-primary btn-save-box-shadow" ng-click="getApplyDiscountPopup()">
														Apply
													</a>
												</div>
											</div>
										</div>
									</div>
									<div class="col-lg-6 col-md-6 col-sm-6 padding-left-right-set4">
										<div class="row">
											<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
												<div class="row input-container">
													<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
														<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
													</div>
													<div class="col-lg-11 col-sm-11 col-md-11 ">
														<div class="">
															<input type="text" name="description" id="" class="text-input floating-label dirty" ng-model="totalSelfPayble" ng-disabled="true"> 
															<label for="description" class="LISDynamicLabel">Self Payable</label>
														</div>
													</div>
												</div>
											</div>
											<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
												<div class="row input-container">
													<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
														<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
													</div>
													<div class="col-lg-11 col-sm-11 col-md-11 ">
														<div class="">
															<input type="text" name="description" id="" class="text-input floating-label dirty" ng-model="totalCreditPayble" ng-disabled="true"> 
															<label for="description" class="LISDynamicLabel">Credit Payable</label>
														</div>
													</div>
												</div>
											</div>
											<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
												<div class="row input-container">
													<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
														<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
													</div>
													<div class="col-lg-11 col-sm-11 col-md-11 ">
														<div class="">
															<input type="text" name="description" id="" class="text-input floating-label dirty" ng-model="roundOffAmt"> 
															<label for="description" class="LISDynamicLabel">Round-off</label>
														</div>
													</div>
												</div>
											</div>
											<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
												<div class="row input-container">
													<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
														<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
													</div>
													<div class="col-lg-11 col-sm-11 col-md-11 ">
														<div class="">
															<input type="text" name="description" id="" class="text-input floating-label dirty"> 
															<label for="description" class="LISDynamicLabel">Deposit</label>
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-lg-8 col-md-8 col-sm-8 padding-left-right-set0 padding-top10">
												<div class="row input-container">
													<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon width6">
														<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
													</div>
													<div class="col-lg-11 col-sm-11 col-md-11 ">
														<div class="">
															<input type="text" name="description" id="" class="text-input floating-label ng-pristine ng-untouched ng-valid dirty ng-empty" ng-model="billRemark"> 
															<label for="description" class="LISDynamicLabel">Remark</label>
														</div>
													</div>
												</div>
											</div>
											<div class="col-lg-2 col-md-2 col-sm-2 padding-left-right-set4 padding-top10">
												<div class="row input-container padding-top10">
													<input type="checkbox" name="" id="finalBillCheckbox" class="" ng-model="finalBill" ng-true-value="'Y'" ng-false-value="'N'">
														<label for="finalBillCheckbox" class="checkbox-margin-left-right">Final Bill</label>
												</div>
											</div>
										</div>
									</div>
								</div>
								
						</fieldset>
					</div>
				</div>
		</fieldset>
</div>

</div>


 <div ng-include="'./views/master/UnitMaster/billingMaster/common/service-packge-details-popup.html'" ></div>


<!-- COLLECT PAYMENT POPUP -->
 <div id="collectPayment" class="common-large-popup modal fade ng-scope in" role="dialog">
		<div class="modal-dialog"> 
			<div class="modal-content">
				<div class="modal-header">
					<div class="modal-title patient-details-row">
						Collect Payment
						<button type="button" class="close" data-dismiss="modal">&times;</button>
					</div>
				</div>
				<div class="modal-body row">
					<div class="col-md-12">
								<div class="row">
									<div class="col-lg-2 col-md-2 col-sm-2 padding-left-right-set4 padding-top10">
										<span>Active Deposit: </span><span>6000</span>
									</div>
									<div class="col-lg-2 col-md-3 col-sm-3 margin-left5 padding-top10">
										<input type="checkbox" name="registrationType" class="useActiveDeposit"><span class="margin-left5">Use Active Deposit</span>
									</div>
								</div>
								
									<div class="row serachedPatientList">
										<div class="col-md-12 col-lg-12 headerHeight fix-height-scroll230 padding-left-right-set4">
											<table class="table table-bordered  margin-top8">
												<tr>
													<th class="width1">
													</th>
													<th class="width15">
														<span class="">Date</span>
													</th>
													<th class="width15">
														 <span class="">Voucher No.</span>
													</th>
													<th class="width15">
														Deposit Type
													</th>
													
													<th class="width15">
														Total Amount
													</th>
													<th class="width15">
														Consume Amount
													</th>
													<th class="width15">
														Balance
													</th>
												</tr>
												<tr>
													<td>
														<input type="checkbox">
													</td>
													<td>
														-
													</td>
													<td>
														-
													</td>
													<td>
														-
													</td>
													<td>
														-
													</td>
													<td>
														-
													</td>
													<td>
														-
													</td>
												</tr>
												<tr>
													<td>
														<input type="checkbox">
													</td>
													<td>
														-
													</td>
													<td>
														-
													</td>
													<td>
														-
													</td>
													<td>
														-
													</td>
													<td>
														-
													</td>
													<td>
														-
													</td>
												</tr>
												
											</table>
										</div>
									</div>
							<fieldset class="normalRegistration sub-fieldset padding-left-right-set4">
								<legend class="heading-div">Credit Details</legend>
									<div class="row">
										<div id="mediaType" class="col-lg-2 col-md-2 col-sm-2 uk-input-group customRadioBtn">													
											<span>
													<input id="insuranceRadio" name="registrationType" type="radio" value="1" val="yes" checked="checked">
													<label for="insuranceRadio">Insurance</label>
											</span>
											<span>
													<input id="sponserRadio" name="registrationType" type="radio" value="2">
													<label for="sponserRadio">Sponsor</label>
											</span>
										</div>
									</div>
									
									<div class="col-md-12 col-lg-12 headerHeight fix-height-scroll230 insuranceTable">
										<table class="table table-bordered  margin-top8">
											<tr>
												<th class="width1">
													<input type="checkbox">
												</th>
												<th class="width20">
													<span class="">Insurance/Credit Name</span>
												</th>
												<th class="width15">
													<span class="">Associated Company</span>
												</th>
												<th class="width15">
													<span class="">Insurance No.</span>
												</th>
												<th class="width15">
													<span class="">Insurance Code</span>
												</th>
												<th class="width15">
													 <span class="">Authorization No.</span>
												</th>
												<th class="width10">
													Date 
												</th>
												<th class="width10">
													Amount
												</th>
											</tr>
											<tr>
												<td colspan="7" class="text-right">
													Insurance Payable Amount
												</td>
												<td>
													0.00
												</td>
											</tr>
											<tr>
												<td colspan="7" class="text-right">
													Excess Amount
												</td>
												<td>
													0.00
													<span class="pull-right">
						      							<span class="iconSet">
						      								<button class="" id="insCredGenerateCreditNote" disabled="">
						      								<i class="fa fa-credit-card font-size20 cursor-pointer" aria-hidden="true" title="Generate Credit Note"></i>
						      								</button>
						      							</span>
						      							<span class="iconSet">
						      								<button class="" id="insCredTransferToActiveDeposit" disabled="">
						      								<i class="fa fa-money font-size20 cursor-pointer" aria-hidden="true" title="Transfer To Active Deposit"></i>
						      								</button>
						      							</span>
							      					</span>
												</td>
											</tr>
											
										</table>
									</div>
									
									<div class="col-md-12 col-lg-12 headerHeight fix-height-scroll230 sponserTable">
										<table class="table table-bordered  margin-top8">
											<tr>
												<th class="width1">
													<input type="checkbox">
												</th>
												<th class="width15">
													<span class="">Company Name</span>
												</th>
												<th class="width15">
													<span class="">Contract Name</span>
												</th>
												<th class="width15">
													<span class="">Validity From</span>
												</th>
												<th class="width15">
													 <span class="">Validity To</span>
												</th>
											</tr>
											<tr>
												<td colspan="4" class="text-right">
													Corporate Payable Amount
												</td>
												<td>
													0.00
												</td>
											</tr>
											<tr>
												<td colspan="4" class="text-right">
													Excess Amount
												</td>
												<td>
													0.00
													<span class="pull-right">
						      							<span class="iconSet">
						      								<button class="" id="insCredGenerateCreditNote" disabled="">
						      								<i class="fa fa-credit-card font-size20 cursor-pointer" aria-hidden="true" title="Generate Credit Note"></i>
						      								</button>
						      							</span>
						      							<span class="iconSet">
						      								<button class="" id="insCredTransferToActiveDeposit" disabled="">
						      								<i class="fa fa-money font-size20 cursor-pointer" aria-hidden="true" title="Transfer To Active Deposit"></i>
						      								</button>
						      							</span>
							      					</span>
												</td>
											</tr>
											
										</table>
									</div>
									
							</fieldset>
							<fieldset class="normalRegistration sub-fieldset padding-left-right-set4">
						<legend class="heading-div">Payment Mode</legend>
						<!-- <div class="row margin-top4">
							<div class="col-lg-1 col-md-1 col-sm-2 padding-left-right-set4">
								<div class="tab-btn-primary">
									<a class="btn btn-primary btn-save-box-shadow" ng-href="#/opdBilling/cash">Cash</a>
								</div>
							</div>
							<div class="col-lg-1 col-md-1 col-sm-2 padding-left-right-set4">
								<div class="tab-btn-primary">
									<a class="btn btn-primary  btn-save-box-shadow" ng-href="#/opdBilling/cheque">Cheque</a>
								</div>
							</div>
							<div class="col-lg-2 col-md-1 col-sm-2 padding-left-right-set4 width10">
								<div class="tab-btn-primary">
									<a class="btn btn-primary btn-save-box-shadow" ng-href="#/opdBilling/creditDebitCard">Credit Card</a>
								</div>
							</div>
							<div class="col-lg-2 col-md-1 col-sm-2 padding-left-right-set4 width10">
								<div class="tab-btn-primary">
									<a class="btn btn-primary btn-save-box-shadow" ng-href="#/opdBilling/creditDebitCard">Debit Card</a>
								</div>
							</div>
							<div class="col-lg-1 col-md-1 col-sm-2 padding-left-right-set4 float_right ">
								<div class="width-div-for-patient-reg ">
									<a href="" style="width:40px" data-toggle="modal" data-target="#confirmLogout" class="btn btn-primary btn-save-box-shadow" title="Save">+</a>	
								</div>
							</div>
						</div> -->
						<!-- 19-feb new tab design start -->
						<div class="row margin-top4">
							<div class="col-lg-10 col-md-10 col-sm-10">
								<ul class="tabs nav nav-tabs">
									<li ng-class="{ active : isSetFirstTabLevel(1) }" id="">
										<a href ng-click="setFirstTabLevel(1);setPaymentModeId(1)">Cash</a>
									</li>
									<li ng-class="{ active : isSetFirstTabLevel(2) }" id="">
										<a href ng-click="setFirstTabLevel(2);setPaymentModeId(2)">Cheque</a>
									</li>
									<li ng-class="{ active : isSetFirstTabLevel(3) }" id="">
										<a href ng-click="setFirstTabLevel(3);setPaymentModeId(3)">Credit Card</a>
									</li>
									<li ng-class="{ active : isSetFirstTabLevel(4) }" id="">
										<a href ng-click="setFirstTabLevel(4);setPaymentModeId(4)">Debit Card</a>
									</li>
								</ul>
							</div>
							<div class="col-lg-2 col-md-2 col-sm-2 float-right">
								<div class="width-div-for-patient-reg ">
									<a href="" style="width:40px" class="btn btn-primary btn-save-box-shadow" title="Save" ng-click="addPaymentDetails()">+</a>	<!-- data-toggle="modal" data-target="#confirmLogout" -->
								</div>
							</div>
						</div>
						
						<!-- *********** CONTENT start*********** -->
						<div class="row">
							<!-- CONTENT FOR FIRST TAB start-->
							<div ng-show="isSetFirstTabLevel(1)">
								<div class="row">
									<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
											<div class="row input-container">
												<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
													<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
												</div>
												<div class="col-lg-11 col-sm-11 col-md-11 ">
													<div class="">
														<input ng-model="paymentDetailsObj.amount" type="text" name="description" id="" class="text-input floating-label"> <label for="description" class="">Amount</label>
													</div>
												</div>
											</div>
									</div>
								</div>
							</div>
							<!-- CONTENT FOR FIRST TAB end-->
							<!-- CONTENT FOR 2nd TAB start-->
							<div ng-show="isSetFirstTabLevel(2)">
								<div class="row">
									<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
										<div class="row input-container">
											<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
												<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
											</div>
											<div class="col-lg-11 col-sm-11 col-md-11 ">
												<div class="">
													<select class="text-input floating-label" ng-model="paymentDetailsObj.bankId" ng-change="setBankName(paymentDetailsObj.bankId)">
														<option></option>
														 <option value={{bank.bankId}} ng-value="bank.bankId" ng-click="setBankName(bank.bankName)" ng-repeat="bank in bankList">{{bank.bankName}}</option>
													</select> <label for="code">Bank Name</label>
												</div>
											</div>
										</div>
									</div>
									<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
											<div class="row input-container">
												<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
													<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
												</div>
												<div class="col-lg-11 col-sm-11 col-md-11 ">
													<div class="">
														<input type="text" name="description" id="" class="text-input floating-label" ng-model="paymentDetailsObj.checkNumber"> <label for="description" class="">Cheque Number</label>
													</div>
												</div>
											</div>
									</div>
									<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
											<div class="row input-container">
												<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
													<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
												</div>
												<div class="col-lg-11 col-sm-11 col-md-11 ">
													<div class="">
														<input type="text" name="description" id="" class="text-input floating-label" ng-model="paymentDetailsObj.chequeDate"> <label for="description" class="">Cheque Date</label>
													</div>
												</div>
											</div>
									</div>
									<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
											<div class="row input-container">
												<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
													<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
												</div>
												<div class="col-lg-11 col-sm-11 col-md-11 ">
													<div class="">
														<input type="text" name="description" id="" class="text-input floating-label" ng-model="paymentDetailsObj.amount"> <label for="description" class="">Amount</label>
													</div>
												</div>
											</div>
									</div>
								</div>
							</div>
							<!-- CONTENT FOR 2nd TAB end-->
							<!-- CONTENT FOR 3rd TAB start-->
							<div ng-show="isSetFirstTabLevel(3)">
								<div class="row">
									<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
											<div class="row input-container">
												<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
													<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
												</div>
												<div class="col-lg-11 col-sm-11 col-md-11 ">
													<div class="">
														<input type="text" name="description" id="" class="text-input floating-label" ng-model="paymentDetailsObj.cardHolderName"> <label for="description" class="">Card Holder Name</label>
													</div>
												</div>
											</div>
									</div>
									<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
											<div class="row input-container">
												<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
													<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
												</div>
												<div class="col-lg-11 col-sm-11 col-md-11 ">
													<div class="">
														<select class="text-input floating-label" ng-model="paymentDetailsObj.cardTypeId">
															<option></option>
															<option value="{{card.cardTypeId}}" ng-repeat="card in cardTypeList">{{card.cardTypeName}}</option>
														</select> <label for="code">Card Type</label>
													</div>
												</div>
											</div>
									</div>
									<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
											<div class="row input-container">
												<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
													<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
												</div>
												<div class="col-lg-11 col-sm-11 col-md-11 ">
													<div class="">
														<input type="text" name="description" id="" class="text-input floating-label" ng-model="paymentDetailsObj.amount"> <label for="description" class="">Amount</label>
													</div>
												</div>
											</div>
									</div>
									<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
											<div class="row input-container">
												<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
													<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
												</div>
												<div class="col-lg-11 col-sm-11 col-md-11 ">
													<div class="">
														<input type="text" name="description" id="" class="text-input floating-label" ng-model="paymentDetailsObj.cardNo"> <label for="description" class="">Card Number</label>
													</div>
												</div>
											</div>
									</div>
									
								</div>
								<div class="row">
									<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
											<div class="row input-container">
												<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
													<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
												</div>
												<div class="col-lg-11 col-sm-11 col-md-11 ">
													<div class="">
														<input type="text" name="description" id="" class="text-input floating-label" ng-model="paymentDetailsObj.expiryDate"> <label for="description" class="">Expiry Date</label>
													</div>
												</div>
											</div>
									</div>
								</div>
							</div>
							<!-- CONTENT FOR 3rd TAB end-->
							<!-- CONTENT FOR 4th TAB start-->
							<div ng-show="isSetFirstTabLevel(4)">
								<div class="row">
									<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
											<div class="row input-container">
												<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
													<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
												</div>
												<div class="col-lg-11 col-sm-11 col-md-11 ">
													<div class="">
														<input type="text" name="description" id="" class="text-input floating-label" ng-model="paymentDetailsObj.cardHolderName"> <label for="description" class="">Card Holder Name</label>
													</div>
												</div>
											</div>
									</div>
									<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
											<div class="row input-container">
												<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
													<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
												</div>
												<div class="col-lg-11 col-sm-11 col-md-11 ">
													<div class="">
														<select class="text-input floating-label" ng-model="paymentDetailsObj.cardTypeId">
															<option></option>
															<option value="{{card.cardTypeId}}" ng-repeat="card in cardTypeList">{{card.cardTypeName}}</option>
														</select> <label for="code">Card Type</label>
													</div>
												</div>
											</div>
									</div>
									<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
											<div class="row input-container">
												<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
													<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
												</div>
												<div class="col-lg-11 col-sm-11 col-md-11 ">
													<div class="">
														<input type="text" name="description" id="" class="text-input floating-label" ng-model="paymentDetailsObj.amount"> <label for="description" class="">Amount</label>
													</div>
												</div>
											</div>
									</div>
									<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
											<div class="row input-container">
												<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
													<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
												</div>
												<div class="col-lg-11 col-sm-11 col-md-11 ">
													<div class="">
														<input type="text" name="description" id="" class="text-input floating-label" ng-model="paymentDetailsObj.cardNo"> <label for="description" class="">Card Number</label>
													</div>
												</div>
											</div>
									</div>
	
									</div>
									<div class="row">
										<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
												<div class="row input-container">
													<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
														<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
													</div>
													<div class="col-lg-11 col-sm-11 col-md-11 ">
														<div class="">
															<input type="text" name="description" id="" class="text-input floating-label" ng-model="paymentDetailsObj.expiryDate"> <label for="description" class="">Expiry Date</label>
														</div>
													</div>
												</div>
										</div>
									</div>
							</div>
							<!-- CONTENT FOR 4th TAB end-->
						</div>
						<!-- *********** CONTENT end*********** -->
			<!-- 19-feb new tab design end -->
						<!-- <div class="row">
							<div class="" ui-view>
						
							</div>
						</div> -->
						<div class="col-md-12 col-lg-12 headerHeight fix-height-scroll230">
							<table class="table table-bordered  margin-top8">
								<tr>
									<th class="width15">
										<span class="">Payment Mode</span>
									</th>
									<th class="width15">
										 <span class="">Bank Name</span>
									</th>
									<th class="width15">
										Cheque No/Card No
									</th>
									<th class="width15">
										Total Amount
									</th>
									<th class="width5">
										Action
									</th>
								</tr>
								<tr ng-repeat="payment in paymentDetailsList">
									<td>{{payment.paymentModeName}}</td>
									<td>{{payment.bankName != '' ? payment.bankName :'-'}}</td>
									<td>{{payment.checkNumber == '' ? payment.cardNo : '-'}}</td>
									<td>{{payment.amount}}</td>
									<td><i class="fa fa-times" aria-hidden="true" ng-click="removePaymentDetails($index)"></i></td>
								</tr>
							</table>
						</div>
						<div class="col-md-12 col-lg-12">
							<table class="table table-bordered">
								<tr>
									<td  class="text-right">
										Total Amount
									</td>
									<td>
										{{totalPaymentAmount}}
									</td>
								
									<td  class="text-right">
										Due Amount
									</td>
									<td>
										{{dueAmount}}
									</td>
								
									<td  class="text-right">
										Refund Amount
									</td>
									<td>
										{{refundAmount}}
									</td>
								</tr>
							</table>
						</div>
						<div class="col-md-12 col-lg-12">
							<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
									<div class="row input-container">
										<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
											<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
										</div>
										<div class="col-lg-11 col-sm-11 col-md-11 ">
											<div class="">
												<input type="text" name="description" id="" class="text-input floating-label" ng-model="amountReceivedFrom"> 
												<label for="description" class="">Amount Receive From</label>
											</div>
										</div>
									</div>
							</div>
							<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
									<div class="row input-container">
										<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
											<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
										</div>
										<div class="col-lg-11 col-sm-11 col-md-11 ">
											<div class="">
												<input type="text" name="description" id="" class="text-input floating-label" ng-model="identificaitonNo"> 
												<label for="description" class="">Identification No.</label>
											</div>
										</div>
									</div>
							</div>
							<div class="col-lg-1 col-md-1 col-sm-2 padding-left-right-set4 float_right padding-top10">
									<div class=" " >
										<a href="" style="width:100%" class="btn btn-primary btn-save-box-shadow" title="Save" ng-click="collectPayment()">Settle</a> <!-- data-toggle="modal" data-target="#confirmLogout" -->	
									</div>
							</div>
							<div class="col-lg-4 col-md-4 col-sm-4 padding-left-right-set4 float_right padding-top10">
								<input type="radio" name="registrationType"><span class="margin-left5">Transfer To Active Deposit</span>
							</div>
						</div>
					</fieldset>
					</div>
				</div>
			</div>
		</div>
</div>  

<!-- addViewDiscountDetails Modal START -->
<div id="addViewDiscountDetails" class=" modal fade ng-scope in" role="dialog">
		<div class="modal-dialog"> 
			<div class="modal-content">
				<div class="modal-header padding-zero">
					<div class="modal-title patient-details-row">
						Discount Details
						<button type="button" class="close" data-dismiss="modal">&times;</button>
					</div>
				</div>
			<div class="modal-body">
				<div class="row">
					<div
						class="col-lg-12 col-md-12 col-sm-12 padding-left-right-set4 padding-top10">
						<span class=""><b class="padding-right10 ">Service
								Name&nbsp;:</b> <label>{{serciveNamePop}}</label></span>
					</div>
				</div>
				<div class="row">
					<div
						class="col-lg-6 col-md-6 col-sm-6 padding-left-right-set4 padding-top10">
						<span class=""><b class="padding-right10 ">Total
								Amount&nbsp;:</b> <label>{{totalAmtPopup}}</label></span>
					</div>
					<div
						class="col-lg-6 col-md-6 col-sm-6 padding-left-right-set4 padding-top10">
						<span class="margin-left10"><b class="padding-right10 ">Total
								Discount&nbsp;:</b> <label>{{totalDiscountAmtPopup}}</label></span>
					</div>
				</div>
				<div class="row margin-top8 padding-left-right-set4">
					<div class="col-lg-12 col-md-12 col-sm-12 fix-height-scroll230">
						<table class="table table-bordered">
							<thead>
								<tr>
									<th class="width8">Discount %</th>
									<th class="width8">Discount Amount</th>
									<th class="width8">Discount Category</th>
									<th class="width8">Discount Given By</th>
									<th class="width2 text-center">Action</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="info in discountDetailsArrayListPopup">
									<td>{{info.discountPercentage}}</td>
									<td>{{info.discountAmount}}</td>
									<td>{{info.discountCategory}}</td>
									<td>-</td>
									<td class="text-center"><a><i class="fa fa-times" data-toggle="modal" data-target="#discountCancellationModal" ng-click="getRemoveDiscountPopup(info,$index)"></i></a>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
					<div class="row padding-left-right-set4">
						<div class="col-lg-12 col-md-12 col-sm-12">
							<table class=" table table-bordered">
								<tbody>
								<tr>
									<th class="width12">
										<div class="col-lg-6 col-md-6 col-sm-6 pull-left padding-left0">
											<label>
												<div class="row input-container">
													<input type="checkbox" name="" id="discountCheckbox" class=""> <label for="discountCheckbox" class="checkbox-margin-left-right">Disc %</label>
												</div>
											</label>
										</div>
										<div class="col-lg-6 col-md-6 col-sm-6 padding-left-right-set1">
											<div class="form-group">
												<input type="text" allow-decimal-numbers class="w-100 dirty" ng-model="disPerPopup" ng-blur="getDisPerPopup(disPerPopup)">
											</div>
										</div>
									</th>
									<th class="width12 vertical-middle">
										<div class="col-lg-6 col-md-6 col-sm-6 pull-left padding-left0">
											<label>
												<div class="row input-container">
													<input type="checkbox" name="" id="discountAmtCheckbox" class="" > <label for="discountAmtCheckbox" class="checkbox-margin-left-right">Disc Amt</label>
												</div>
											</label>
										</div>
										<div class="col-lg-6 col-md-6 col-sm-6 padding-left-right-set1">
											<div class="form-group">
												<input type="text" class="w-100 dirty" allow-decimal-numbers ng-model="disAmtPopup" ng-blur="getDisAmtPopup(disAmtPopup)">
											</div>
										</div>
									</th>
									<th class="width13">
										<div class="col-lg-6 col-md-6 col-sm-6 pull-left padding-left-right-set1">
											<label class="">Discount Category</label>
										</div>
										<div class="col-lg-6 col-md-6 col-sm-6 padding-left-right-set1">
											<select style="" class="w-100 dirty" ng-model="disCategoryId">
												<option ng-repeat="info in discountCategoryList" value="{{info.id}}">{{info.type}} </option>
											</select>
										</div>
									</th>
									<!-- <th class="width13">
										<div class="col-lg-6 col-md-6 col-sm-6 pull-left padding-left-right-set1">
											<label class="">Discount Given By</label>
										</div>
										<div class="col-lg-6 col-md-6 col-sm-6 padding-left-right-set1">
											<select style="" class="w-100 dirty" ng-model="disCategoryId">
												<option value="1"></option>
											</select>
										</div>
									</th> -->
									<th class="width1 text-center"><input type="button" value="Add" class="btn btn-primary btn-save-box-shadow text-width-auto padding-left-right-set4" ng-click="addDiscountInDiscountList()"></th>
								</tr>
							</tbody>
							</table>
						</div>
					</div>
			</div>
			<div class="modal-footer">
					<div class="row his-style">
						<div class="col-lg-9 col-sm-6 col-md-9"></div>
						<!-- <div class="col-lg-1 col-sm-2 col-md-1 padding-left0px-right6px">
							<div class="common-save-button">
								<input type="button" value="Add" class="btn btn-primary btn-save-box-shadow" data-dismiss="modal">
							</div>
						</div> -->
						 <div class="col-lg-1 col-sm-2 col-md-1 padding-left0px-right6px">
							<div class="common-save-button">
								<input type="button" value="Save" class="btn btn-primary btn-save-box-shadow" data-dismiss="modal">
							</div>
						</div>
						<div class="col-lg-1 col-sm-2 col-md-1 padding-left0px-right6px">
							<div class="common-save-button">
								<input type="button" value="Back" class="btn btn-primary btn-save-box-shadow" data-dismiss="modal">
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div> 
<!-- addViewDiscountDetails Modal END -->



<!-- serviceCancellationModal Modal START -->



<script src="resources/assets/js/common/page-height.js"></script>

<div ng-include="'./views/master/UnitMaster/billingMaster/common/add-service.html'" ></div>

<!-- <div ng-include="'./views/master/UnitMaster/billingMaster/common/collect-payment.html'" ></div> -->

<div id="discountCancellationModal" class="modal fade ng-scope in common-small-popup" role="dialog" style="background: rgba(0, 0, 0, 0.33); z-index: 1300 !important">
	<div class="modal-dialog">
		<!-- width: 25% !important;margin: 200px 0 0 510px !important; -->
		<div class="modal-content">
			<div class="modal-header">
				<div class="modal-title patient-details-row">
					Discount Cancellation
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>
			</div>
			<div class="modal-body">
				<div class="row">
					<div class="col-md-12 padding-left-right-set">
						<div class="row input-container margin-top10">
							<div class="col-lg-12 col-md-12 col-sm-12">
								<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
									<i class="fa fa-sticky-note-o" aria-hidden="true"></i>
								</div>
								<div class="col-lg-11 col-sm-11 col-md-11 ">
									<div class="">
										<select class="text-input floating-label" id="discountReasonId" name="code" ng-model="discountReasonId">
											<option value="">Select Reason</option>
											<option ng-repeat="info in reasonList" value="{{info.reasonMasterId}}">{{info.reasonDesc}}</option>
										</select>
										<label for="code">Select Reason</label>
									</div>
								</div>
							</div>
						</div>
						<div class="row input-container margin-top10">
							<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
								<i class="fa fa-sticky-note" aria-hidden="true"></i>
							</div>
							<div class="col-lg-11 col-sm-11 col-md-11 ">
								<div class="">
									<textarea name="code" rows="4" id="discountRemark" ng-model="discountRemark"
										class="text-input floating-label"></textarea>
									<label for="code">Note</label>
								</div>
							</div>
						</div>
						<!-- <input type="text" id="commonId" /> -->
					</div>
				</div>
			</div>
			<div class="modal-footer" style="border: none;">
				<button type="button" data-dismiss="modal" class="btn btn-primary" ng-click="removeDiscount()">Save</button>
			</div>
		</div>
	</div>
</div>
<!-- discountCancellationModal Modal END -->


<div id="serviceCancellationModal" class="modal fade ng-scope in common-small-popup" role="dialog" style="background: rgba(0, 0, 0, 0.33); z-index: 1300 !important">
	<div class="modal-dialog">
		<!-- width: 25% !important;margin: 200px 0 0 510px !important; -->
		<div class="modal-content">
			<div class="modal-header">
				<div class="modal-title patient-details-row">
					Service Cancellation
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>
			</div>
			<div class="modal-body">
				<div class="row">
					<div class="col-md-12 padding-left-right-set">
						<div class="row input-container margin-top10">
							<div class="col-lg-12 col-md-12 col-sm-12">
								<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
									<i class="fa fa-sticky-note-o" aria-hidden="true"></i>
								</div>
								<div class="col-lg-11 col-sm-11 col-md-11 ">
									<div class="">
										<select class="text-input floating-label" id="" name="code" ng-model="servicesCancelReasonId">
											<option value="">Select Reason</option>
											<option ng-repeat="info in reasonList" value="{{info.reasonMasterId}}">{{info.reasonDesc}}</option>
										</select>
										<label for="code">Select Reason</label>
									</div>
								</div>
							</div>
						</div>
						<div class="row input-container margin-top10">
							<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
								<i class="fa fa-sticky-note" aria-hidden="true"></i>
							</div>
							<div class="col-lg-11 col-sm-11 col-md-11 ">
								<div class="">
									<textarea name="code" rows="4" id="" ng-model="servicesCancelRemark"
										class="text-input floating-label"></textarea>
									<label for="code">Note</label>
								</div>
							</div>
						</div>
						<!-- <input type="text" id="commonId" /> -->
					</div>
				</div>
			</div>
			<div class="modal-footer" style="border: none;">
				<button type="button" data-dismiss="modal" class="btn btn-primary" ng-click="cancelSevices()">Save</button>
			</div>
		</div>
	</div>
</div>
<!-- serviceCancellationModal Modal END -->

<!-- CONFIRM POPUP FOR ALL -->
<div id="applyDiscountPopup" class="modal fade ng-scope in" role="dialog" style="padding-left: 17px;">
	<div class="modal-dialog"> <!-- width: 25% !important;margin: 200px 0 0 510px !important; -->
		<div class="modal-content">
			<div class="modal-header">
				<div class="modal-title patient-details-row">
					Confirm
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>
			</div>
			<div class="modal-body">
				<div class="margin-left10"><span>Are you sure you want to Apply Discount?</span></div>
			</div>
			<div class="modal-footer" style="border:none;">
				<button type="button" data-dismiss="modal" class="btn btn-primary" id="" ng-click="applyDiscount()">Ok</button>
				<button type="button" data-dismiss="modal" class="btn btn-primary">Cancel</button>
			</div>
		</div>
	</div>
</div>

<!-- CONFIRM POPUP FOR ALL -->
<div id="cancelDiscountPopup" class="modal fade ng-scope in" role="dialog" style="padding-left: 17px;">
	<div class="modal-dialog"> <!-- width: 25% !important;margin: 200px 0 0 510px !important; -->
		<div class="modal-content">
			<div class="modal-header">
				<div class="modal-title patient-details-row">
					Confirm
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>
			</div>
			<div class="modal-body">
				<div class="margin-left10"><span>Are you sure you want to Cancel Discount?</span></div>
			</div>
			<div class="modal-footer" style="border:none;">
				<button type="button" data-dismiss="modal" class="btn btn-primary" id="" ng-click="finalCancelDiscount()">Ok</button>
				<button type="button" data-dismiss="modal" class="btn btn-primary">Cancel</button>
			</div>
		</div>
	</div>
</div>

<!-- groupWiseDiscountModal START -->
<div id="groupWiseDiscountModal" class=" modal fade ng-scope in" role="dialog">
		<div class="modal-dialog"> 
			<div class="modal-content">
				<div class="modal-header padding-zero">
					<div class="modal-title patient-details-row">
						Group Wise Discount
						<button type="button" class="close" data-dismiss="modal">&times;</button>
					</div>
				</div>
			<div class="modal-body">
			<div ng-include="'./views/common/patient-demography-info.html'" class="ng-scope"></div>
				<div class="row">
					<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
						<div class="row input-container">
							<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
								<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
							</div>
							<div class="col-lg-11 col-sm-11 col-md-11">
								<div class="">
								<select class="text-input floating-label dirty ng-pristine ng-untouched ng-valid ng-not-empty" ng-model="serviceSpecialityIdForGroup" ng-change="getSubSpecialityListById(serviceSpecialityIdForGroup)">
											<option value="1000">1000</option>
											<option ng-repeat="info in specialityMasterList" value="{{info.specialityId}}">{{info.specialityName}}</option>
									</select>
									
									<label for="code">Group</label>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
						<div class="row input-container">
							<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
								<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
							</div>
							<div class="col-lg-11 col-sm-11 col-md-11">
								<div class="">
									<select class="text-input floating-label dirty ng-pristine ng-untouched ng-valid ng-not-empty" ng-model="serviceSubSpecialityIdForGroup" convert-to-number="">
										<option value="1000">1000</option>
										<option ng-repeat="info in subSpecialityMaterList" value="{{info.subSpecialityId}}">{{info.subSpecialityName}}</option>
									</select>
									<label for="code">Sub Group</label>
								</div>
							</div>
						</div>
					</div>
					
					<div class="col-lg-1 col-md-1 col-sm-2 padding-left-right-set4 text-width-auto padding-top4">
			          <div class="common-save-button"> 
			             <a href="" class="btn btn-primary btn-save-box-shadow" ng-click="serachGroupWiseServices()" style="width: auto;"> 
			              <i class="fa fa-search" aria-hidden="true"></i> 
			             </a> 
			          </div> 
			        </div>
			        <div class="col-lg-1 col-md-1 col-sm-2 padding-left-right-set4 text-width-auto padding-top4">
			          <div class="common-save-button"> 
			             <a href="" class="btn btn-primary btn-save-box-shadow" ng-click="serachGroupWiseServicesClear()" style="width: auto;"> 
			              Clear 
			             </a> 
			          </div> 
			        </div>
					<!-- <div class="col-lg-1 col-md-1 col-sm-2 padding-left-right-set4 text-width-auto padding-top4 pull-right">
			          <div class="common-save-button"> 
			             <a href="" class="btn btn-primary btn-save-box-shadow" style="width: auto;"> 
			              <i class="fa fa-search" aria-hidden="true"></i> 
			             </a> 
			          </div> 
			        </div> -->
					<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10 pull-right">
						<div class="row input-container">
							<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
								<i class="fa fa-search" aria-hidden="true"></i>
							</div>
							<div class="col-lg-11 col-sm-11 col-md-11 ">
								<div class="">
									<input type="text" name="Search" id="" class="text-input floating-label dirty" ng-model="searchKeyword"> 
									<label for="Search" class="">Search</label>
								</div>
							</div>
						</div>
					</div> 
				</div>
				<div class="row padding-left-right-set4 padding-top4 padding-bottom10">
					<div class="table-container">
					   <div class="table-container-header">
					      <table class="table table-striped table-hover table-condensed table-bordered">
					         <thead>
					            <tr>
					            <th class="width3" >
								             	<input type="checkbox"  ng-model="chkFlgGroup" ng-true-value="'Y'" ng-false-value="'N'" ng-click="groupWiseCheckAll(chkFlgGroup)" />
										       </th>
							       <th class="width8" title="Order No.">
							        Order No.
							       </th>
							       <th class="width8" title="Service Code">
							        Service Code
							       </th>
							       <th class="width8" title="Service Name">
							        Service Name
							       </th>
							       <th class="width8" title="Qty">
							        Qty
							       </th>
							       <th class="width8" title="Unit Price">
							       Unit Price
							       </th>
							       <th class="width8" title="Total Amount">
							        Total Amount
							       </th>
							       <th class="width8" title="Concession">
							        Concession
							       </th>
							       <th class="width8" title="Discount %">
							        Disc %
							       </th>
							       <th class="width8" title="Discount Amount">
							        Disc Amt
							       </th>
							       <th class="width8" title="GST">
							        GST
							       </th>
							       <th class="width8" title="GST %">
							        GST %
							       </th>
							       <th class="width8" title=" GST Amount">
							        GST Amt
							       </th>
							       <th class="width8" title=" Net Payable">
							        Net Payable
							       </th>
						      </tr>
					         </thead>
					      </table>
					   </div>
					   
					   <div class="table-container-body" style="overflow: overlay;background: #ffffce;">
					      <table class="table table-striped table-hover table-condensed table-bordered">
					         <tbody>
					             <tr ng-repeat="service in groupWiseDiscountServicesList|filter:searchKeyword">
					             	 <td class="width3"><input type="checkbox" checklist-model="groupWiseServicesSelectedList.services" checklist-value="service.serviceMasterId" ng-click="clearDiscount()"/></td>
								         		<td class="width8">{{service.orderNo}}</td>
								         		<td class="width8">{{service.serviceStandardCode}}</td>
								         		<td class="width8">{{service.serviceStandardName}}</td>
								         		<td class="width6">{{service.quantity}}</td>
								         		<td class="width8">{{service.basePrice}}</td>
								         		<td class="width8">{{service.totalAmt}}</td>
								         		<td class="width8">{{service.concession}}</td>
								         		<td class="width8">{{service.discountPercentage}}</td>
								         		<td class="width8">{{service.discount}}</td>
								         		<td class="width6">{{service.taxName}}</td>
								         		<td class="width6">{{service.taxPercentage}}%</td>
								         		<td class="width8">{{service.taxAmt}}</td>
								         		<td class="width8">{{service.netPay}}</td>
					         	</tr>
					         </tbody>
					      </table>
					   </div>
					</div>
				</div>
				
				<div class="row padding-left-right-set4">
						<div class="col-lg-12 col-md-12 col-sm-12">
							<table class=" table table-bordered">
								<tbody>
								<tr>
									<th class="width12">
										<div class="col-lg-6 col-md-6 col-sm-6 pull-left padding-left0">
											<label>
												<div class="row input-container">
													<input type="checkbox" name="" id="discountCheckbox" class=""> <label for="discountCheckbox" class="checkbox-margin-left-right">Disc %</label>
												</div>
											</label>
										</div>
										<div class="col-lg-6 col-md-6 col-sm-6 padding-left-right-set1">
											<div class="form-group">
												<input type="text" allow-decimal-numbers class="w-100 dirty" ng-model="disPerPopupForGroup" ng-blur="getDisPerPopupForGroup(disPerPopupForGroup)">
											</div>
										</div>
									</th>
									<th class="width12 vertical-middle">
										<div class="col-lg-6 col-md-6 col-sm-6 pull-left padding-left0">
											<label>
												<div class="row input-container">
													<input type="checkbox"  name="" id="discountAmtCheckbox" class="" > <label for="discountAmtCheckbox" class="checkbox-margin-left-right">Disc Amt</label>
												</div>
											</label>
										</div>
										<div class="col-lg-6 col-md-6 col-sm-6 padding-left-right-set1">
											<div class="form-group">
												<input type="text" class="w-100 dirty" allow-decimal-numbers ng-model="disAmtPopupForGroup" ng-blur="getDisAmtPopupForGroup(disAmtPopupForGroup)">
											</div>
										</div>
									</th>
									<th class="width13">
										<div class="col-lg-6 col-md-6 col-sm-6 pull-left padding-left-right-set1">
											<label class="">Discount Category</label>
										</div>
										<div class="col-lg-6 col-md-6 col-sm-6 padding-left-right-set1">
											<select style="" class="w-100 dirty" ng-model="disCategoryIdForGroup">
												<option ng-repeat="info in discountCategoryList" value="{{info.id}}">{{info.type}} </option>
											</select>
										</div>
									</th>
									<th class="width1 text-center"><input type="button" value="Apply" class="btn btn-primary btn-save-box-shadow text-width-auto padding-left-right-set4" ng-click="addDiscountInDiscountListForGroup()"></th>
								</tr>
							</tbody>
							</table>
						</div>
					</div>
					
				<!-- <div class="row padding-left-right-set4">
					<div class="col-lg-12 col-md-12 col-sm-12">
						<table class=" table table-bordered">
							<tbody>
								<tr>
									<th class="width12">
										<div class="col-lg-6 col-md-6 col-sm-6 pull-left padding-left0">
											<label>
												<div class="row input-container">
													<input type="checkbox" name="" id="discountCheckbox"  class=""> <label for="discountCheckbox" class="checkbox-margin-left-right">Disc %</label>
												</div>
											</label>
										</div>
										<div class="col-lg-6 col-md-6 col-sm-6 padding-left-right-set1">
											<div class="form-group">
												<input type="text" class="w-100 dirty">
											</div>
										</div>
									</th>
									<th class="width12 vertical-middle">
										<div class="col-lg-6 col-md-6 col-sm-6 pull-left padding-left0">
											<label>
												<div class="row input-container">
													<input type="checkbox" name="" id="discountAmtCheckbox" class=""> <label for="discountAmtCheckbox" class="checkbox-margin-left-right">Disc Amt</label>
												</div>
											</label>
										</div>
										<div class="col-lg-6 col-md-6 col-sm-6 padding-left-right-set1">
											<div class="form-group">
												<input type="text" class="w-100 dirty">
											</div>
										</div>
									</th>
									<th class="width13">
										<div class="col-lg-6 col-md-6 col-sm-6 pull-left padding-left-right-set1">
											<label class="">Discount Category</label>
										</div>
										<div class="col-lg-6 col-md-6 col-sm-6 padding-left-right-set1">
											<select style="" class="w-100 dirty">
												<option value=""></option>
											</select>
										</div>
									</th>
									<th class="width13">
										<div class="col-lg-6 col-md-6 col-sm-6 pull-left padding-left-right-set1">
											<label class="">Discount Given By</label>
										</div>
										<div class="col-lg-6 col-md-6 col-sm-6 padding-left-right-set1">
											<select style="" class="w-100 dirty">
												<option value=""></option>
											</select>
										</div>
									</th>
									<th class="width1 text-center"><input type="button" value="Apply" class="btn btn-primary btn-save-box-shadow text-width-auto padding-left-right-set4" data-dismiss="modal"></th>
								</tr>
							</tbody>
						</table>
					</div>
				</div> -->
			</div>
			<div class="modal-footer">
				<div class="row his-style">
					<div class="col-lg-10 col-sm-8 col-md-10"></div>
					<div class="col-lg-1 col-sm-2 col-md-1 padding-left0px-right6px">
						<div class="common-save-button">
							<input type="button" value="Save" class="btn btn-primary btn-save-box-shadow" data-dismiss="modal"  ng-click="saveGroupDiscountToFinalList()">
						</div>
					</div>
					<div class="col-lg-1 col-sm-2 col-md-1 padding-left0px-right6px">
						<div class="common-save-button">
							<input type="button" value="Close" class="btn btn-primary btn-save-box-shadow" data-dismiss="modal">
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- groupWiseDiscountModal Modal END -->
 
<modal visible="showModal"></modal> 

<script>

$(document).ready(function() {
	$(".patienttSearchResult").hide();
	$(".useActiveDepositList").hide();
	
	 $(".sponserTable").hide();
	 
	 $(".selectedPageName").text("OPD Billing");
	$(".sidebar-nav li").each(function() {
		$(this).find("a").parents("li").removeClass("active");
	});
	$('a[href$="opdBilling"]').parents("li").addClass("active");
});

$(".useActiveDeposit").click(function()
{
	$(".useActiveDepositList").toggle();
})

$(".insuranceRadio").click(function()
{
	$(".insuranceTable").show();
	$(".sponserTable").hide();
})
$(".sponsorRadio").click(function()
{
	$(".sponserTable").show();
	$(".insuranceTable").hide();
})
/* 
$(document).on('click', '.commonPatientSearch', function(){
	alert()
	$(this).closest(".patienttSearchResult").toggle();
}); */

</script>
