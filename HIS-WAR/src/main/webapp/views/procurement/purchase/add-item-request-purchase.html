<!-- /********************************************************************************************************************************************
Procurement - purchase - item request main page
Created by - Pranita Patil
Created Date - 05-Dec-2017  
/********************************************************************************************************************************************/ -->
<!-- Page Content -->
<head>
  <style type="text/css">
    .borderRed {
      border: 2px solid #ff0000;
    }
  </style>
</head>
<div id="page-content-wrapper" class="">
	<div class="container-fluid his-style">
		<fieldset class="">
			<div class="row ">
				<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4">
          <div class="row input-container padding-top10 customRadioBtn">
            <label for="" class="font-weight700">Type :</label>
            <input ng-model="vm.model.assetType" ng-value="2" type="radio" name="FixedARadioB" id ="fixedAssetRadiobtn" ng-change="vm.model.isAssetTypeValid = false" ng-disabled="vm.model.itemId">
              <label for="fixedAssetRadiobtn" >Fixed Assest</label>
            <input ng-model="vm.model.assetType" ng-value="1" type="radio" name="FixedARadioB" id="consumblestRadiobtn" ng-change="vm.model.isAssetTypeValid = false" ng-disabled="vm.model.itemId">
              <label for="consumblestRadiobtn" class="">Consumables</label>
          </div>
          <p ng-if="vm.model.isAssetTypeValid" class="errorMsg">Select Asset Type</p>
				</div>
				<div class="col-lg-8 col-md-8 col-sm-7 "></div>
			</div>
			<div class="row table-container">
        <div class="table-container-header col-lg-12 col-md-12 padding-left-right-set4 padding-top10">
          <table class="table table-striped table-hover table-condensed table-bordered">
            <thead>
              <tr class="table-th-bg">
                <th colspan="12" class="font-weight700">Item Details</th>
              </tr>
            </thead>
          </table>
        </div>
				<div class="table-container-header col-lg-12 col-md-12 padding-left-right-set4">
					<table class="table table-striped table-hover table-condensed table-bordered">
						<thead>
							<tr>
								<th class="width2">Sr No</th>
								<th class="width12">Item Name
								</th>
								<th class="width10">Manufacturer
								</th>
								<th class="width10">Vendor
								</th>
								<th class="width10">Expected Price
								</th>
								<th class="width20" >Reason for Item Creation
								</th>
								<th class="width4">Action</th>
							</tr>
						</thead>
          </table>
        </div>
        <div class="table-container-body col-lg-12 col-md-12 padding-left-right-set4" style="height: 550px; overflow-y: scroll;">
          <table class="table table-striped table-hover table-condensed table-bordered">
						<tbody>
							<tr ng-repeat="item in vm.model.items ">
								<td class="width2">{{$index + 1}}</td>
								<td class="width12">
									<input type="text" ng-model="item.itemName" class="select-box" ng-change="vm.model.isItemNameValid[$index] = false" ng-class="{borderRed: vm.model.isItemNameValid[$index]}" />
								</td>
								<td class="width10">
                  <input type="text" name="manufacturer" id="manufacturer" class="select-box" ng-model="item.manufacturer" uib-typeahead="manufacturerNames.detail for manufacturerNames in vm.model.SearchManufacturer($viewValue)" typeahead-on-select="vm.model.AddManufacturer($item, item); vm.model.manufacturerSearch = '';" ng-change="vm.model.isManufacturerValid[$index] = false" ng-class="{borderRed: vm.model.isManufacturerValid[$index]}">
								</td>
								<td class="width10">
                  <input type="text" name="vendorName" id="vendorName" class="select-box" ng-model="item.vendorName" uib-typeahead="vendorNames.detail for vendorNames in vm.model.SearchVendorNames($viewValue)" typeahead-on-select="vm.model.AddVendorName($item, item); vm.model.vendorSearch = '';" ng-change="vm.model.isVendorValid[$index] = false" ng-class="{borderRed: vm.model.isVendorValid[$index]}">
								</td>
								<td class="width10">
									<input type="text" class="select-box text-right" ng-model="item.expectedPrice" ng-change="vm.model.isPriceValid[$index] = false" ng-class="{borderRed: vm.model.isPriceValid[$index]}" ng-blur="vm.model.SetDecimal(item)" allow-decimal-numbers />
								</td>
								<td class="width20">
									<input type="text" ng-model="item.reasonForItemCreation" ng-change="vm.model.isReasonValid[$index] = false" ng-class="{borderRed: vm.model.isReasonValid[$index]}" class="select-box" />
								</td>
								<td class="width4" style="width: 3.8% !important">
									<span>
										<input type="button" ng-click="vm.model.AddDuplicateRow($index)" value="+" class="btn btn-info add-dynamic-row note-width">
									</span>
									<span>
										<input type="button" ng-click="vm.model.RemoveRowData($index)" value="-" class="btn btn-info add-dynamic-row note-width" ng-if="$index !== 0">
									</span>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</fieldset>
		<footer class="col-lg-12 col-md-12 col-sm-12 padding-left-right-set4 padding-right20" style="padding-right: 40px !important;">
					<div class="row padding-top5 margin-top10 padding-right20">
			<div class="col-lg-10 col-md-10"></div>
			<div class="col-lg-1 col-md-1 padding-left-right-set4">
				<a href="" ng-click="vm.model.SavePurchaseRequest()">
					<input type="button" value="Save" class="btn btn-primary btn-save-box-shadow">
				</a>
			</div>
			<div class="col-lg-1 col-md-1 padding-left-right-set4">
				<a href="" ng-click="vm.model.NavigateToItemRequest()">
					<input type="button" value="Back" class="btn btn-primary btn-save-box-shadow">
				</a>
			</div>
		</div>
				</footer>
	</div>
</div>
<script type="text/javascript">
$( document ).ready(function() {
	$(".selectedPageName").text("Add New Item Request");
})
</script>
<script src="resources/assets/js/common/page-height.js"></script>