<!-- /********************************************************************************************************************************************
   Procurement - quotation - GRN main   page
   Created by - Pranita Patil
   Created Date - 26-Oct-2017 
   /********************************************************************************************************************************************/ -->
<!-- Page Content -->
<div id="page-content-wrapper">
   <div class="container-fluid his-style">
      <fieldset  class="main-fieldset">
         <div class="row margin-top10">
            <div class="col-lg-1 col-md-2 col-sm-2 padding-left-right-set4 padding-top10">
               <div class="row input-container">
                  <div class="col-lg-2 col-sm-2 col-md-2 polymer-icon">
                     <i class="fa fa-calendar-plus-o" aria-hidden="true"></i>
                  </div>
                  <div class="col-lg-10 col-sm-10 col-md-10">
                     <div>
                        <input type="text" class="text-input floating-label dirty" name="fromDate" id="fromDate" uib-datepicker-popup="dd/MM/yyyy" placeholder="DD/MM/YYYY" ng-model="vm.model.fromDate" model-view-value="true" is-open="vm.model.fromDateOpened" datepicker-options="vm.model.fromDateOptions" show-button-bar="false" ng-click="vm.model.OpenFromDate()">
                        <label for="fromDate">From Date</label>
                     </div>
                  </div>
               </div>
            </div>
            <div class="col-lg-1 col-md-2 col-sm-2 padding-left-right-set4 padding-top10">
               <div class="row input-container">
                  <div class="col-lg-2 col-sm-2 col-md-2 polymer-icon ">
                     <i class="fa fa-calendar-minus-o" aria-hidden="true"></i>
                  </div>
                  <div class="col-lg-10 col-sm-10 col-md-10 ">
                     <div>
                        <input type="text" class="text-input floating-label dirty" name="toDate" id="toDate" uib-datepicker-popup="dd/MM/yyyy" placeholder="DD/MM/YYYY" ng-model="vm.model.toDate" model-view-value="true" is-open="vm.model.toDateOpened" datepicker-options="vm.model.toDateOptions" show-button-bar="false" ng-click="vm.model.OpenToDate()">
                        <label for="toDate" class="LISDynamicLabel">To Date</label>
                     </div>
                  </div>
               </div>
            </div>
            <div class="col-lg-2 col-md-2 col-sm-4 padding-left-right-set4 padding-top10">
               <div class="row input-container">
                  <div class="col-lg-1 col-sm-2 col-md-2 polymer-icon ">
                     <i class="fa fa-building-o" aria-hidden="true"></i>
                  </div>
                  <div class="col-lg-11 col-sm-10 col-md-10 ">
                     <div>
                        <select name="store" class="text-input floating-label" ng-model="vm.model.store" data-ng-options="store.store for store in vm.model.storeList" ng-class="{'dirty': vm.model.store}">
                        </select>
                        <label for="store" class="LISDynamicLabel">Store</label>
                     </div>
                  </div>
               </div>
            </div>
            <div class="col-lg-2 col-md-2 col-sm-4 padding-left-right-set4 padding-top10">
               <div class="row input-container">
                  <div class="col-lg-1 col-sm-2 col-md-2 polymer-icon">
                     <i class="fa fa-dot-circle-o" aria-hidden="true"></i>
                  </div>
                  <div class="col-lg-11 col-sm-10 col-md-10">
                     <div>
                        <input type="text" ng-model="vm.model.grnNumber" name="grnNumber" class="text-input floating-label" ng-class="{'dirty': vm.model.grnNumber}">
                        <label for="grnNumber">GRN No</label>
                     </div>
                  </div>
               </div>
            </div>
            <div class="col-lg-2 col-md-2 col-sm-4 padding-left-right-set4 padding-top10">
               <div class="row input-container">
                  <div class="col-lg-2 col-sm-2 col-md-2 polymer-icon">
                     <i class="fa fa-dot-circle-o" aria-hidden="true"></i>
                  </div>
                  <div class="col-lg-10 col-sm-10 col-md-10">
                     <div>
                        <select name="grnType" class="text-input floating-label" ng-model="vm.model.grnType" data-ng-options="type.type for type in vm.model.assetTypes" ng-class="{'dirty': vm.model.grnType}"></select>
                        <label for="grnType">GRN Type</label>
                     </div>
                  </div>
               </div>
            </div>
            <div class="col-lg-2 col-md-2 col-sm-4 padding-left-right-set4 padding-top10">
               <div class="row input-container">
                  <div class="col-lg-2 col-sm-2 col-md-2 polymer-icon ">
                     <i class="fa fa-dot-circle-o" aria-hidden="true"></i>
                  </div>
                  <div class="col-lg-10 col-sm-10 col-md-10 ">
                     <div>
                        <input type="text" name="vendorName" class="text-input floating-label" ng-model="vm.model.vendorName" uib-typeahead="vendorNames.detail for vendorNames in vm.model.SearchVendorNames($viewValue)" typeahead-on-select="vm.model.AddVendorName($item); vm.model.search = '';" ng-class="{'dirty': vm.model.vendorName}">
                        <label for="vendorName">Vendor</label>
                     </div>
                  </div>
               </div>
            </div>
            <div class="col-lg-2 col-md-3 col-sm-4 padding-left-right-set4 padding-top10">
               <div class="row input-container">
                  <div class="col-lg-1 col-sm-2 col-md-2 polymer-icon ">
                     <i class="fa fa-dot-circle-o" aria-hidden="true"></i>
                  </div>
                  <div class="col-lg-8 col-sm-9 col-md-8">
                     <div>
                        <select name="status" id="status" class="text-input floating-label dirty" ng-model="vm.model.status" data-ng-options="status.status for status in vm.model.statuses"></select>
                        <label for="status" class="LISDynamicLabel">Status</label>
                     </div>
                  </div>
                  <div class="col-lg-1 col-md-1 col-sm-1 padding-left-right-set pull-left">
                     <div class="common-save-button" style="padding-top: 0px;"> 
                        <a href="" ng-click="vm.model.GetGRNList()" class="btn btn-primary btn-save-box-shadow" style="width: auto;"> 
                        <i class="fa fa-search" aria-hidden="true"></i> 
                        </a> 
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </fieldset>
      <div class="row margin-top4">
         <div class="col-lg-1 col-md-1 col-sm-2 padding-left-right-set4  text-width-auto float_right">
            <div class=" ">
               <a href="" ng-click="vm.model.OpenPopup('Update', 'confirmSave', {})" class="btn btn-primary btn-save-box-shadow" title="Save">
               <i class="fa fa-floppy-o" style="font-size: 21px" aria-hidden="true"></i></a>
            </div>
         </div>
         <div class="col-md-2 col-sm-2 padding-left-right-set4 text-width-auto float_right">
            <div class=" ">
               <a href ng-click="vm.model.NavigateToAddNew()">
               <input type="button" value="Add New"  class="btn btn-primary btn-save-box-shadow">
               </a>
            </div>
         </div>
         <div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 float_right">
            <input type="text" class="text-search-box" ng-model="search" placeholder="Search" style="margin-top: 0px"> <i class="fa fa-search common-search-text-icon" style="left:12px;top: 9px;" aria-hidden="true"></i>
         </div>
      </div>
      <div class="row margin-top4">
         <div class="col-md-12 col-lg-12 col-sm-8 padding-left-right-set4"  id="nonBillableTableHt">
            <fieldset>
               <div class="row table-container padding-left-right-set4 padding-top5">
                  <div class="table-container-header">
                     <table class="table table-striped table-hover table-condensed table-bordered first-checkBox-padding">
                        <thead class="mainServiceTableCommon">
                           <tr>
                              <th class="width1 text-center">
                                 <input type="checkbox" ng-click="vm.model.SelectAllGRN()" ng-model="vm.model.selectAllRows" ng-disabled="!vm.model.grnList || vm.model.grnList == false" />
                              </th>
                              <th class="width5">
                                 GRN Date
                                 <div class="float_right" ng-click="sortType = 'grnDate'; sortReverse = !sortReverse">
                                    <div>
                                       <i class="fa fa-caret-up" aria-hidden="true"></i>
                                    </div>
                                    <div class="margin-top-8">
                                       <i class="fa fa-caret-down" aria-hidden="true"></i>
                                    </div>
                                 </div>
                              </th>
                              <th class="width5">
                                 GRN No
                                 <div class="float_right" ng-click="sortType = 'grnNo'; sortReverse = !sortReverse">
                                    <div>
                                       <i class="fa fa-caret-up" aria-hidden="true"></i>
                                    </div>
                                    <div class="margin-top-8">
                                       <i class="fa fa-caret-down" aria-hidden="true"></i>
                                    </div>
                                 </div>
                              </th>
                              <th class="width5">
                                 Invoice No
                                 <div class="float_right" ng-click="sortType = 'invoiceNo'; sortReverse = !sortReverse">
                                    <div>
                                       <i class="fa fa-caret-up" aria-hidden="true"></i>
                                    </div>
                                    <div class="margin-top-8">
                                       <i class="fa fa-caret-down" aria-hidden="true"></i>
                                    </div>
                                 </div>
                              </th>
                              <th class="width5">
                                 Invoice Date
                                 <div class="float_right" ng-click="sortType = 'invoiceDate'; sortReverse = !sortReverse">
                                    <div>
                                       <i class="fa fa-caret-up" aria-hidden="true"></i>
                                    </div>
                                    <div class="margin-top-8">
                                       <i class="fa fa-caret-down" aria-hidden="true"></i>
                                    </div>
                                 </div>
                              </th>
                              <th class="width5">
                                 DC No
                                 <div class="float_right" ng-click="sortType = 'dcNo'; sortReverse = !sortReverse">
                                    <div>
                                       <i class="fa fa-caret-up" aria-hidden="true"></i>
                                    </div>
                                    <div class="margin-top-8">
                                       <i class="fa fa-caret-down" aria-hidden="true"></i>
                                    </div>
                                 </div>
                              </th>
                              <th class="width5">
                                 DC Date
                                 <div class="float_right" ng-click="sortType = 'dcDate'; sortReverse = !sortReverse">
                                    <div>
                                       <i class="fa fa-caret-up" aria-hidden="true"></i>
                                    </div>
                                    <div class="margin-top-8">
                                       <i class="fa fa-caret-down" aria-hidden="true"></i>
                                    </div>
                                 </div>
                              </th>
                              <th class="width5">
                                 Vendor
                                 <div class="float_right" ng-click="sortType = 'vendorName'; sortReverse = !sortReverse">
                                    <div>
                                       <i class="fa fa-caret-up" aria-hidden="true"></i>
                                    </div>
                                    <div class="margin-top-8">
                                       <i class="fa fa-caret-down" aria-hidden="true"></i>
                                    </div>
                                 </div>
                              </th>
                              <th class="width5">
                                 Added By
                                 <div class="float_right" ng-click="sortType = 'addedBy'; sortReverse = !sortReverse">
                                    <div>
                                       <i class="fa fa-caret-up" aria-hidden="true"></i>
                                    </div>
                                    <div class="margin-top-8">
                                       <i class="fa fa-caret-down" aria-hidden="true"></i>
                                    </div>
                                 </div>
                              </th>
                              <th class="width5">
                                 Status
                                 <div class="float_right" ng-click="sortType = 'status'; sortReverse = !sortReverse">
                                 <div class="float_right">
                                    <div>
                                       <i class="fa fa-caret-up" aria-hidden="true"></i>
                                    </div>
                                    <div class="margin-top-8">
                                       <i class="fa fa-caret-down" aria-hidden="true"></i>
                                    </div>
                                 </div>
                              </th>
                              <th class="width5">
                                 Approval Status
                                 <div class="float_right" ng-click="sortType = 'approvalStatus'; sortReverse = !sortReverse">
                                    <div>
                                       <i class="fa fa-caret-up" aria-hidden="true"></i>
                                    </div>
                                    <div class="margin-top-8">
                                       <i class="fa fa-caret-down" aria-hidden="true"></i>
                                    </div>
                                 </div>
                              </th>
                              <th class="width6">Action</th>
                           </tr>
                        </thead>
                     </table>
                  </div>
                  <div class="table-container-body" style="height: 580px; overflow-y: overlay;">
                     <table class="table table-striped table-hover table-condensed table-bordered">
                        <tbody>
                           <tr ng-repeat="grn in vm.model.grnList | filter: search | orderBy:sortType:sortReverse">
                              <td class="width1 text-center">
                                <input type="checkbox" ng-model="grn.isSelected" ng-click="vm.model.SelectGRN(grn)" ng-disabled="vm.model.isDisable(grn)" />
                              </td>
                              <td class="width5" title="{{grn.grnDate | date:'dd/MM/yyyy' : 'UTC'}}">{{grn.grnDate | date:'dd/MM/yyyy' : 'UTC'}}</td>
                              <td class="width5" title="{{grn.grnNo}}">{{grn.grnNo}}</td>
                              <td class="width5" title="{{grn.invoiceNo}}">{{grn.invoiceNo}}</td>
                              <td class="width5" title="{{grn.invoiceDate | date:'dd/MM/yyyy' : 'UTC'}}">{{grn.invoiceDate | date:'dd/MM/yyyy' : 'UTC'}}</td>
                              <td class="width5" title="{{grn.dcNo}}">{{grn.dcNo}}</td>
                              <td class="width5" title="{{grn.dcDate | date:'dd/MM/yyyy' : 'UTC'}}">{{grn.dcDate | date:'dd/MM/yyyy' : 'UTC'}}</td>
                              <td class="width5" title="{{grn.vendorName}}">{{grn.vendorName}}</td>
                              <td class="width5" title="{{grn.addedBy}}">{{grn.addedBy}}</td>
                              <td class="width5" title="{{grn.status}}">{{grn.status}}</td>
                              <td class="width5" title="{{grn.approvalStatus}}">{{grn.approvalStatus}}</td>
                              <td class="width6" style="width: 5.8% !important">
                                <div class="col-lg-2 col-md-4 padding-left-right-set4 ">
                                  <a title="Edit" ng-click="vm.model.NavigateToEdit(grn)" ng-class="{disabled: vm.model.isEdit(grn)}"><i class="fa fa-pencil" aria-hidden="true"></i></a>
                                </div>
                                <div class="col-lg-2 col-md-4 padding-left-right-set4 ">
                                  <a title="Print" ><i class="fa fa-print" aria-hidden="true" ></i></a>
                                </div>
                                <div class="col-lg-2 col-md-4 padding-left-right-set4 ">
                                  <a title="Cancel" ng-class="{disabled: vm.model.isCancel(grn)}" ng-click="vm.model.OpenPopup('Cancel', 'cancelGRN', grn); vm.model.PopulateReasonDropdown()"><i class="fa fa-ban" aria-hidden="true"></i></a>
                                </div>
                                <div class="col-lg-6 col-md-6 padding-left-right-set4 text-right">
                                <a class="cursor-pointer" ng-click="vm.model.NavigateToDetails(grn)">Details</a>
                                </div>
                              </td>
                           </tr>
                           <tr ng-if="!vm.model.grnList || vm.model.grnList == false">
                            <td class="text-center">
                              <p>No Record Found</p>
                            </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
               </div>
            </fieldset>
         </div>
      </div>
   </div>
</div>
<div id="cancelGRN" class="modal fade ng-scope in common-small-popup" role="dialog" style="background: rgba(0, 0, 0, 0.33); z-index: 1300 !important;">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <div class="modal-title patient-details-row">
            Cancellation
            <button type="button" class="close" ng-click="vm.model.ModalDismiss('cancelGRN')">&times;</button>
          </div>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-md-12 padding-left-right-set">
              <div class="row input-container margin-top10">
                  <div class="col-lg-1 col-sm-1 col-md-1 polymer-icon"> 
                    <i class="fa fa-sticky-note-o" aria-hidden="true"></i>
                  </div>
                  <div class="col-lg-11 col-sm-11 col-md-11 ">
                    <div>
                      <select name="cancelReason" id="cancelReason" class="text-input floating-label" ng-model="vm.model.cancelReason" ng-class="{dirty: vm.model.cancelReason}" ng-change="vm.model.isReasonValid = false">
                        <option ng-repeat="reason in vm.model.reasons" value="{{reason.id}}">{{reason.reason}}</option>
                      </select>
                      <label for="code">Select Reasons</label>
                    </div>
                    <p ng-if="vm.model.isReasonValid" class="errorMsg">Select Reason</p>
                  </div>
                </div>
              <div class="row input-container margin-top10">
                <div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
                  <i class="fa fa-sticky-note" aria-hidden="true"></i>
                </div>
                <div class="col-lg-11 col-sm-11 col-md-11 ">
                  <div>
                    <textarea name="rejectNote" rows="4" id="noteReject" class="text-input floating-label ng-pristine ng-untouched ng-valid ng-empty" ng-model="vm.model.rejectNote" ng-class="{dirty: vm.model.rejectNote}"></textarea>
                    <label for="rejectNote">Note</label>
                  </div>
                </div>
              </div>
              <!-- <input type="text" id="commonId" /> -->
            </div>
          </div>
        </div>
        <div class="modal-footer" style="border:none;">
          <button type="button" class="btn btn-primary" ng-click="vm.model.UpdateGRN()">Save</button>
        </div>
      </div>
    </div>
</div>
<!-- confirmSave modal start -->
<div id="confirmSave" class="modal fade ng-scope in" role="dialog">
  <div class="modal-dialog" style="width: 560px !important; margin: 80px auto !important;">
    <div class="modal-content">
      <div class="modal-header" style="padding: 0px!important;">
        <div class="modal-title patient-details-row">
          Confirm
          <button type="button" class="close" ng-click="vm.model.ModalDismiss('confirmSave')">&times;</button>
        </div>
      </div>
      <div class="modal-body">
        <div class="margin-left10"><span>Are you sure you want to Save?</span></div>
      </div>
      <div class="modal-footer" style="border:none;">
        <button type="button" class="btn btn-primary" ng-click="vm.model.UpdateGRN()">Ok</button>
        <button type="button" ng-click="vm.model.ModalDismiss('confirmSave')" class="btn btn-primary">Cancel</button>
      </div>
    </div>
  </div>
</div>
<!-- details modal start -->
<div id="wasteStoreDetailsModal" class="modal fade ng-scope in" role="dialog">
   <div class="modal-dialog">
      <!-- width: 25% !important;margin: 200px 0 0 510px !important; -->
      <div class="modal-content">
         <div class="modal-header">
            <div class="modal-title patient-details-row">
               GRN Details
               <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
         </div>
         <div class="modal-body">
            <div class="row">
               <div class="col-lg-12 col-md-12 common-popup-height-350 padding-top10">
                  <table class="table table-bordered">
                     <thead>
                        <tr>
                           <th class="width6">Item Code</th>
                           <th class="width6">Item Name</th>
                           <th class="width6">Receive Pending Qty</th>
                           <th class="width6">Free Pending Qty</th>
                           <th class="width6">Free Qty</th>
                           <th class="width6">Receive Qty</th>
                           <th class="width6">Batch No  </th>
                           <th class="width6">Expiry Date</th>
                           <th class="width6">COP</th>
                           <th class="width6">MRP</th>
                           <th class="width6">Lot No</th>
                           <th class="width6">Manufacturer </th>
                           <th class="width8">Specification</th>
                           <th class="width8">Remark</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td>-</td>
                           <td>-</td>
                           <td>-</td>
                           <td>-</td>
                           <td>-</td>
                           <td>-</td>
                           <td>-</td>
                           <td>-</td>
                           <td>-</td>
                           <td>-</td>
                           <td>-</td>
                           <td>-</td>
                           <td>-</td>
                           <td>
                              <!-- <textarea row="2"></textarea> -->
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
         </div>
         <div class="modal-footer">
            <div class="row his-style">
               <div class="col-md-11"></div>
               <div class="col-md-1 padding-left0px-right6px">
                  <div class="common-save-button">
                     <input type="button" value="Close" class="btn btn-primary btn-save-box-shadow">
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>
<!-- details modal end -->
<script type="text/javascript">
   $( document ).ready(function() {
    $(".selectedPageName").text("Good Receipt Note");
    $(".sidebar-nav li").each(function() {
      $(this).find("a").parents("li").removeClass("active");
    });
    
    $(".selectedServicesList").hide();
    /*************************** rejection radio button function*********************************/
    $(".add-new-item-row").hide();
    $(".get-request-row").hide();
     $( ".addNewItemRadioBtnClass" ).change(function() {
        if ($(this).is(":checked"))
        {
          $(".add-new-item-row").show('slow');
          $(".get-request-row").hide('slow');
        }
      }); 
    $( ".getRequestListBtnClass" ).change(function() {
      if ($(this).is(":checked"))
      {
        $(".add-new-item-row").hide('slow');
        $(".get-request-row").show('slow');
      }
    }); 
   
   });
   /*************************** add button function start*********************************/
   $(".table-th-bg").click(function(){
    /* alert(); */
    $(this).next().find(".selectedServicesList").toggle();
   });
</script>
<script src="resources/assets/js/common/page-height.js"></script>