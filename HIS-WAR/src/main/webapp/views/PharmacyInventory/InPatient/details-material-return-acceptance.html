<!-- Page Content -->
<div id="page-content-wrapper" class="">
	<div class="container-fluid his-style">
		<fieldset>
			<div class="row margin-top10">
				<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
					<span class="margin-left10">
						<b class="padding-right10 ">Return No.:</b>
						<label>{{vm.model.materialReturnDetail.returnNo}}</label>
					</span>
				</div>
				<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
					<span class="margin-left10">
						<b class="padding-right10 ">Return Date:</b>
						<label>{{vm.model.materialReturnDetail.returnDate | date:'dd/MM/yyyy'}}</label>
					</span>
				</div>
				<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
					<span class="margin-left10">
						<b class="padding-right10 ">From Store :</b>
						<label>{{vm.model.materialReturnDetail.fromStore}}</label>
					</span>
				</div>
				<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
					<span class="margin-left10">
						<b class="padding-right10 ">To Store:</b>
						<label>{{vm.model.materialReturnDetail.toStore}}</label>
					</span>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
					<span class="margin-left10">
						<b class="padding-right10 ">Is Consignment:</b>
						<label>{{vm.model.materialReturnDetail.isConsignment}}</label>
					</span>
				</div>
				<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
					<span class="margin-left10">
						<b class="padding-right10 ">Type :</b>
						<label>{{vm.model.materialReturnDetail.nearByExpiry}}</label>
					</span>
				</div>
			</div>
			<!--  Table start -->
			<div class="row" id="">
				<div class="col-lg-12 col-md-12 height420-table-with-scroll padding-top10 padding-left-right-set4">
					<table class="table table-bordered">
						<thead>
							<tr>
								<th class="width1 vertical-middle text-center">
									<input type="checkbox" ng-model="vm.model.selectAllRows" ng-click="vm.model.SelectAllItems()" ng-change="vm.model.valueOnChange(mreturn, true)"
									 ng-disabled="!vm.model.materialReturnDetail || vm.model.materialReturnDetail.statusId == 9 || !vm.model.materialReturnDetail.statusId == 2 || !vm.model.materialReturnDetail.approvalStatusId == 10">
								</th>
								<th class="width5">Item Code
									<div class="float_right">
										<div>
											<i class="fa fa-caret-up" aria-hidden="true"></i>
										</div>
										<div class="margin-top-8">
											<i class="fa fa-caret-down" aria-hidden="true"></i>
										</div>
									</div>
								</th>
								<th class="width5">Item Name
									<div class="float_right">
										<div>
											<i class="fa fa-caret-up" aria-hidden="true"></i>
										</div>
										<div class="margin-top-8">
											<i class="fa fa-caret-down" aria-hidden="true"></i>
										</div>
									</div>
								</th>
								<th class="width6">Generic Name
									<div class="float_right">
										<div>
											<i class="fa fa-caret-up" aria-hidden="true"></i>
										</div>
										<div class="margin-top-8">
											<i class="fa fa-caret-down" aria-hidden="true"></i>
										</div>
									</div>
								</th>
								<th class="width4">UOM
									<div class="float_right">
										<div>
											<i class="fa fa-caret-up" aria-hidden="true"></i>
										</div>
										<div class="margin-top-8">
											<i class="fa fa-caret-down" aria-hidden="true"></i>
										</div>
									</div>
								</th>
								<th class="width4">UOM Unit
									<div class="float_right">
										<div>
											<i class="fa fa-caret-up" aria-hidden="true"></i>
										</div>
										<div class="margin-top-8">
											<i class="fa fa-caret-down" aria-hidden="true"></i>
										</div>
									</div>
								</th>
								<th class="width4">Batch No.
									<div class="float_right">
										<div>
											<i class="fa fa-caret-up" aria-hidden="true"></i>
										</div>
										<div class="margin-top-8">
											<i class="fa fa-caret-down" aria-hidden="true"></i>
										</div>
									</div>
								</th>
								<th class="width5">Expiry Date
									<div class="float_right">
										<div>
											<i class="fa fa-caret-up" aria-hidden="true"></i>
										</div>
										<div class="margin-top-8">
											<i class="fa fa-caret-down" aria-hidden="true"></i>
										</div>
									</div>
								</th>
								<th class="width5"> Returned Qty
									<div class="float_right">
										<div>
											<i class="fa fa-caret-up" aria-hidden="true"></i>
										</div>
										<div class="margin-top-8">
											<i class="fa fa-caret-down" aria-hidden="true"></i>
										</div>
									</div>
								</th>
								<th class="width10">Reason for Return</th>
								<th class="width4">Accept Return Qty</th>
								<th class="width4">Reject Qty</th>
								<th class="width4">Reject</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<tr ng-repeat="mreturn in vm.model.materialReturnDetail.items">
									<td class="width1 vertical-middle text-center">
										<input type="checkbox" ng-model="mreturn.isSelected" ng-disabled="vm.model.materialReturnDetail.statusId != 2 " ng-click="vm.model.SelectItem(mreturn)"
										 ng-change="vm.model.valueOnChange(mreturn, false)" />
									</td>
									<td class="vertical-middle">{{mreturn.itemCode}}</td>
									<td class="vertical-middle">{{mreturn.itemName}}</td>
									<td class="vertical-middle">{{mreturn.genericName}}</td>
									<td class="vertical-middle">{{mreturn.uomUnit}}</td>
									<td class="vertical-middle">{{mreturn.uomType}}</td>
									<td class="vertical-middle">{{mreturn.batchNo}}</td>
									<td class="vertical-middle">{{mreturn.expiry | date:'MMM-yyyy'}}</td>
									<td class="vertical-middle">{{mreturn.returnQuantity}}</td>
									<td class="vertical-middle">{{mreturn.returnReason}}</td>
									<td class="vertical-middle">
										<div class="row approved-qty-remark">
											<input type="text" class="w-100" ng-model="mreturn.acceptedQuantity" ng-blur="vm.model.ApprovedQuantity(mreturn)" ng-if="!mreturn.isDisabled"
											 numbers-only>
											<div ng-if="mreturn.isDisabled">{{!!mreturn.acceptedQuantity ? mreturn.acceptedQuantity : 0 }}</div>
										</div>
									</td>
									<td class="vertical-middle">{{mreturn.rejectedQuantity}}</td>
									<td class=" vertical-middle">
										<div class="checkbox">
											<label class="switch switch-small">
												<input type="checkbox" class="switchInput" ng-disabled="mreturn.isDisabled" ng-click="vm.model.RejectionPopup(mreturn)" ng-model="mreturn.isReject">
												<div class="slider round slider-small"></div>
											</label>
										</div>
									</td>
								</tr>
						</tbody>
					</table>
				</div>
			</div>
		</fieldset>

		<footer class="col-lg-12 col-md-12 col-sm-12 padding-left-right-set4 padding-right20">
			<div class="row his-style margin-top10 padding-right20">
				<div class="col-md-1 text-right">
					<label>Remark:</label>
				</div>
				<div class="col-md-9 padding-left-right8">
					<textarea row="1" class="form-control"></textarea>
				</div>
				<div class="col-lg-1 col-md-1 padding-left-right-set4">
					<input type="button" value="Save" ng-click="vm.model.SaveApproval()" class="btn btn-primary btn-save-box-shadow">
				</div>
				<div class="col-lg-1 col-md-1 padding-left-right-set4">
					<a href="#/materialReturnAcceptance">
						<input type="button" value="Back" class="btn btn-primary btn-save-box-shadow">
					</a>
				</div>
			</div>
		</footer>
	</div>
</div>
<div id="qtyaccepatReject" class="modal fade ng-scope in common-small-popup" role="dialog" style="z-index:1300 !important;background: rgba(0, 0, 0, 0.33);">
		<div class="modal-dialog">
			<!-- width: 25% !important;margin: 200px 0 0 510px !important; -->
			<div class="modal-content">
				<div class="modal-header">
					<div class="modal-title patient-details-row">
						Rejection
						<button type="button" ng-click="vm.model.ModalDismiss('qtyaccepatReject')" class="close">&times;</button>
					</div>
				</div>
				<div class="modal-body">
					<div class="row">
						<div class="col-md-12 padding-left-right-set">
							<div class="row input-container margin-top10">
								<div class="col-lg-6 col-md-6 col-sm-12">
									<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
										<i class="fa fa-dot-circle-o" aria-hidden="true"></i>
									</div>
									<div class="col-lg-11 col-sm-11 col-md-11">
										<div class="">
											<input type="rejectQty" name="rejectQty" ng-model="vm.model.rejectQty" class="text-input floating-label" ng-class="{dirty: vm.model.rejectQty}"
											 numbers-only>
											<label for="rejectQty">Qty</label>
										</div>
									</div>
								</div>
								<div class="col-lg-6 col-md-6 col-sm-6">
									<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
										<i class="fa fa-sticky-note-o" aria-hidden="true"></i>
									</div>
									<div class="col-lg-11 col-sm-11 col-md-11 ">
										<div class="">
											<select name="rejectReason" id="rejectReason" class="text-input floating-label" ng-model="vm.model.rejectReason">
												<option value="">Select Reason</option>
												<option ng-repeat="datum in vm.model.reasons" value="{{datum.id}}">{{datum.reason}}</option>
											</select>
											<label for="rejectReason">Select Reason</label>
										</div>
									</div>
								</div>
							</div>
							<div class="row input-container margin-top10">
								<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
									<i class="fa fa-sticky-note" aria-hidden="true"></i>
								</div>
								<div class="col-lg-11 col-sm-11 col-md-11 ">
									<div class="">
										<textarea name="rejectNote" rows="4" id="rejectNote" class="text-input floating-label ng-pristine ng-untouched ng-valid ng-empty"
										 ng-model="vm.model.rejectNote" ng-class="{dirty: vm.model.rejectNote}"></textarea>
										<label for="rejectNote">Note</label>
									</div>
								</div>
							</div>
							<!-- <input type="text" id="commonId" /> -->
						</div>
					</div>
				</div>
				<div class="modal-footer" style="border:none;">
					<button type="button" ng-disabled="!vm.model.rejectQty" class="btn btn-primary" ng-click="vm.model.SaveAcceptReject()">Save</button>
				</div>
			</div>
		</div>
	</div>
<div ng-include="'./views/common/qty-accept-reject.html'"></div>
<div ng-include="'./views/common/note-save.html'"></div>