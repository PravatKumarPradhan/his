<!-- Page Content -->
<div id="page-content-wrapper" class="">
	<div class="container-fluid his-style">
		<div class="row margin-top10 padding-left-right-set4 padding-left5">
			<div class="col-lg-2 col-md-1 col-sm-2 padding-left-right-set4 width7">
				<label for="isMainStoreCheckbox" style="font-size: 12px; color:black;">Main Store </label>
				<label class="switch switch-small">
					<input type="checkbox" class="switchInput"  ng-model="vm.model.isMainStore" name="isMainStoreCheckbox"
					 ng-change="vm.model.IsMainStore(vm.model.isMainStore)">
					<div class="slider round slider-small"></div>
				</label>
			</div>
			<div class="col-lg-2 col-md-2 col-sm-2 padding-left-right-set4 padding-top10">
				<div class="row input-container">
					<div class="col-lg-2 col-md-2 col-sm-2 polymer-icon">
						<i class="fa fa-tasks" aria-hidden="true"></i>
					</div>
					<div class="col-lg-10 col-sm-10 col-md-10">
						<div class="">
							<select name="fromStore" id="fromStore"  class="text-input floating-label dirty" ng-change="vm.model.searchStoreIndentData=[]"
							 ng-model="vm.model.fromStore" data-ng-options="fromStore.store for fromStore in vm.model.fromStores"> </select>
							<label for="code">From Store</label>
						</div>
					</div>
				</div>
			</div>
			<div class="col-lg-2 col-md-2 col-sm-2 padding-left-right-set4 padding-top10">
				<div class="row input-container">
					<div class="col-lg-2 col-md-2 col-sm-2 polymer-icon">
						<i class="fa fa-tasks" aria-hidden="true"></i>
					</div>
					<div class="col-lg-10 col-sm-10 col-md-10">
						<div class="">
							<select name="toStore" id="toStore" ng-disabled="!!vm.model.indentId" class="text-input floating-label dirty" ng-change="vm.model.searchStoreIndentData=[]"
							 ng-model="vm.model.toStore" data-ng-options="toStore.store for toStore in vm.model.toStores"> </select>

							<label for="code">To Store</label>
						</div>
					</div>
				</div>
			</div>
			<div class="col-lg-3 col-md-4 col-sm-4 padding-left-right-set padding-top10">
				<div class="col-lg-6 col-md-6 col-sm-6" style="margin-top: -6px !important;">
					<label for="isConsignmentCheckbox" style="font-size: 12px; color:black;">Is Consignment</label>
					<label class="switch switch-small">
						<input type="checkbox" ng-disabled="!!vm.model.indentId" class="switchInput" ng-model="vm.model.isConsignment" name="isConsignmentCheckbox"
						 ng-change="vm.model.isConsignmentStatus()">
						<div class="slider round slider-small"></div>
					</label>
				</div>
				<div class="col-md-6 padding-left-right-set1 padding-top10">
					<!-- <label class="cursor-pointer radio-inline padding-top10">
					<input type="radio" name="optradio" class="radioAcceptedHold4" data-toggle="modal" data-target="#addNewItemWasteStore"
					 checked="">Get Item</label> -->

					<button type="button" ng-disabled="vm.model.fromStore.id != '' && !vm.model.toStore.id != ''" data-dismiss="modal" class="btn btn-primary"
					 style="margin-top: -9px;" id="" ng-click="vm.model.GetItemList();">Add Item</button>

				</div>
			</div>
			<!--  <div class="col-lg-2 col-md-1 padding-left-right-set4 text-width-auto padding-top10">
        <div class="checkbox">
          <label class="common-lable-color-set">
          <input type="checkbox" class="getRequestListBtnClass" data-target="#addNewItemWasteStore" data-toggle="modal">Get Item List</label>
        </div>
      </div> -->
			<div class="col-lg-2 col-md-2 col-sm-3 padding-left-right-set0 float_right">
				<input type="text" class="text-search-box" ng-model="search" placeholder="Search" style="margin-top: 0px">
				<i class="fa fa-search common-search-text-icon" aria-hidden="true"></i>
			</div>
		</div>
		<div class="row padding-left-right-set4 padding-top10">
			<div class="pull-right padding-left-right-set4">
				<a>
					<i class="fa fa-life-ring" title="Smart Issue"></i>
				</a>
			</div>
			<div class="table-container padding-left-right-set4 padding-top5">
				<div class="table-container-header">
					<table class="table table-striped table-hover table-condensed table-bordered">
						<tbody>
							<tr class="table-th-bg cursor-pointer">
								<th class="width2 text-center vertical-middle">
									<a class="cursor-pointer">
										<i class="fa fa-plus-circle"></i>
									</a>
								</th>
								<th class="width6 vertical-middle">Item Code
									<div class="float_right"  ng-click="sortType = 'itemCode'; sortReverse = !sortReverse">
										<div>
											<i class="fa fa-caret-up" aria-hidden="true"></i>
										</div>
										<div class="margin-top-8">
											<i class="fa fa-caret-down" aria-hidden="true"></i>
										</div>
									</div>
								</th>
								<th class="width8 vertical-middle">Item Name
									<div class="float_right"  ng-click="sortType = 'itemName'; sortReverse = !sortReverse">
										<div>
											<i class="fa fa-caret-up" aria-hidden="true"></i>
										</div>
										<div class="margin-top-8">
											<i class="fa fa-caret-down" aria-hidden="true"></i>
										</div>
									</div>
								</th>
								<th class="width8 vertical-middle">Generic Name
									<div class="float_right"  ng-click="sortType = 'genericName'; sortReverse = !sortReverse">
										<div>
											<i class="fa fa-caret-up" aria-hidden="true"></i>
										</div>
										<div class="margin-top-8">
											<i class="fa fa-caret-down" aria-hidden="true"></i>
										</div>
									</div>
								</th>
								<th class="width6 vertical-middle">UOM
									<div class="float_right"  ng-click="sortType = 'uomType'; sortReverse = !sortReverse">
										<div>
											<i class="fa fa-caret-up" aria-hidden="true"></i>
										</div>
										<div class="margin-top-8">
											<i class="fa fa-caret-down" aria-hidden="true"></i>
										</div>
									</div>
								</th>
								<th class="width8 vertical-middle">UOM Unit
									<div class="float_right"  ng-click="sortType = 'uomUnit'; sortReverse = !sortReverse">
										<div>
											<i class="fa fa-caret-up" aria-hidden="true"></i>
										</div>
										<div class="margin-top-8">
											<i class="fa fa-caret-down" aria-hidden="true"></i>
										</div>
									</div>
								</th>
								<th class="width8 vertical-middle">Stock Available
									<div class="float_right" ng-click="sortType = 'stockAvailable'; sortReverse = !sortReverse">
										<div>
											<i class="fa fa-caret-up" aria-hidden="true"></i>
										</div>
										<div class="margin-top-8">
											<i class="fa fa-caret-down" aria-hidden="true"></i>
										</div>
									</div>
								</th>
								<th class="width6 vertical-middle">Issue Qty
									<div class="float_right"  ng-click="sortType = 'issueQuantity'; sortReverse = !sortReverse">
										<div>
											<i class="fa fa-caret-up" aria-hidden="true"></i>
										</div>
										<div clss="margin-top-8">
											<i class="fa fa-caret-down" aria-hidden="true"></i>
										</div>
									</div>
								</th>
								<th class="width6 vertical-middle">Action
									<div class="float_right" >
										<div>
											<i class="fa fa-caret-up" aria-hidden="true"></i>
										</div>
										<div clss="margin-top-8">
											<i class="fa fa-caret-down" aria-hidden="true"></i>
										</div>
									</div>
								</th>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="table-container-body" style="height: 330px; overflow-y: scroll;">
					<table class="table table-striped table-hover table-condensed table-bordered">
						<tbody ng-repeat="item in vm.model.ItemDetailList | filter: search | orderBy:sortType:sortReverse">
							<tr class="table-th-bg cursor-pointer">
								<td class="width2 text-center vertical-middle">
									<a class="cursor-pointer" ng-click="vm.model.activeItem = 
										(vm.model.activeItem == item.itemId ? '' : item.itemId)">
										<i class="fa fa-{{vm.model.activeItem == item.itemId ? 'minus' : 'plus'}}-circle"></i>
									</a>
								</td>
								<td class="width6">{{item.itemCode}}</td>
								<td class="width8">{{item.itemName}}</td>
								<td class="width8">{{item.genericName}}</td>
								<td class="width6">{{item.uomType}}</td>
								<td class="width8">{{item.uomUnit}}</td> 
								<td class="width8">{{item.stockAvailable}}</td>
								<td class="width6">{{ item.issueQuantity = (item.batchList | sumByColumn: 'issueQuantity') | number}}</td> 
								<td class="vertical-middle text-center"   style=" width: 5.79% !important;" >
									<a ng-click="vm.model.removeRowData(index)">
										<i class="fa fa-times"></i>
									</a>
								</td>
							</tr>
							<tr ng-show="vm.model.activeItem == item.itemId">
								<td colspan="9">
									<div class="selectedServicesList">

										<div class="table-container padding-left-right-set4 padding-top5">
											<div class="table-container-header">
												<table class="table table-striped table-hover table-condensed table-bordered">
													<tbody>
														<tr>
															<th class="width8">Batch No.
																<div class="float_right">
																	<div>
																		<i class="fa fa-caret-up" aria-hidden="true"></i>
																	</div>
																	<div class="margin-top-8">
																		<i class="fa fa-caret-down" aria-hidden="true"></i>
																	</div>
																</div>
															</th>
															<th class="width8">Expiry Date
																<div class="float_right">
																	<div>
																		<i class="fa fa-caret-up" aria-hidden="true"></i>
																	</div>
																	<div class="margin-top-8">
																		<i class="fa fa-caret-down" aria-hidden="true"></i>
																	</div>
																</div>
															</th>
															<th class="width5">UOM
																<div class="float_right">
																	<div>
																		<i class="fa fa-caret-up" aria-hidden="true"></i>
																	</div>
																	<div class="margin-top-8">
																		<i class="fa fa-caret-down" aria-hidden="true"></i>
																	</div>
																</div>
															</th>
															<th class="width6">UOM Unit
																<div class="float_right">
																	<div>
																		<i class="fa fa-caret-up" aria-hidden="true"></i>
																	</div>
																	<div class="margin-top-8">
																		<i class="fa fa-caret-down" aria-hidden="true"></i>
																	</div>
																</div>
															</th>
															<th class="width8">Available Stock Qty
																<div class="float_right">
																	<div>
																		<i class="fa fa-caret-up" aria-hidden="true"></i>
																	</div>
																	<div class="margin-top-8">
																		<i class="fa fa-caret-down" aria-hidden="true"></i>
																	</div>
																</div>
															</th>
															<th class="width4">Issue Qty
																<div class="float_right">
																	<div>
																		<i class="fa fa-caret-up" aria-hidden="true"></i>
																	</div>
																	<div class="margin-top-8">
																		<i class="fa fa-caret-down" aria-hidden="true"></i>
																	</div>
																</div>
															</th>
															<!-- <th class="width4">Picker Qty
																	<div class="float_right">
																		<div>
																			<i class="fa fa-caret-up" aria-hidden="true"></i>
																		</div>
																		<div class="margin-top-8">
																			<i class="fa fa-caret-down" aria-hidden="true"></i>
																		</div>
																	</div>
																</th> -->
															<th class="width3">Action
																<div class="float_right">
																	<div>
																		<i class="fa fa-caret-up" aria-hidden="true"></i>
																	</div>
																	<div class="margin-top-8">
																		<i class="fa fa-caret-down" aria-hidden="true"></i>
																	</div>
																</div>
															</th>
														</tr>
													</tbody>
												</table>
											</div>
											<div class="table-container-body" style="max-height: 112px;overflow-y: scroll;height: auto;">
												<table class="table table-striped table-hover table-condensed table-bordered">
													<tbody>
														<tr ng-repeat="batch in item.batchList">
															<td class="width8">
																<select ng-model="batch.selectedBatch" data-ng-options="batchDropdown.batchNo for batchDropdown in item.batch" ng-change="vm.model.batchOnChange(batch.selectedBatch, batch)">
																	<option value="">Select Batch</option>
																</select>
															</td>
															<td class="width8">{{batch.selectedBatch.expiry | date:'MMM-yyyy'}}</td>
															<td class="width5">
																<!-- <select ng-model="batch.selectedUom" class="w-100" data-ng-options="uom.uomType for uom in batch.uomList" ng-change="vm.model.uomOnChange(batch.selectedUom, batch)">
																	<option value="">Select UOM</option>
																</select> -->
																{{batch.uomType}}
															</td>
															<td class="width6">{{batch.uomUnit}}</td>
															<td class="width8">{{batch.displayQuantity}}</td>
															<td class="width4">
																<input type="text" ng-disabled="vm.model.statusId == 17" ng-model="batch.issueQuantity" class="w-100">
															</td>
															<!-- <td class="width4">{{batch.pickerQuantity}}</td> -->
															<td style="width: 2.86% !important;">
																<input type="button" name="" id="" value="+" ng-click="vm.model.AddDuplicateRow(item)" class="btn btn-info add-dynamic-row addbtn">
																<!-- onclick="addDetailsRow()" -->
																<!-- onclick="delRow(this)" -->
																<input type="button" name="" id="" value="-" ng-click="vm.model.RemoveRowData(item)" class="btn btn-info addbtn">

															</td>
														</tr>
													</tbody>
												</table>
											</div>
										</div>

									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
	<footer class="col-lg-12 col-md-12 col-sm-12 padding-left-right-set4 padding-right20">
		<div class="row his-style padding-right20">
				<div class="col-lg-2 col-md-2 col-sm-2 padding-left-right-set4">
						<div class="row input-container">
							<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
								<i class="fa fa-caret-square-o-right " aria-hidden="true"></i>
							</div>
							<div class="col-lg-11 col-sm-11 col-md-11">
								<div class="">
										<select name="carrier" id="carrier"  class="text-input floating-label dirty" ng-change="vm.model.searchStoreIndentData=[]"
							 ng-model="vm.model.carrier" data-ng-options="carrier.name for carrier in vm.model.carriers"> </select>
									<label for="code">Carrier</label>
								</div>
							</div>
						</div>
					</div>
			<div class="col-md-1 text-right">
				<label>Remark:</label>
			</div>
			<div class="col-md-7 padding-left-right8">
				<textarea row="1" class="form-control" ng-model="vm.model.remark" ></textarea>
			</div>
			<div class="col-md-1 padding-left0px-right6px">
				<div class="">
					<!-- common-save-button -->
					<input type="button" value="Save"  ng-disabled="!vm.model.carrier.id > 0" ng-click="vm.model.saveIssue()" class="btn btn-primary btn-save-box-shadow">
				</div>
			</div>
			<div class="col-md-1 padding-left0px-right6px">
				<div class="">
					<a href="#/materialIssue/issueList">
						<input type="button" value="Back" class="btn btn-primary btn-save-box-shadow">
					</a>
				</div>
			</div>
		</div>
	</footer>
</div>
</div>

<!-- ******************* Accessories Details Modal end *******1234567890************ -->
<!-- <div ng-include="'./views/PharmacyInventory/Store/get-item-list.html'"></div> -->
<div id="addNewItemWasteStore" class="modal fade ng-scope in common-large-popup" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<div class="modal-title patient-details-row">
					Add Item List
					<button type="button" ng-click="" class="close" data-dismiss="modal">&times;</button>
				</div>
			</div>
			<div class="modal-body height-table-with-scroll	">
				<fieldset>
					<div class="row">
						<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
							<div class="row input-container">
								<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
									<i class="fa fa-tasks" aria-hidden="true"></i>
								</div>
								<div class="col-lg-11 col-sm-11 col-md-11">
									<div class="">
										<!-- <select name="id" class="text-input floating-label" ng-change="vm.model.GetProductCategoryList(vm.model.id);" ng-model="vm.model.id"
							ng-class="{dirty: vm.model.id}" required>
							<option></option>
							<option ng-repeat="assetType in vm.model.assetCategoryList" value="{{assetType.id}}">{{assetType.category}}</option>
						  </select> -->

										<select name="assetCategory" id="assetCategory" class="text-input floating-label dirty" data-ng-options="category.category for category in vm.model.assetCategories"
										 ng-model="vm.model.assetCategory" ng-change="vm.model.GetProductCategoryList(vm.model.assetCategory.id)">
										</select>

										<label for="code">Asset Category</label>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
							<div class="row input-container">
								<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
									<i class="fa fa-tasks" aria-hidden="true"></i>
								</div>
								<div class="col-lg-11 col-sm-11 col-md-11">
									<div class="">
										<!-- <select class="text-input floating-label" ng-model="vm.model.productCategoryId" ng-class="{dirty: vm.model.id}">
							<option ng-repeat="datum in vm.model.productCategoryList" value="{{datum.id}}">{{datum.category}} </option>
						  </select> -->

										<select name="productCategory" id="productCategory" class="text-input floating-label dirty" data-ng-options="category.category for category in vm.model.productCategories"
										 ng-model="vm.model.productCategory">
										</select>

										<label for="code">Product Category</label>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-2 col-md-2 col-sm-2 padding-left-right-set4 padding-top10">
							<div class="row input-container">
								<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
									<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
								</div>
								<div class="col-lg-11 col-sm-11 col-md-11 ">
									<div class="">
										<input type="text" name="description" id="" class="text-input floating-label" ng-model="search.itemCode">
										<label for="description" class="LISDynamicLabel">Item Code</label>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
							<div class="row input-container">
								<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
									<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
								</div>
								<div class="col-lg-11 col-sm-11 col-md-11 ">
									<div class="">
										<input type="text" name="description" id="" class="text-input floating-label" ng-model="search.itemName">
										<label for="description" class="LISDynamicLabel">Item Name</label>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-1 col-md-1 col-sm-1 padding-left-right-set4 his-style">
							<div class="common-save-button">
								<a href="" class="btn btn-primary btn-save-box-shadow" style="width: auto;" ng-click="vm.model.searchNewItem()">
									<i class="fa fa-search" aria-hidden="true"></i>
								</a>
							</div>
						</div>
					</div>
					<div class="row common-popup-height-350">
						<div class="col-lg-12 col-md-12 padding-top10 padding-left-right-set4">
							<table class="table table-bordered">
								<thead>
									<tr>
										<th class="width1 text-center media-middle ">
											<input type="checkbox" ng-model="vm.model.selectAllRows" ng-click="vm.model.SelectAllItems()" />
										</th>
										<th class="width10">Asset Category
											<div class="float_right">
												<div>
													<i class="fa fa-caret-up" aria-hidden="true"></i>
												</div>
												<div class="margin-top-8">
													<i class="fa fa-caret-down" aria-hidden="true"></i>
												</div>
											</div>
										</th>
										<th class="width10">Product Category
											<div class="float_right">
												<div>
													<i class="fa fa-caret-up" aria-hidden="true"></i>
												</div>
												<div class="margin-top-8">
													<i class="fa fa-caret-down" aria-hidden="true"></i>
												</div>
											</div>
										</th>
										<th class="width10">Item Code
											<div class="float_right">
												<div>
													<i class="fa fa-caret-up" aria-hidden="true"></i>
												</div>
												<div class="margin-top-8">
													<i class="fa fa-caret-down" aria-hidden="true"></i>
												</div>
											</div>
										</th>
										<th class="width10">Item Name
											<div class="float_right">
												<div>
													<i class="fa fa-caret-up" aria-hidden="true"></i>
												</div>
												<div class="margin-top-8">
													<i class="fa fa-caret-down" aria-hidden="true"></i>
												</div>
											</div>
										</th>
									</tr>
								</thead>
								<tbody>
									<tr ng-repeat="item in vm.model.searchNewItemList | filter : search ">
										<td class="text-center">
											<input type="checkbox" ng-model="item.isSelected" ng-click="vm.model.SelectItem(item)" />
										</td>
										<!-- ng-change="vm.model.CheckBoxVal(result)" ng-true-value="1" ng-false-value="0" -->
										<td>{{item.assetCategory}}</td>
										<td>{{item.productCategory}}</td>
										<td>{{item.itemCode}}</td>
										<td>{{item.itemName}}</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</fieldset>
			</div>
			<div class="modal-footer">
				<div class="row his-style">
					<div class="col-md-11"></div>
					<div class="col-md-1 padding-left0px-right6px">
						<div class="common-save-button">
							<input type="button" value="Add"ng-disabled="!vm.model.isItemChecked" class="btn btn-primary btn-save-box-shadow" ng-click="vm.model.AddItems()" data-dismiss="modal">
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>


<script type="text/javascript">
	$(".selectedPageName").text("Direct Issue");
	$(".sidebar-nav li").each(function () {
		$(this).find("a").parents("li").removeClass("active");
	});
	$('a[href$="materialIssue"]').parents("li").addClass("active");

	$(".indent-details").click(function () {
		$(this).next().find(".selectedServicesList").toggle();
	});
	$(".table-th-bg").click(function () {
		$(this).next().find(".selectedServicesList").toggle();
	});
	$(".getRequestListBtnClass").change(function () {
		if ($(this).is(":checked")) {
			$("#getRequestWasteStore").modal();
		}
	}); 
</script>
<script src="resources/assets/js/common/page-height.js"></script>