<!-- /********************************************************************************************************************************************
Procurement - quotation - quotation Enquiry main page
Created by - Pranita Patil
Created Date - 05-Oct-2017 
/********************************************************************************************************************************************/ -->
<!-- Page Content -->
<div id="page-content-wrapper" class="">
  <div class="container-fluid his-style">
    <fieldset class="main-fieldset">
      <!-- <legend class="heading-div">Store Indent</legend> -->
      <div class="row margin-top10 padding-left-right-set4">
        <div class="col-lg-1 col-md-1 col-sm-1 padding-left-right-set4 padding-top10">
          <div class="row input-container">
            <div class="col-lg-2 col-sm-2 col-md-2 polymer-icon">
              <i class="fa fa-calendar-plus-o" aria-hidden="true"></i>
            </div>
            <div class="col-lg-10 col-sm-10 col-md-10">
              <div class="">
                <!-- <input type="text" name="code" id="" class="text-input floating-label" ng-model="vm.model.fromDate" ng-class="{dirty: vm.model.fromDate}"> -->
                <input type="text" class="text-input floating-label dirty" name="fromDate" id="fromDate" uib-datepicker-popup="dd/MM/yyyy"
                  placeholder="DD/MM/YYYY" ng-model="vm.model.fromDate" model-view-value="true" is-open="vm.model.fromDateOpened"
                  datepicker-options="vm.model.fromDateOptions" show-button-bar="false" ng-click="vm.model.OpenFromDate()">
                <label for="code">From Date</label>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-1 col-md-1 col-sm-1 padding-left-right-set4 padding-top10">
          <div class="row input-container">
            <div class="col-lg-2 col-sm-2 col-md-2 polymer-icon ">
              <i class="fa fa-calendar-minus-o" aria-hidden="true"></i>
            </div>
            <div class="col-lg-10 col-sm-10 col-md-10">
              <div class="">
                <!-- <input type="text" name="code" id="" class="text-input floating-label" ng-model="vm.model.toDate" ng-class="{dirty: vm.model.toDate}"> -->
                <input type="text" class="text-input floating-label dirty" name="toDate" id="toDate" uib-datepicker-popup="dd/MM/yyyy" placeholder="DD/MM/YYYY"
                  ng-model="vm.model.toDate" model-view-value="true" is-open="vm.model.toDateOpened" datepicker-options="vm.model.toDateOptions"
                  show-button-bar="false" ng-click="vm.model.OpenToDate()">
                <label for="description" class="LISDynamicLabel">To Date</label>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-2 col-md-2 col-sm-2 padding-left-right-set4 padding-top10">
          <div class="row input-container">
            <div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
              <i class="fa fa-tasks" aria-hidden="true"></i>
            </div>
            <div class="col-lg-11 col-sm-11 col-md-11">
              <div class="">
                <!-- <select class="text-input floating-label" ng-class="{dirty : vm.model.id }" ng-model="vm.model.id" data-ng-options="id.store for id in vm.model.storeList.fromStore"> -->
                <!-- <option ng-repeat="datum in vm.model.storeList.toStore" value="{{datum.id}}">{{datum.name}} </option> -->
                <!-- </select> -->
                <select name="fromStore" id="fromStore" class="text-input floating-label dirty"  ng-model="vm.model.fromStore" data-ng-options="fromStore.store for fromStore in vm.model.fromStores">
                </select>

                <label for="code">From Store</label>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-2 col-md-2 col-sm-2 padding-left-right-set4 padding-top10">
          <div class="row input-container">
            <div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
              <i class="fa fa-tasks" aria-hidden="true"></i>
            </div>
            <div class="col-lg-11 col-sm-11 col-md-11">
              <div class="">
                <!-- <select class="text-input floating-label" ng-class="{dirty : vm.model.id }" ng-model="vm.model.id" data-ng-options="id.store for id in vm.model.storeList.toStore"> -->
                <!-- <option ng-repeat="datum in vm.model.storeList.toStore" value="{{datum.id}}">{{datum.name}} </option> -->
                <!-- </select> -->

                <select name="toStore" id="toStore" class="text-input floating-label dirty" ng-model="vm.model.toStore" data-ng-options="toStore.store for toStore in vm.model.toStores">
                </select>

                <label for="code">To Store</label>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-2 col-md-2 col-sm-2 padding-left-right-set4 padding-top10">
          <div class="row input-container">
            <div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
              <i class="fa fa-bullseye" aria-hidden="true"></i>
            </div>
            <div class="col-lg-11 col-sm-11 col-md-11">
              <div class="">
                <input type="text" name="code" id="" class="text-input floating-label" ng-model="vm.model.indentNumber" ng-class="{dirty: vm.model.storeIndentType}">
                <label for="code" class="LISDynamicLabel">Indent No.</label>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-2 col-md-2 col-sm-1 padding-left-right-set4 padding-top10">
          <div class="row input-container">
            <div class="col-lg-2 col-sm-2 col-md-2 polymer-icon ">
              <i class="fa fa-dot-circle-o" aria-hidden="true"></i>
            </div>
            <div class="col-lg-10 col-sm-10 col-md-10">
              <div class="">
                <!-- <select class="text-input floating-label" ng-model="vm.model.status" ng-class="{dirty : vm.model.id }" ng-model="vm.model.id"
                  data-ng-options="id.status for id in vm.model.storeList.status"> -->
                <!-- <option ng-repeat="datum in vm.model.storeList.status" value="{{datum.id}}">{{datum.status}} </option> -->
                <!-- </select> -->

                <select name="status" id="status" class="text-input floating-label dirty" ng-model="vm.model.status" data-ng-options="status.status for status in vm.model.statuses">
                </select>


                <label for="description" class="LISDynamicLabel">Status</label>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-2 col-md-2 col-sm-2 padding-left-right-set4 padding-top10">
          <div class="row input-container">
            <div class="col-lg-2 col-sm-2 col-md-2 polymer-icon ">
              <i class="fa fa-dot-circle-o" aria-hidden="true"></i>
            </div>
            <div class="col-lg-8 col-sm-8 col-md-8 padding-left-right-set4">
              <div class="">
                <!-- <select class="text-input floating-label" ng-model="vm.model.type" ng-class="{dirty: vm.model.type}" ng-model="vm.model.id"
                  data-ng-options="id.type for id in vm.model.storeList.indentType">
                  <option ng-repeat="datum in vm.model.storeList.indentTypes" value="{{datum.id}}">{{datum.type}} </option> -->
                <!-- </select> -->

                <select name="indentType" id="indentType" class="text-input floating-label dirty" ng-model="vm.model.indentType" data-ng-options="indentType.type for indentType in vm.model.indentTypes">
                </select>


                <label for="description" class="LISDynamicLabel">Type</label>
              </div>
            </div>
            <div class="col-lg-2 col-sm-2 col-md-2 ">
              <div class="common-save-button" style="padding-top:  0px;">
                <a href="" ng-click="vm.model.StoreIndentData()" class="btn btn-primary btn-save-box-shadow" style="width: auto;">
                  <i class="fa fa-search" aria-hidden="true"></i>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </fieldset>

    <div class="row margin-top4">
      <div class="col-lg-1 col-md-1 col-sm-2 padding-left-right-set4 float_right text-width-auto">
        <div class=" ">
          <a href="" class="btn btn-primary btn-save-box-shadow" ng-class="{disabled: !vm.model.isItemChecked }" title="Save" ng-click="vm.model.ValidateAndUpdate('Update','confirmLogout1', {})">
            <i class="fa fa-floppy-o" style="font-size: 21px" aria-hidden="true"></i>
          </a>
        </div>
      </div>
      <div class="col-md-2 col-sm-2 padding-left-right-set4 float_right text-width-auto">
        <div class=" ">
          <a href="#/addNewStoreIndenting">
            <input type="button" value="Add New" class="btn btn-primary btn-save-box-shadow">
          </a>
        </div>
      </div>
    </div>

    <div class="row ">
      <div class="padding-left-right-set4 margin-top4" id="nonBillableTableHt">
        <fieldset class="">
          <div class="row">
            <div class="container-fluid his-style">
              <div class="table-container padding-left-right-set4 padding-top5">
                <div class="table-container-header">
                  <table class="table table-striped table-hover table-condensed table-bordered">
                    <thead class="mainServiceTableCommon">
                      <tr>
                        <th class="width2 text-center">
                          <!-- <input type="checkbox" ng-click="vm.model.SelectedAll()"    ng-model="vm.model.selectAllRows"> -->
                          <input type="checkbox" ng-click="vm.model.SelectAllRequests()" ng-model="vm.model.selectAllRows"  ng-disabled="vm.model.searchStoreIndentData == false"
                          />
                        </th>
                        <th class="width7">
                          Indent Date
                          <div class="float_right" ng-click="sortType = 'indentDate'; sortReverse = !sortReverse">
                            <div>
                              <i class="fa fa-caret-up" aria-hidden="true"></i>
                            </div>
                            <div class="margin-top-8">
                              <i class="fa fa-caret-down" aria-hidden="true"></i>
                            </div>
                          </div>
                        </th>
                        <th class="width6">
                          Indent No.
                          <div class="float_right" ng-click="sortType = 'indentNo'; sortReverse = !sortReverse">
                            <div>
                              <i class="fa fa-caret-up" aria-hidden="true"></i>
                            </div>
                            <div class="margin-top-8">
                              <i class="fa fa-caret-down" aria-hidden="true"></i>
                            </div>
                          </div>
                        </th>

                        <th class="width8">
                          From Store
                          <div class="float_right" ng-click="sortType = 'fromStore'; sortReverse = !sortReverse">
                            <div>
                              <i class="fa fa-caret-up" aria-hidden="true"></i>
                            </div>
                            <div class="margin-top-8">
                              <i class="fa fa-caret-down" aria-hidden="true"></i>
                            </div>
                          </div>
                        </th>
                        <th class="width8">
                          To Store
                          <div class="float_right" ng-click="sortType = 'toStore'; sortReverse = !sortReverse">
                            <div>
                              <i class="fa fa-caret-up" aria-hidden="true"></i>
                            </div>
                            <div class="margin-top-8">
                              <i class="fa fa-caret-down" aria-hidden="true"></i>
                            </div>
                          </div>
                        </th>
                        <th class="width5">
                          Priority
                          <div class="float_right" ng-click="sortType = 'priority'; sortReverse = !sortReverse">
                            <div>
                              <i class="fa fa-caret-up" aria-hidden="true"></i>
                            </div>
                            <div class="margin-top-8">
                              <i class="fa fa-caret-down" aria-hidden="true"></i>
                            </div>
                          </div>
                        </th>
                        <th class="width5">
                          Type
                          <div class="float_right" ng-click="sortType = 'type'; sortReverse = !sortReverse">
                            <div>
                              <i class="fa fa-caret-up" aria-hidden="true"></i>
                            </div>
                            <div class="margin-top-8">
                              <i class="fa fa-caret-down" aria-hidden="true"></i>
                            </div>
                          </div>
                        </th>
                        <th class="width8">
                          Is Consignment
                          <div class="float_right" ng-click="sortType = 'isConsignment'; sortReverse = !sortReverse">
                            <div>
                              <i class="fa fa-caret-up" aria-hidden="true"></i>
                            </div>
                            <div class="margin-top-8">
                              <i class="fa fa-caret-down" aria-hidden="true"></i>
                            </div>
                          </div>
                        </th>
                        <th class="width7">
                          Requested By
                          <div class="float_right" ng-click="sortType = 'requestedBy'; sortReverse = !sortReverse">
                            <div>
                              <i class="fa fa-caret-up" aria-hidden="true"></i>
                            </div>
                            <div class="margin-top-8">
                              <i class="fa fa-caret-down" aria-hidden="true"></i>
                            </div>
                          </div>
                        </th>
                        <th class="width5">
                          Remark
                          <div class="float_right" ng-click="sortType = 'remark'; sortReverse = !sortReverse">
                            <div>
                              <i class="fa fa-caret-up" aria-hidden="true"></i>
                            </div>
                            <div class="margin-top-8">
                              <i class="fa fa-caret-down" aria-hidden="true"></i>
                            </div>
                          </div>
                        </th>
                        <th class="width6">
                          Status
                          <div class="float_right" ng-click="sortType = 'status'; sortReverse = !sortReverse">
                            <div>
                              <i class="fa fa-caret-up" aria-hidden="true"></i>
                            </div>
                            <div class="margin-top-8">
                              <i class="fa fa-caret-down" aria-hidden="true"></i>
                            </div>
                          </div>
                        </th>
                        <th class="width8">
                          Approval Status
                          <div class="float_right" ng-click="sortType = 'approvalStatus'; sortReverse = !sortReverse">
                            <div>
                              <i class="fa fa-caret-up" aria-hidden="true"></i>
                            </div>
                            <div class="margin-top-8">
                              <i class="fa fa-caret-down" aria-hidden="true"></i>
                            </div>
                          </div>
                        </th>
                        <th class="width7 text-center">
                          Action
                        </th>
                      </tr>
                    </thead>
                  </table>
                </div>
                <div class="table-container-body" style="height:400px; overflow-y: scroll;">
                  <table class="table table-striped table-hover table-condensed table-bordered">
                    <tbody>
                      <tr ng-repeat="datum in vm.model.searchStoreIndentData | orderBy:sortType:sortReverse">
                        <td class="width2 text-center">
                          <!-- <input type="checkbox" ng-click="vm.model.SelectItem(datum)" ng-model="datum.isChecked" ng-class="{disabled: vm.model.isDisable(datum)}" ng-disabled="datum.statusCode == 'P'" /> -->

                          <input type="checkbox" ng-model="datum.isSelected" ng-click="vm.model.SelectPurchaseRequest(datum)" ng-disabled="vm.model.isDisable(datum)"
                          />
                        </td>
                        <td class="width7"> {{datum.indentDate | date:'dd/MM/yyyy' }} </td>
                        <td class="width6"> {{datum.indentNo}} </td>
                        <td class="width8"> {{datum.fromStore}} </td>
                        <td class="width8"> {{datum.toStore}} </td>
                        <td class="width5"> {{datum.priority}} </td>
                        <td class="width5"> {{datum.type}} </td>
                        <td class="width8"  align="center"> 
                            <i class="fa fa-{{datum.isConsignment == true ? 'check' : 'times'}}" title="{{datum.isConsignment == true ? 'True' : 'False'}}" style=" color: #337ab7; cursor: initial;"></i>
                        </td>
                        <td class="width7"> {{datum.requestedBy}} </td>
                        <td class="width5" title="{{datum.remark}}"> {{datum.remark}} </td>
                        <td class="width6"> {{datum.status}} </td>
                        <td class="width8"> {{datum.approvalStatus}} </td>
                        <td style="width: 6.7% !important;">
                          <div class="col-lg-2 col-md-4 padding-left-right-set4 ">
                            <a title="Edit" ng-click="vm.model.EditStoreIndentDetails(datum)" ng-class="{disabled: vm.model.isDisable(datum)}">
                              <i class="fa fa-pencil" aria-hidden="true"></i>
                            </a>
                          </div>
                          <div class="col-lg-2 col-md-4 padding-left-right-set4 ">
                            <a title="Print">
                              <i class="fa fa-print" aria-hidden="true"></i>
                            </a>
                          </div>
                          <div class="col-lg-2 col-md-4 padding-left-right-set4 ">
                            <a title="Cancel">
                              <i class="fa fa-ban" aria-hidden="true" ng-class="{disabled: vm.model.isDisable(datum)}" ng-click="vm.model.ValidateAndUpdate('Cancel','confirmCancel', datum.id)"></i>
                              <!-- ShowRejectDismiss -->
                            </a>
                          </div>
                          <div class="col-lg-6 col-md-6 padding-left-right-set4 text-right">
                            <a href="#/DetailsStoreIndenting" ng-click="vm.model.StoreIndentingDetails(datum)">Details</a>
                          </div>
                        </td>
                      </tr>

                      <tr ng-if="!vm.model.searchStoreIndentData || vm.model.searchStoreIndentData == false">
                        <td class="text-center">
                          <p>No Record Found</p>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
      </div>
      </fieldset>
    </div>
  </div>
</div>
</div>


<!-- CanellationModal END -->

<div id="confirmLogout1" class="modal fade ng-scope in" role="dialog" style="padding-left: 17px;">
  <div class="modal-dialog" style="width: 560px !important; margin: 80px auto !important;">
    <!-- style="width: 25% !important;margin: 200px 0 0 510px !important;" -->
    <div class="modal-content">
      <div class="modal-header" style="padding: 0px!important;">
        <div class="modal-title patient-details-row">
          Confirm
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
      </div>
      <div class="modal-body">
        <div class="margin-left10">
          <span>Are you sure you want to Save?</span>
        </div>
      </div>
      <div class="modal-footer" style="border:none;">
        <button type="button" data-dismiss="modal" class="btn btn-primary" id="" ng-click="vm.model.ApproveItem();">Ok</button>
        <button type="button" data-dismiss="modal" class="btn btn-primary">Cancel</button>
      </div>
    </div>
  </div>
</div>
<!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->


<!-- confirmCancel Start -->
<div id="confirmCancel" class="modal fade ng-scope in common-small-popup" role="dialog" style="background: rgba(0, 0, 0, 0.33); z-index: 1300 !important;">
  <div class="modal-dialog">
    <!-- width: 25% !important;margin: 200px 0 0 510px !important; -->
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title patient-details-row">
          Cancellation
          <button type="button" class="close" data-dismiss="modal" ng-click="vm.model.ModalDismiss('confirmCancel')">&times;</button>
        </div>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-12 padding-left-right-set">
            <div class="row input-container margin-top10">
              <div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
                <i class="fa fa-sticky-note-o" aria-hidden="true"></i>
              </div>
              <div class="col-lg-11 col-sm-11 col-md-11 ">
                <div class="">
                  <select name="cancelReason" id="cancelReason" class="text-input floating-label" ng-model="vm.model.cancelReason" ng-class="{dirty: vm.model.cancelReason}"
                    ng-change="vm.model.isReasonValid = false">
                    <!-- ng-options="cancelReason.reason for cancelReason in vm.model.reasons" -->
                    <option  value="">Select Reason</option>
                    <option ng-repeat="reason in vm.model.reasons" value="{{reason.id}}">{{reason.reason}}</option>
                  </select>
                  <label for="code">Select Reasons</label>
                </div>
                <p ng-if="vm.model.isReasonValid" class="errorMsg">Select Reason</p>
              </div>
            </div>
            <div class="row input-container margin-top10">
              <div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
                <i class="fa fa-sticky-note" aria-hidden="true"></i>
              </div>
              <div class="col-lg-11 col-sm-11 col-md-11 ">
                <div class="">
                  <textarea name="cancelNote" rows="4" id="cancelNote" class="text-input floating-label ng-pristine ng-untouched ng-valid ng-empty"
                    ng-model="vm.model.cancelNote" ng-class="{dirty: vm.model.cancelNote}"></textarea>
                  <label for="cancelNote">Note</label>
                </div>
              </div>
            </div>
            <!-- <input type="text" id="commonId" /> -->
          </div>
        </div>
      </div>
      <div class="modal-footer" style="border:none;">
        <button type="button"  data-dismiss="modal" ng-disabled="cancelNote == ''" class="btn btn-primary" ng-click="vm.model.ApproveItem();">Save</button>
      </div>
    </div>
  </div>
</div>
<!-- cancelPurchaseReqest END -->

<!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

<script type="text/javascript">
  $(document).ready(function () {
    $(".selectedPageName").text("Store Indent");
    $(".sidebar-nav li").each(function () {
      $(this).find("a").parents("li").removeClass("active");
    });

    $(".selectedServicesList").hide();
    /*************************** rejection radio button function*********************************/
    $(".add-new-item-row").hide();
    $(".get-request-row").hide();
    $(".addNewItemRadioBtnClass").change(function () {
      if ($(this).is(":checked")) {
        $(".add-new-item-row").show('slow');
        $(".get-request-row").hide('slow');
      }
    });
    $(".getRequestListBtnClass").change(function () {
      if ($(this).is(":checked")) {
        $(".add-new-item-row").hide('slow');
        $(".get-request-row").show('slow');
      }
    });

  });
  /*************************** add button function start*********************************/
  $(".table-th-bg").click(function () {
    /* alert(); */
    $(this).next().find(".selectedServicesList").toggle();
  });
</script>