<!-- /********************************************************************************************************************************************
Pharmacy - OP Pharmacy - bill list  main page
Created by - Pranita Patil
Created Date - 15-Jan-2018 
/********************************************************************************************************************************************/ -->
<div id="page-content-wrapper" style="min-height: 500px; height:100%; overflow-y:auto; top: 10px;">
	<div class="container-fluid his-style">
		<fieldset class="" style="margin-top:-5px !important">
			<div class="row">
				<div class="col-lg-6 col-md-6 col-sm-6 padding-left-right-set4 padding15">
					<div class="col-lg-2 col-md-2 col-sm-2">
						<div class="row input-container">
							<div class="col-lg-2 col-sm-2 col-md-2 polymer-icon">
								<i class="fa fa-calendar" aria-hidden="true"></i>
							</div>
							<div class="col-lg-10 col-sm-10 col-md-10">
								<div class="">
									<input type="text" class="text-input floating-label dirty" name="fromDate" id="fromDate" uib-datepicker-popup="dd/MM/yyyy"
										placeholder="DD/MM/YYYY" ng-model="vm.model.fromDate" model-view-value="true" is-open="vm.model.fromDateOpened" datepicker-options="vm.model.fromDateOptions"
										show-button-bar="false" ng-click="vm.model.OpenFromDate()">
									<label for="fromDate" class="">Form Date</label>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-2 col-md-2 col-sm-2">
						<div class="row input-container">
							<div class="col-lg-2 col-sm-2 col-md-2 polymer-icon ">
								<i class="fa fa-calendar" aria-hidden="true"></i>
							</div>
							<div class="col-lg-10 col-sm-10 col-md-10 ">
								<div class="">
									<input type="text" class="text-input floating-label dirty" name="toDate" id="toDate" uib-datepicker-popup="dd/MM/yyyy" placeholder="DD/MM/YYYY"
										ng-model="vm.model.toDate" model-view-value="true" is-open="vm.model.toDateOpened" datepicker-options="vm.model.toDateOptions"
										show-button-bar="false" ng-click="vm.model.OpenToDate()">
									<label for="toDate" class="">To Date</label>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-4 col-md-4 col-sm-4">
						<div class="row input-container">
							<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
								<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
							</div>
							<div class="col-lg-11 col-sm-11 col-md-11">
								<div class="">
									<input type="text" name="patientName" id="patientName" class="text-input floating-label" ng-model="vm.model.patientName"
										uib-typeahead="patientNames.patientName as patientNames.details for patientNames in vm.model.SearchpatientNames($viewValue)"
										typeahead-on-select="vm.model.AddUHID($item); vm.model.search = '';">
										
									<label for="patientName">Patient Name</label>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-2 col-md-2 col-sm-2">
						<div class="row input-container">
							<div class="col-lg-2 col-sm-2 col-md-2 polymer-icon">
								<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
							</div>
							<div class="col-lg-10 col-sm-10 col-md-10">
								<div class="">
									<input type="text" name="uhid" ng-model="vm.model.uhid" ng-class="{dirty:vm.model.uhid}" id="" class="text-input floating-label"> <label
										for="code">UHID</label>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-2 col-md-2 col-sm-2">
						<div class="row input-container">
							<div class="col-lg-2 col-sm-2 col-md-2 polymer-icon">
								<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
							</div>
							<div class="col-lg-10 col-sm-10 col-md-10">
								<div class="">
									<select name="saleType" id="saleType" class="text-input floating-label dirty" ng-model="vm.model.saleType" data-ng-options="saleType.type for saleType in vm.model.salesTypes">
									</select>
									<label for="saleType">Sales Type</label>
								</div>
							</div>
						</div>
					</div>
				</div>	
				<div class="col-lg-6 col-md-6 col-sm-6 padding-left-right-set4 padding15">	
					<div class="col-lg-4 col-md-4 col-sm-4">
						<div class="row input-container">
							<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
								<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
							</div>
							<div class="col-lg-11 col-sm-11 col-md-11">
								<div class="">
									<input type="text" ng-model="vm.model.billNo" name="description" id="" class="text-input floating-label">
									<label for="description" class="LISDynamicLabel">Bill No.</label>
								</div>
							</div>
						</div>
					</div>			
					<div class="col-lg-4 col-md-4 col-sm-4">
						<div class="row input-container">
							<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon ">
								<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
							</div>
							<div class="col-lg-11 col-sm-11 col-md-11 ">
								<div class="">
									<input type="text" ng-model="vm.model.visitNo" name="description" id="" class="text-input floating-label">
									<label for="description" class="LISDynamicLabel">Visit No.</label>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-2 col-md-2 col-sm-2">
						<div class="row input-container">
							<div class="col-lg-2 col-sm-2 col-md-2 polymer-icon">
								<i class="fa fa-stop-circle-o" aria-hidden="true"></i>
							</div>
							<div class="col-lg-10 col-sm-10 col-md-10">
								<div class="">
									<select name="status" id="status" class="text-input floating-label dirty" ng-model="vm.model.status" data-ng-options="status.status for status in vm.model.statuses">
									</select>
									<label for="billStatus" class="">Bill Status</label>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-2 col-md-2 col-sm-2 width8">
						<div class=" margin-left22">
							<a href="" class="btn btn-primary btn-save-box-shadow margin-left10" ng-click="vm.model.GetBillList()" title="Search" data-toggle="modal">
								<i class="fa fa-search" aria-hidden="true"></i>
							</a>
						</div>
					</div>
				</div>	
			</div>
			<div class="row margin-top10">
				<div class="col-lg-1 col-md-1 col-sm-2 padding-left-right-set4 width4 float_right">
				</div>
				<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 float_right">
					<input type="text" ng-model="search" class="text-search-box" placeholder="Search" style="margin-top:0px">
					<i class="fa fa-search common-search-text-icon margin-left5" aria-hidden="true"></i>
				</div>
			</div>
			<div class="row margin-top10">
				<div class="col-md-12 col-lg-12 table-responsive padding-left-right-set4">
					<div class="table-container padding-left-right-set4 padding-top5">
						<div class="table-container-header">
							<table class="table table-striped table-hover table-condensed table-bordered">
								<thead>
									<tr>
										<th title="Bill Date" class="width6">
											<span class="">Bill Date</span>
											<div class="float_right" ng-click="sortType = 'billDate'; sortReverse = !sortReverse">
												<div>
													<i class="fa fa-caret-up" aria-hidden="true"></i>
												</div>
												<div class="margin-top-8">
													<i class="fa fa-caret-down" aria-hidden="true"></i>
												</div>
											</div>
										</th>
										<th title="Bill No." class="width7">
											<span class="">Bill No.</span>
											<div class="float_right" ng-click="sortType = 'billNo'; sortReverse = !sortReverse">
												<div>
													<i class="fa fa-caret-up" aria-hidden="true"></i>
												</div>
												<div class="margin-top-8">
													<i class="fa fa-caret-down" aria-hidden="true"></i>
												</div>
											</div>
										</th>
										<th title="UHID" class="width7" ng-if="vm.model.salesTypeId !== 3">
											UHID
											<div class="float_right" ng-click="sortType = 'uhid'; sortReverse = !sortReverse">
												<div>
													<i class="fa fa-caret-up" aria-hidden="true"></i>
												</div>
												<div class="margin-top-8">
													<i class="fa fa-caret-down" aria-hidden="true"></i>
												</div>
											</div>
										</th>
										<th title="Patient Details" class="width13">
											Patient Details
											<div class="float_right" ng-click="sortType = 'patientDetails'; sortReverse = !sortReverse">
												<div>
													<i class="fa fa-caret-up" aria-hidden="true"></i>
												</div>
												<div class="margin-top-8">
													<i class="fa fa-caret-down" aria-hidden="true"></i>
												</div>
											</div>
										</th>
										<th title="Sales Type" class="width6">
												Sales Type
											<div class="float_right" ng-click="sortType = 'salesType'; sortReverse = !sortReverse">
												<div>
													<i class="fa fa-caret-up" aria-hidden="true"></i>
												</div>
												<div class="margin-top-8">
													<i class="fa fa-caret-down" aria-hidden="true"></i>
												</div>
											</div>
										</th>
										<th title="Total Bill Amount" class="width8">
											Total Bill Amt
											<div class="float_right" ng-click="sortType = 'totalAmount'; sortReverse = !sortReverse">
												<div>
													<i class="fa fa-caret-up" aria-hidden="true"></i>
												</div>
												<div class="margin-top-8">
													<i class="fa fa-caret-down" aria-hidden="true"></i>
												</div>
											</div>
										</th>
										<th title="Net Payable" class="width8">
											Net Payable
											<div class="float_right" ng-click="sortType = 'netAmount'; sortReverse = !sortReverse">
												<div>
													<i class="fa fa-caret-up" aria-hidden="true"></i>
												</div>
												<div class="margin-top-8">
													<i class="fa fa-caret-down" aria-hidden="true"></i>
												</div>
											</div>
										</th>
										<th title="Amount Paid" class="width8">
											Amount Paid
											<div class="float_right" ng-click="sortType = 'paidAmt'; sortReverse = !sortReverse">
												<div>
													<i class="fa fa-caret-up" aria-hidden="true"></i>
												</div>
												<div class="margin-top-8">
													<i class="fa fa-caret-down" aria-hidden="true"></i>
												</div>
											</div>
										</th>
										<th title="Balance Amount" class="width8">
											Balance Amt
											<div class="float_right" ng-click="sortType = 'balanceAmt'; sortReverse = !sortReverse">
												<div>
													<i class="fa fa-caret-up" aria-hidden="true"></i>
												</div>
												<div class="margin-top-8">
													<i class="fa fa-caret-down" aria-hidden="true"></i>
												</div>
											</div>
										</th>
										<th title="Status" class="width6">
											Status
											<div class="float_right" ng-click="sortType = 'status'; sortReverse = !sortReverse">
												<div>
													<i class="fa fa-caret-up" aria-hidden="true"></i>
												</div>
												<div class="margin-top-8">
													<i class="fa fa-caret-down" aria-hidden="true"></i>
												</div>
											</div>
										</th>
										<th title="Order By" class="width8">
											Order By
											<div class="float_right" ng-click="sortType = 'orderBy'; sortReverse = !sortReverse">
												<div>
													<i class="fa fa-caret-up" aria-hidden="true"></i>
												</div>
												<div class="margin-top-8">
													<i class="fa fa-caret-down" aria-hidden="true"></i>
												</div>
											</div>
										</th>
										<th title="Debit Request" class="width3">
											DR
										</th>
										<th title="Credit Request" class="width3">
											CR
										</th>
										<th title="Action" class="width6">
											Action
										</th>
									</tr>
								</thead>
							</table>
						</div>
						<div class="table-container-body" style="height:400px; overflow-y: scroll; background: #ffffce;">		
							<table class="table table-striped table-hover table-condensed table-bordered">
								<tbody>
									<tr ng-if="vm.model.bills == null || !vm.model.bills.length">
										<td col-span="14"><p style="text-align: center;margin-top: 0px !important;margin-bottom: 1px !important;">No Records Found</p></td>
									</tr>
									<tr ng-repeat="bill in vm.model.bills | filter : search |  orderBy:sortType:sortReverse">
										<td title="{{bill.billDate | date:'dd-MMM-yyyy'}}" class="width6">
											{{bill.billDate | date:'dd/MM/yyyy' : 'UTC'}}
										</td>
										<td title="{{bill.billNo}}" class="width7">
											{{bill.billNo}}
										</td>
										<td title="{{bill.uhid}}" class="width7" ng-if="vm.model.salesTypeId != 3">
											<div style="text-align: center;" ng-if="!bill.uhid">-</div>
											<div ng-if="!!bill.uhid">{{bill.uhid}}</div>
										</td>
										<td title="{{bill.patientDetails}}" class="width13">
											{{bill.patientDetails}}
										</td>
										<td title="{{bill.salesType}}" class="width6">
											{{bill.salesType}}
										</td>
										<td title="{{vm.model.Currency}} {{bill.totalAmount | number:2}}" class="width8"  style="text-align: right;">
											{{vm.model.Currency}} {{bill.totalAmount | number:2}}
										</td>
										<td title="{{vm.model.Currency}} {{bill.netAmount | number:2}}" class="width8" style="text-align: right;">
											{{vm.model.Currency}} {{bill.netAmount | number:2}}
										</td>
										<td title="{{vm.model.Currency}} {{bill.paidAmt | number:2}}" class="width8" style="text-align: right;">
											{{vm.model.Currency}} {{bill.paidAmt | number:2}}								
										</td>
										<td title="{{vm.model.Currency}} {{bill.balanceAmt | number:2}}" class="width8" style="text-align: right;">
											{{vm.model.Currency}} {{bill.balanceAmt | number:2}}
										</td>
										<td title="{{bill.status}}" class="width6">
											{{bill.status}}
										</td>
										<td title="{{bill.orderBy}}" class="width8">
											{{bill.orderBy}}
										</td>
										<td title="" class="width3">
											<a href="#/debitNoteList">
												<i class="fa fa-credit-card" aria-hidden="true"></i>
											</a>
										</td>
										<td title="" class="width3">
											<a href="#/creditNoteList">
												<i class="fa fa-credit-card" aria-hidden="true"></i>
											</a>
										</td>
										<td style="width: 5.6% !important;">
												<div class="col-lg-3 col-md-3 padding-left-right-set4 ">
													<a title="Print"><i class="fa fa-print" aria-hidden="true"></i></a>
												</div>

												<div class="col-lg-8 col-md-8 padding-left-right-set4 text-right">
													<a  href ng-click="vm.model.GetBillDetails(bill)">View</a>
												</div>

											
										</td>
									</tr>
								</tbody>	
							</table>
						</div>
					</div>		
				</div>
			</div>
			
		</fieldset>
	</div>
</div>

<div ng-include="'./views/master/UnitMaster/billingMaster/common/pharmacy-bill-list-details.html'"></div>
<div ng-include="'./views/master/UnitMaster/billingMaster/common/pharmacy-collect-payment-details.html'"></div>





<script>
	$(document).ready(function () {
		$(".patienttSearchResult").hide();
		$(".selectedPageName").text("Pharmacy Bill List");
		$(".sidebar-nav li").each(function () {
			$(this).find("a").parents("li").removeClass("active");
		});
		$('a[href$="pharmacyBillList"]').parents("li").addClass("active");
	});
</script>






<div ng-include="'./views/master/UnitMaster/billingMaster/common/bill-list-details.html'"></div>