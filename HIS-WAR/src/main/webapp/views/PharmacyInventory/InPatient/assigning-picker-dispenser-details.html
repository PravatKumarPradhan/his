<style>
    .tableError {
        border: 2px solid red !important;
    }

    .tableError select.w-100.ng-pristine.ng-empty,
    .tableError input.w-100.ng-valid.ng-empty,
    .borderRed {
        border: 2px solid red;
    }

    .font-W600 td {
        font-weight: 600 !important;
    }

    .cursorDisabled{
        cursor: not-allowed;
    }
</style>

<!-- *****************************************************************************************************************************
													Pending List For Assigning Picker/Dispenser 
****************************************************************************************************************************** -->
<!-- Page Content -->
<div id="page-content-wrapper" class="clockPopupOver">
    <div class="container-fluid his-style">
        <div class="">
            <!-- <div class="">
                <div class="patient-details-row">
                    Pending List For Assigning Picker Details
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
            </div> -->
            <div class="">
                    <div class="row searched-patient-details-row">
                        <div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">
                            <span class="profile_pic"> 
                                <img alt="" src="resources/assets/images/tempImages/m.jpg" class="img-circle" style="width:35px"  data-toggle="modal" data-target="#patientDetailsModal">
                            </span>
                            <!-- <span class="margin-left10">{{patientDetails.patientName}} {{patientDetails.age}} </span> -->
                            <span class="margin-left10"><span class="padding-right5 font-weight600">UHID	:</span> {{vm.model.assigningPickerDispenserDetails.uhid}}</span>
                            <span class="margin-left10"><span class="padding-right5 font-weight600"></span> {{vm.model.assigningPickerDispenserDetails.patientDetail}}</span>
                            <span class="margin-left10"><span class="padding-right5 font-weight600">DOB	:</span>  {{vm.model.assigningPickerDispenserDetails.dob | date:'dd/MM/yyyy' : 'UTC'}}</span>
                            <span class="margin-left10"><span class="padding-right5 font-weight600"></span> Dr. {{vm.model.assigningPickerDispenserDetails.doctorDetail}}</span>
                            <span class="margin-left10"><span class="padding-right5 font-weight600">DOA	:</span> {{vm.model.assigningPickerDispenserDetails.doa | date:'dd/MM/yyyy' : 'UTC'}}</span>
                            <span class="margin-left10"><span class="padding-right5 font-weight600">PDD	:</span>{{vm.model.assigningPickerDispenserDetails.pdd | date:'dd/MM/yyyy' : 'UTC'}}</span>
                            <span class="margin-left10"><span class="padding-right5 font-weight600">Ward Name :</span> {{vm.model.assigningPickerDispenserDetails.wardName}}</span>
                            <span class="margin-left10"><span class="padding-right5 font-weight600">Bed No. :</span>{{vm.model.assigningPickerDispenserDetails.bedNo}}</span>
                            <span class="margin-left8 bed-mang-box-icon">
                                <img src="resources/assets/images/icon/bed/Allergies.png" title="Allergies" alt="Allergy" style="width:20px" class="popper" data-toggle="popover" data-trigger="hover">
                                <div class="popper-content hide">
                                    <div>1.Egg Protein</div>
                                    <div>2.Penicillin</div>
                                </div>
                            </span>
                            <span class="margin-left8 bed-mang-box-icon">
                                <img src="resources/assets/images/icon/bed/other investigation order.png" title="Comorbidity" alt="Allergy" style="width:20px" class="popper" data-toggle="popover" data-trigger="hover">
                                <div class="popper-content hide">
                                    <div>1.Hyper Tension</div>
                                </div>
                            </span>
                            <span class="margin-left8 bed-mang-box-icon">
                                <img src="resources/assets/images/icon/bed/High Risk Patient.png" title="High Risk" alt="Allergy" style="width:20px" class="popper" data-toggle="popover" data-trigger="hover">
                                <div class="popper-content hide">
                                    <div>1.Hepatitis b</div>
                            </span>
                        </div>
                        
                    </div>
                
                <div class="row">
                    <div class="col-lg-12 col-md-12 padding-top10 padding-left-right-set4">
                        <div class="pull-right">
                            <a><i class="fa fa-life-ring" title="Smart Issue"></i></a>
                        </div>
                        <div class="table-container padding-left-right-set4 padding-top5">
                            <div class="table-container-header">
                                <table class="table table-striped table-hover table-condensed table-bordered">
                                    <thead>
                                        <tr class="table-th-bg">
                                            <!-- <th class="width1 vertical-middle text-center padding-btntop10"><input
                                                type="checkbox" /></th> -->
                                            <th class="width7 vertical-middle" title="Medication Name">Medication Name
                                                <div class="float_right" ng-click="sortType = 'itemName'; sortReverse = !sortReverse">
                                                    <div>
                                                        <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="margin-top-8">
                                                        <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                    </div>
                                                </div>
                                            </th>
                                            <th class="width7 vertical-middle" title="Generic Name">Generic Name
                                                <div class="float_right" ng-click="sortType = 'genericName'; sortReverse = !sortReverse">
                                                    <div>
                                                        <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="margin-top-8">
                                                        <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                    </div>
                                                </div>
                                            </th>
                                            <th class="width6 vertical-middle" title="Batch No.">Batch No.
                                                <div class="float_right" ng-click="sortType = 'selectedBatch'; sortReverse = !sortReverse">
                                                    <div>
                                                        <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="margin-top-8">
                                                        <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                    </div>
                                                </div>
                                            </th>
                                            <th class="width5 vertical-middle" title="Expiry Date">Expiry Date
                                                <div class="float_right" ng-click="sortType = 'expiry'; sortReverse = !sortReverse">
                                                    <div>
                                                        <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="margin-top-8">
                                                        <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                    </div>
                                                </div>
                                            </th>
                                            <th class="width6 vertical-middle" title="UOM">UOM
                                                <div class="float_right" ng-click="sortType = 'selectedUom'; sortReverse = !sortReverse">
                                                    <div>
                                                        <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="margin-top-8">
                                                        <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                    </div>
                                                </div>
                                            </th>
                                            <th class="width5 vertical-middle" title="UOM Unit">UOM Unit
                                                <div class="float_right" ng-click="sortType = 'uomUnit'; sortReverse = !sortReverse">
                                                    <div>
                                                        <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="margin-top-8">
                                                        <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                    </div>
                                                </div>
                                            </th>
                                            <th class="width4 vertical-middle" title="Qty Ordered">Qty Ordered
                                                <div class="float_right" ng-click="sortType = 'quantityOrdered'; sortReverse = !sortReverse">
                                                    <div>
                                                        <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="margin-top-8">
                                                        <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                    </div>
                                                </div>
                                            </th>
                                            <th class="width4 vertical-middle" title="Qty Issued">Qty Issued
                                                <div class="float_right" ng-click="sortType = 'quantity'; sortReverse = !sortReverse">
                                                    <div>
                                                        <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="margin-top-8">
                                                        <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                    </div>
                                                </div>
                                            </th>
                                            
                                            <th class="width5 vertical-middle" title="Stock Available">Stock Available
                                                <div class="float_right" ng-click="sortType = 'stockAvailable'; sortReverse = !sortReverse">
                                                    <div>
                                                        <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="margin-top-8">
                                                        <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                    </div>
                                                </div>
                                            </th>
                                            <th class="width7 vertical-middle" title="Rack No.">Rack No.
                                                <div class="float_right" ng-click="sortType = 'rackNo'; sortReverse = !sortReverse">
                                                    <div>
                                                        <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="margin-top-8">
                                                        <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                    </div>
                                                </div>
                                            </th>
                                            <th class="width5 vertical-middle" title="Frequency">Frequency
                                                <div class="float_right" ng-click="sortType = 'frequency'; sortReverse = !sortReverse">
                                                    <div>
                                                        <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="margin-top-8">
                                                        <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                    </div>
                                                </div>
                                            </th>
                                            <th class="width5 vertical-middle" title="Dose">Dose
                                                <div class="float_right" ng-click="sortType = 'dose'; sortReverse = !sortReverse">
                                                    <div>
                                                        <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="margin-top-8">
                                                        <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                    </div>
                                                </div>
                                            </th>
                                            <th class="width5 vertical-middle" title="Start Date">Start Date
                                                <div class="float_right" ng-click="sortType = 'startDate'; sortReverse = !sortReverse">
                                                    <div>
                                                        <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="margin-top-8">
                                                        <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                    </div>
                                                </div>
                                            </th>
                                            <th class="width5 vertical-middle" title="Stop Date">Stop Date
                                                <div class="float_right" ng-click="sortType = 'stopDate'; sortReverse = !sortReverse">
                                                    <div>
                                                        <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="margin-top-8">
                                                        <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                    </div>
                                                </div>
                                            </th>
                                            <th class="width6 vertical-middle" title="Picker">Picker
                                                <div class="float_right" ng-click="sortType = 'picker'; sortReverse = !sortReverse">
                                                    <div>
                                                        <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="margin-top-8">
                                                        <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                    </div>
                                                </div>
                                            </th>
                                            <th class="width9 text-center" title="Action">
                                                Action
                                            </th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                            <div class="table-container-body" style="height:380px; overflow-y: scroll; background: #ffffce;">
                                <table class="table table-striped table-hover table-condensed table-bordered">
                                    <tbody ng-if="vm.model.assigningPickerDispenserDetails.items == null || !vm.model.assigningPickerDispenserDetails.items.length">
                                        <tr><td col-span="14"><p style="text-align: center;margin-top: 0px !important;margin-bottom: 1px !important;">No Records Found</p></td></tr>
                                    </tbody>
                                    <tbody ng-repeat="item in vm.model.assigningPickerDispenserDetails.items | filter : search |   orderBy:sortType:sortReverse">				
                                        <tr data-ng-class="{'tableError': item.isParentItemValid, 'disable': item.disabled, 'cursorDisabled':item.disabled}">
                                            <!-- <td class=" text-center padding-btntop10" disabled=""><input type="checkbox" disabled=""></td> -->
                                            <td class="width7" title="{{item.itemName}}">
                                                <div>{{item.itemName}}</div>
                                            </td>
                                            <td class="width7" title="{{item.genericName}}">
                                                <div>{{item.genericName}}</div>
                                            </td>
                                            <td title="" class="width6" data-ng-class="{'disabled':item.disabled}">
                                                <select class="w-100" ng-model="item.selectedBatch" UomChangeng-focus="item.prevBatch = item.selectedBatch" ng-change="vm.model.BatchChange($index, vm.model.assigningPickerDispenserDetails, item.selectedBatch, null); item.isParentItemValid = false; item.isParentBatchValid = false; item.isParentUOMValid = false"
                                                data-ng-class="{tableError: item.isParentBatchValid}"
                                                data-ng-options="batch.batchDetails for batch in item.batch">
                                                </select>
                                            </td>
                                            <td class="width5" title="{{item.selectedBatch.expiry | date:'MMM-yyyy'}}">
                                                    <div>{{item.selectedBatch.expiry | date:'MMM-yyyy'}}</div>
                                            </td>
                                            <td title="" class="width6" data-ng-class="{'disabled':item.disabled}">
                                                <select ng-model="item.selectedUom" class="w-100"  ng-focus="item.prevUom = item.selectedUom" ng-change="vm.model.UomChange($index, vm.model.assigningPickerDispenserDetails, item.selectedUom, null);"
                                                data-ng-class="{tableError: item.isParentUOMValid}" 
                                                ng-options="uom.uomDetails for uom in item.uom">
                                                </select>
                                            </td>
                                            <td class="width5" title="{{item.selectedUom.uomUnit}}">
                                                <div>{{item.selectedUom.uomUnit}}</div>
                                            </td>
                                            <td class="width4" title="{{item.quantityOrdered}}">
                                                <div>{{item.quantityOrdered}}</div>
                                            </td>
                                            <td title="" class="width4" data-ng-class="{'disabled':item.disabled}">
                                                <input type="text" ng-model="item.quantity" ng-if="item.selectedBatch.batchId" ng-focus="item.prevQuantity = item.quantity" 
                                                data-ng-class="{tableError: item.isParentQuantityValid}" class="w-100 text-right" ng-change="item.isParentItemValid = false; item.isParentQuantityValid = false"
                                                numbers-only>
                                            </td>
                                            <td class="width5" title="{{item.stockAvailable}}">
                                                <div>{{item.stockAvailable}}</div>
                                            </td>
                                            <td class="width7" title="{{item.rackNo}}">
                                                <div>{{item.rackNo}}</div>
                                            </td>
                                            <td class="width5" title="{{item.frequency}}">
                                                <div>{{item.frequency}}</div>
                                            </td>
                                            <td class="width5" title="{{item.dose}}">
                                                <div>{{item.dose}}</div>
                                            </td>
                                            <td class="width5" title="{{item.startDate | date:'dd/MM/yyyy':'UTC'}}">
                                                <div>{{item.startDate | date:'dd/MM/yyyy':'UTC'}}</div>
                                            </td>
                                            <td class="width5" title="{{item.stopDate | date:'dd/MM/yyyy':'UTC'}}">
                                                <div>{{item.stopDate | date:'dd/MM/yyyy':'UTC'}}</div>
                                            </td> 
                                            <td class="width6" title="{{vm.model.assigningPickerDispenserDetails.picker}}">
                                                <div>{{vm.model.assigningPickerDispenserDetails.picker}}</div>
                                            </td>
                                            
                                            <td class="vertical-middle text-center" data-ng-class="{'disabled':item.disabled}" style="width: 8.7% !important;">
                                                <input type="button" name="" id="addr" value="+" ng-click="vm.model.AddItem($index, vm.model.assigningPickerDispenserDetails, $parent.$index)" class="btn btn-info add-dynamic-row"
                                                    style="padding: 2px 10px !important;" />
                                                <input type="button" value="-" ng-click="vm.model.RemoveItem($index, vm.model.assigningPickerDispenserDetails, $parent.$index); vm.model.ApplyDiscount(vm.model.assigningPickerDispenserDetails)"
                                                    class="btn btn-info add-dynamic-row" style="padding: 2px 10px !important; margin-left: 5px;" />
                                                <input type="button" ng-if="!selecteditem.substituteBtn" data-toggle="modal" value="S" style="width: 25px;
                                                height: 27px; margin-left: 5px;" data-target="#substituteModal" ng-click="vm.model.SubstituteItems(item)" class="btn btn-primary" id="">
											</td>
                                        </tr>
                                        <tr ng-repeat="selecteditem in item.selectedItems" 
											data-ng-class="{'tableError': selecteditem.isItemValid, 'disable': selecteditem.disabled, 'cursorDisabled':selecteditem.disabled}">
                                                <!-- <td class=" text-center padding-btntop10" disabled=""><input type="checkbox" disabled=""></td> -->
                                                <td class="width12" title="{{item.itemName}}">
                                                    <div>{{selecteditem.itemName}}</div>
                                                </td>
                                                <td class="width12" title="{{item.genericName}}">
                                                    <div>{{selecteditem.genericName}}</div>
                                                </td>
                                                <td title="" class="width6" data-ng-class="{'disabled':selecteditem.disabled}">
                                                    <select class="w-100" ng-model="selecteditem.selectedBatch" ng-focus="selecteditem.prevBatch = selecteditem.selectedBatch" ng-change="vm.model.BatchChange($index, vm.model.assigningPickerDispenserDetails, selecteditem.selectedBatch, $parent.$index); selecteditem.isItemValid = false; selecteditem.isBatchValid = false; selecteditem.isUOMValid= false"
                                                    data-ng-class="{tableError: selecteditem.isBatchValid}"
                                                    data-ng-options="batch.batchDetails for batch in selecteditem.batch">
                                                    </select>
                                                </td>
                                                <td class="width5" title="">
                                                        <div>{{selecteditem.selectedBatch.expiry | date:'MMM-yyyy'}}</div>
                                                </td>
                                                <td title="" class="width6" data-ng-class="{'disabled':selecteditem.disabled}">
                                                    <select ng-model="selecteditem.selectedUom" class="w-100"  ng-focus="selecteditem.prevUom = selecteditem.selectedUom" ng-change="vm.model.UomChange($index, vm.model.assigningPickerDispenserDetails, selecteditem.selectedUom,  $parent.$index);"
                                                    data-ng-class="{tableError: selecteditem.isUOMValid}" 
                                                    ng-options="uom.uomDetails for uom in selecteditem.uom">
                                                    </select>
                                                </td>
                                                <td class="width5" title="{{selecteditem.selectedUom.uomUnit}}">
                                                    <div>{{selecteditem.selectedUom.uomUnit}}</div>
                                                </td>
                                                <td class="width4" title="{{selecteditem.quantityOrdered}}">
                                                    <div>{{selecteditem.quantityOrdered}}</div>
                                                </td>
                                                <td title="" class="width4">
                                                    <input type="text" ng-model="selecteditem.quantity" ng-if="selecteditem.selectedBatch.batchId" ng-focus="selecteditem.prevQuantity = selecteditem.quantity" 
                                                    data-ng-class="{tableError: selecteditem.isQuantityValid}" class="w-100 text-right" ng-change="selecteditem.isItemValid = false; selecteditem.isQuantityValid = false"
                                                    numbers-only>
                                                </td>
                                                <td class="width5" title="{{selecteditem.selectedBatch.stock}}">
                                                    <div>{{selecteditem.selectedBatch.stock}}</div>
                                                </td>
                                                <td class="width7" title="{{selecteditem.selectedBatch.rackNo}}">
                                                    <div>{{selecteditem.selectedBatch.rackNo}}</div>
                                                </td>
                                                <td class="width5" title="{{item.frequency}}">
                                                    <div>{{item.frequency}}</div>
                                                </td>
                                                <td class="width5" title="{{item.dose}}">
                                                    <div>{{item.dose}}</div>
                                                </td>
                                                <td class="width5" title="{{item.startDate | date:'dd/MM/yyyy':'UTC'}}">
                                                    <div>{{item.startDate | date:'dd/MM/yyyy':'UTC'}}</div>
                                                </td>
                                                <td class="width5" title="{{item.stopDate | date:'dd/MM/yyyy':'UTC'}}">
                                                    <div>{{item.stopDate | date:'dd/MM/yyyy':'UTC'}}</div>
                                                </td> 
                                                <td class="width6" title="{{vm.model.assigningPickerDispenserDetails.picker}}">
                                                    <div>{{vm.model.assigningPickerDispenserDetails.picker}}</div>
                                                </td>
                                                
                                                <td class="vertical-middle text-center" style="width: 8.7% !important;">
                                                    <input type="button" name="" id="addr" value="+" ng-click="vm.model.AddItem($index, vm.model.assigningPickerDispenserDetails, $parent.$index)" class="btn btn-info add-dynamic-row"
                                                        style="padding: 2px 10px !important;" />
                                                    <input type="button" value="-" ng-click="vm.model.RemoveItem($index, vm.model.assigningPickerDispenserDetails, $parent.$index);  vm.model.RestorePreviousItem(vm.model.assigningPickerDispenserDetails); vm.model.ApplyDiscount(vm.model.assigningPickerDispenserDetails)"
                                                        class="btn btn-info add-dynamic-row" style="padding: 2px 10px !important; margin-left: 5px;" />
                                                    <input type="button" ng-if="!selecteditem.substituteBtn" data-toggle="modal" value="S" style="width: 25px;
                                                    height: 27px; margin-left: 5px;" data-target="#substituteModal" ng-click="vm.model.SubstituteItems(selecteditem)" class="btn btn-primary" id="">
                                                </td>
                                            </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div> 
                    </div>
                </div>
                <!-- <div class="" style="border: none;">
                    <div class="row">
                        <div class="col-md-4 text-left">
                            <input type="button" value="Substitute"  class="btn btn-primary btn-save-box-shadow details-btn" >
                            <button type="button" data-toggle="modal"
                                data-target="#substituteModal" class="btn btn-primary" id="">Substitute</button>
                        </div>
                        <div class="col-md-8">
                            <button type="button" data-dismiss="modal" class="btn btn-primary" id="">Save</button>
                            <button type="button" data-dismiss="modal" class="btn btn-primary" id="">Print</button>
                        </div>
                    </div>
                </div> -->
                <div class="row" style="margin-top:15px;">
                    <div class="col-md-8">
                        <!-- <button type="button" data-toggle="modal" data-target="#substituteModal" 
                        class="btn btn-primary pull-left" id="">Substitute</button> -->
                    </div>
                    <!-- <div class="col-md-5"></div> -->
                    <div class="col-md-4">
                        <div class="col-md-2"></div>
                        <div class="col-md-3" style="margin-right: 5px !important;">
                            <a href="#/assigningPickerDispenser"> <button type="button" class="btn btn-primary" id="" >Back</button></a>
                        </div>
                        <div class="col-md-3" style="margin-right: 5px !important;">
                            <button type="button" class="btn btn-primary" id="">Print</button><!-- label : Print Distpatch Note -->
                        </div>
                        <div class="col-md-3">
                            <button type="button" data-dismiss="modal" class="btn btn-primary" id=""  ng-click="vm.model.SavePopup()" >Save</button>
                        </div>	
                    </div>	
                </div>
            </div>
        </div>
    </div>
</div>
    <!-- ***************************** Substitute modal start  ***************************** -->
    <div id="substituteModal" class="modal fade ng-scope in common-large-popup" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title patient-details-row">
                        Substitute Details
                        <!-- <span class="margin-left10"><b class="padding-right5 ">Medication Name:</b></span>
                        <span class="margin-left10"><b class="padding-right5 ">Generic Name:</b></span> -->
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                </div>
                <div class="modal-body">
                    <div ng-include="'./views/common/patient-demography.html'"></div>
                    <div class="row details-row-set">
                        <div class="col-lg-3 col-md-3 col-sm-3 ">
                            <span class="margin-left10"><span class="padding-right5 font-weight600">Medication Name :</span> {{vm.model.itemName}}</span>
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-3 ">
                            <span class="margin-left10"><span class="padding-right5 font-weight600">Generic Name :</span> {{vm.model.genericName}}</span>
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-3 ">
                            <span class="margin-left10"><span class="padding-right5 font-weight600">Dose :</span>{{vm.model.dose}}</span>
                        </div>
                    </div>
                    <div class="row margin-top10">
                        <div class="col-md-12 col-lg-12 table-responsive padding-left-right-set4">
                            <div class="table-container padding-left-right-set4 padding-top5">
                                <div class="table-container-header">
                                    <table class="table table-striped table-hover table-condensed table-bordered">
                                        <thead>
                                            <tr class="table-th-bg">
                                                <th class="width2" title="">
                                                    <input type="checkbox" ng-click="vm.model.SelectAllItems()" ng-model="vm.model.selectAllRows">
                                                </th>
                                                <th class="width15" title="Medication Name">Medication Name
                                                    <div class="float_right" ng-click="sortType = 'itemName'; sortReverse = !sortReverse">
                                                        <div>
                                                            <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                        </div>
                                                        <div class="margin-top-8">
                                                            <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th class="width12" title="Generic Name">Generic Name
                                                    <div class="float_right" ng-click="sortType = 'genericName'; sortReverse = !sortReverse">
                                                        <div>
                                                            <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                        </div>
                                                        <div class="margin-top-8">
                                                            <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th class="width10" title="Batch No.">Batch No.
                                                    <div class="float_right" ng-click="sortType = 'selectedBatch'; sortReverse = !sortReverse">
                                                        <div>
                                                            <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                        </div>
                                                        <div class="margin-top-8">
                                                            <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th class="width10" title="Expiry Date">Expiry Date
                                                    <div class="float_right" ng-click="sortType = 'expiry'; sortReverse = !sortReverse">
                                                        <div>
                                                            <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                        </div>
                                                        <div class="margin-top-8">
                                                            <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th class="width10" title="Stock">Stock
                                                    <div class="float_right" ng-click="sortType = 'stock'; sortReverse = !sortReverse">
                                                        <div>
                                                            <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                        </div>
                                                        <div class="margin-top-8">
                                                            <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th class="width8" title="Rack No.">Rack No.
                                                    <div class="float_right" ng-click="sortType = ''; sortReverse = !sortReverse">
                                                        <div>
                                                            <i class="fa fa-caret-up" aria-hidden="true"></i>
                                                        </div>
                                                        <div class="margin-top-8">
                                                            <i class="fa fa-caret-down" aria-hidden="true"></i>
                                                        </div>
                                                    </div>
                                                </th>
                                                <th class="width6" title="Action">Action</th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                                <div class="table-container-body" style="height:400px; overflow-y: scroll; background: #ffffce;">		
                                    <table class="table table-striped table-hover table-condensed table-bordered">
                                        <tbody>
                                            <tr ng-repeat="item in vm.model.substituteDetails| filter : search |   orderBy:sortType:sortReverse">
                                                <td class="width2" title="">
                                                    <input type="checkbox" ng-model="item.isSelected" ng-click="vm.model.SelectSubstituteItem(item)">
                                                </td>
                                                <td class="width15" title="{{item.itemName}}">
                                                    {{item.itemName}}
                                                </td>
                                                <td class="width12" title="{{item.genericName}}">
                                                    {{item.genericName}}
                                                </td>
                                                <td class="width10" title="">
                                                    <select class="w-100" ng-model="item.selectedBatch"
                                                    data-ng-options="batch.batchDetails for batch in item.batch">
                                                    </select>
                                                </td>
                                                <td class="width10" title="{{item.selectedBatch.expiry | date:'MMM-yyyy'}}">
                                                    {{item.selectedBatch.expiry | date:'MMM-yyyy' :'UTC'}}
                                                </td>
                                                <td class="width10" title="{{item.selectedBatch.stock}}">
                                                    {{item.selectedBatch.stock}}
                                                </td>
                                                <td class="width8" title="">
                                                    <div>-</div>
                                                </td>
                                                <td style="width:5.7% !important" title="">
                                                    <!-- <a href="" class="btn btn-primary btn-save-box-shadow width50">
                                                        <i class="fa fa-plus" aria-hidden="true"></i>
                                                    </a> -->
                                                    <input type="button" name="" id="addr" value="+" ng-click="vm.model.AddSubstituteItem($index, vm.model.substituteDetails)" class="btn btn-info add-dynamic-row"
                                                    style="padding: 2px 10px !important;" />
                                                    <input type="button" value="-" ng-click="vm.model.RemoveSubstituteItem($index, vm.model.substituteDetails)"
                                                    class="btn btn-info add-dynamic-row" style="padding: 2px 10px !important;" />
                                                </td>
                                            </tr>
                                        </tbody>	
                                    </table>
                                </div>
                            </div>		
                        </div>
                    </div>
                </div>
                <div class="modal-footer" style="border: none;">
                    <div class="row">
                        <div class="col-md-4 text-left"></div>
                        <div class="col-md-8">
                            <button type="button" ng-click="vm.model.Add()" data-dismiss="modal" class="btn btn-primary" id="" data-dismiss="modal">Add</button>
                            <button type="button" data-dismiss="modal" class="btn btn-primary" data-dismiss="modal">Back</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ***************************** Substitute modal end  ***************************** -->
<!--  confirmSave modal start -->

<div id="confirmSave" class="modal fade ng-scope in" role="dialog">
    <div class="modal-dialog" style="width: 560px !important; margin: 80px auto !important;">
        <div class="modal-content" style="border-radius: 0px !important;">
            <div class="modal-header" style="padding: 0px!important;">
                <div class="modal-title patient-details-row">
                    Confirm
                    <button type="button" id="popupClose" class="close" data-dismiss="modal">&times;</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="margin-left10">
                    <span>Are you sure you want to Save?</span>
                </div>
            </div>
            <div class="modal-footer" style="border:none;">
                <button type="button" data-dismiss="modal" id="popupClose" class="btn btn-primary" ng-click="vm.model.SaveBill(vm.model.assigningPickerDispenserDetails)"> Ok </button>
                <button type="button" data-dismiss="modal" class="btn btn-primary">Cancel</button>
            </div>
        </div>
    </div>
</div>

<!--  confirmSave modal end -->


    <script type="text/javascript">
    $(document).ready(function() {
        $(".selectedPageName").text("Pending List For Assigning Picker Details");/* Dispenser */
        $(".sidebar-nav li").each(function() {
            $(this).find("a").parents("li").removeClass("active");
        });
        $('a[href$="assigningPickerDispenser"]').parents("li").addClass("active");
    });
    </script>