<!-- Page Content -->
<div id="page-content-wrapper" class="">
	<div class="container-fluid his-style">
		<fieldset>
			<div class="row">
				<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
					<span class="margin-left10">
						<b class="padding-right10 ">Request No. :</b>
						<label>{{vm.model.scrapDetailData.requestNo}}</label>
					</span>
				</div>
				<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
					<span class="margin-left10">
						<b class="padding-right10 ">Request Date:
						</b>
						<label>{{vm.model.scrapDetailData.requestDate | date:'dd/MM/yyyy'}}</label>
					</span>
				</div>
				<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
					<span class="margin-left10">
						<b class="padding-right10 ">
							Store :</b>
						<label>{{vm.model.scrapDetailData.storeName}}</label>
					</span>
				</div>
				<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
					<span class="margin-left10">
						<b class="padding-right10 "> Type :
						</b>
						<label>{{vm.model.scrapDetailData.assetType}}</label>
					</span>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-3 col-md-3 col-sm-3 padding-left-right-set4 padding-top10">
					<span class="margin-left10">
						<b class="padding-right10 ">Requested By:</b>
						<label>{{vm.model.scrapDetailData.requestedBy}}</label>
					</span>
				</div>
			</div>
			<!-- Assets Table start -->
			<div class="row" id="" ng-show="vm.model.scrapDetailData.assetTypeId == 1">
				<div class="col-lg-12 col-md-12 padding-top10 padding-left-right-set4">
					<table class="table table-bordered">
						<thead>
							<tr>
								<th class="width1">
									<input type="checkbox" ng-model="vm.model.selectAllRows" ng-click="vm.model.SelectAllItems()" ng-change="vm.model.valueOnChange(scrap, true)"
									 ng-disabled="!vm.model.scrapDetailData || vm.model.scrapDetailData.statusId == 9 || !vm.model.scrapDetailData.statusId == 2 || vm.model.scrapDetailData.approvalStatusId != 10">
								</th>
								<th class="width5">Item Code</th>
								<th class="width5">Item Name</th>
								<th class="width6">Generic Name</th>
								<th class="width4">UOM</th>
								<th class="width4">UOM Unit</th>
								<th class="width4">Batch No.</th>
								<th class="width5">Expiry Date</th>
								<th class="width5">Lot No.</th>
								<th class="width5"> Scrap Qty</th>
								<th class="width10">Reason for Scrap</th>
								<th class="width4">Accept Scrap Qty</th>
								<th class="width4">Reject Qty</th>
								<th class="width4">Reject</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="scrap in vm.model.scrapDetailData.items | orderBy:sortType:sortReverse">
								<td>
									<input type="checkbox" ng-model="scrap.isSelected" ng-disabled="vm.model.scrapDetailData.statusId != 2 " ng-click="vm.model.SelectItem(scrap)"
									 ng-change="vm.model.valueOnChange(scrap, false)" />
								</td>
								<td class="vertical-top">{{scrap.itemCode}}</td>
								<td class="vertical-top">{{scrap.itemName}}</td>
								<td class="vertical-top">{{scrap.genericName}}</td>
								<td class="vertical-top">{{scrap.uomType}}</td>
								<td class="vertical-top">{{scrap.uomUnit}}</td>
								<td class="vertical-top">{{scrap.batchNo}}</td>
								<td class="vertical-top">{{scrap.expiryDate | date:'MMM-yyyy'}}</td>
								<td class="vertical-top">{{scrap.lotNo}}</td>
								<td class="vertical-top">{{scrap.scrapQuantity}}</td>
								<td class="vertical-top">{{scrap.scrapReason}}</td>
								<td class="vertical-middle">
									<div class="row approved-qty-remark">
										<input type="text" class="w-100" ng-model="scrap.acceptedQuantity" ng-blur="vm.model.ApprovedQuantity(scrap)" ng-if="!scrap.isDisabled"
										 numbers-only>
										<div ng-if="scrap.isDisabled">{{!!scrap.acceptedQuantity ? scrap.acceptedQuantity : 0 }}</div>
										<!-- ng-model="datum.approvedQuantity = (datum.isSelected ? datum.quantity : 0)" -->
									</div>
								</td>
								<td class="vertical-middle">{{scrap.rejectedQuantity}}</td>
								<td class=" vertical-middle">
									<div class="checkbox">
										<label class="switch switch-small">
											<input type="checkbox" class="switchInput" ng-disabled="scrap.isDisabled" ng-click="vm.model.RejectionPopup(scrap)" ng-model="scrap.isReject">
											<div class="slider round slider-small"></div>
										</label>
									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
			<!-- Assets Table END -->

			<!-- scraps Table start -->
			<div class="row" id="" ng-show="vm.model.scrapDetailData.assetTypeId == 2">
				<div class="col-lg-12 col-md-12 padding-top10 padding-left-right-set4">
					<table class="table table-bordered">
						<thead>
							<tr>
								<th class="width5">Item Code</th>
								<th class="width5">Item Name</th>
								<th class="width5">Serial No.</th>
								<th class="width5">Lot No.</th>
								<th class="width5"> Scrap Qty</th>
								<th class="width10">Reason for Scrap</th>
								<th class="width4">Accept Scrap Qty</th>
								<th class="width4">Reject Qty</th>
								<th class="width4"></th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td class="vertical-top"></td>
								<td class="vertical-top"></td>
								<td class="vertical-top"></td>
								<td class="vertical-top"></td>
								<td class="vertical-top"></td>
								<td class="vertical-top"></td>
								<td class="vertical-top">
									<input type="number" class="w-100">
								</td>
								<td class="vertical-top"></td>
								<td class="vertical-top">
									<div class="checkbox">
										<label>
											<input type="checkbox" value="" data-toggle="modal" data-target="#qtyaccepatReject">Reject</label>
									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
			<!-- Consumable Table END -->

		</fieldset>

		<footer class="col-lg-12 col-md-12 col-sm-12 padding-left-right-set4 padding-right20">
			<div class="row his-style margin-top10 padding-right20">
				<div class="col-md-1 text-right">
					<label>Remark:</label>
				</div>
				<div class="col-md-9 padding-left-right8">
					<textarea row="1" ng-model="vm.model.remark" class="form-control"></textarea>
				</div>
				<div class="col-lg-1 col-md-1 padding-left-right-set4">
					<input type="button" value="Save" ng-click="vm.model.SaveApproval()"  class="btn btn-primary btn-save-box-shadow">
				</div>
				<div class="col-lg-1 col-md-1 padding-left-right-set4">
					<a href="#/approvalScrapRequest">
						<input type="button" value="Back" class="btn btn-primary btn-save-box-shadow">
					</a>
				</div>
			</div>
		</footer>
	</div>
</div>
<div id="qtyaccepatReject" class="modal fade ng-scope in common-small-popup" role="dialog" style="z-index:1300 !important;background: rgba(0, 0, 0, 0.33);">
		<div class="modal-dialog"> <!-- width: 25% !important;margin: 200px 0 0 510px !important; -->
		  <div class="modal-content">
			<div class="modal-header">
			  <div class="modal-title patient-details-row">
				Rejection
				<button type="button" ng-click="vm.model.ModalDismiss('qtyaccepatReject')" class="close">&times;</button>
			  </div>
			</div>
			<div class="modal-body">
			  <div class="row">
				<div class="col-md-12 padding-left-right-set">
				  <div class="row input-container margin-top10">
					  <div class="col-lg-6 col-md-6 col-sm-12">
						<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
						  <i class="fa fa-dot-circle-o" aria-hidden="true"></i>
						</div>
						<div class="col-lg-11 col-sm-11 col-md-11">
						  <div class="">
							<input type="rejectQty" name="rejectQty" ng-model="vm.model.rejectQty" class="text-input floating-label" ng-class="{dirty: vm.model.rejectQty}" numbers-only>
							<label for="rejectQty">Qty</label>
						  </div>
						</div>
					  </div>
					  <div class="col-lg-6 col-md-6 col-sm-6">
						<div class="col-lg-1 col-sm-1 col-md-1 polymer-icon"> 
						<i class="fa fa-sticky-note-o" aria-hidden="true"></i>
					  </div>
					  <div class="col-lg-11 col-sm-11 col-md-11 ">
						<div class="">
						  <select name="rejectReason" id="rejectReason" class="text-input floating-label" ng-model="vm.model.rejectReason" > 
												<option value="">Select Reason</option>
												<option ng-repeat="datum in vm.model.reasons" value="{{datum.id}}">{{datum.reason}}</option>
												</select>
						  <label for="rejectReason">Select Reason</label>
						</div>
					  </div>
					  </div>
					</div>
					<div class="row input-container margin-top10">
					  <div class="col-lg-1 col-sm-1 col-md-1 polymer-icon">
						<i class="fa fa-sticky-note" aria-hidden="true"></i>
					  </div>
					  <div class="col-lg-11 col-sm-11 col-md-11 ">
						<div class="">
						  <textarea name="rejectNote" rows="4" id="rejectNote" class="text-input floating-label ng-pristine ng-untouched ng-valid ng-empty" ng-model="vm.model.rejectNote" ng-class="{dirty: vm.model.rejectNote}"></textarea>
						  <label for="rejectNote">Note</label>
						</div>
					  </div>
					</div>
					<!-- <input type="text" id="commonId" /> -->
				</div>
			  </div>
			</div>
			<div class="modal-footer" style="border:none;">
			  <button type="button" ng-disabled="!vm.model.rejectQty" class="btn btn-primary" ng-click="vm.model.SaveAcceptReject()">Save</button>
			</div>
		  </div>
		</div>
	  </div>
<div ng-include="'./views/common/note-save.html'"></div>
<script type="text/javascript">
	$(document).ready(function () {
		$(".selectedServicesList").hide();
		$(".selectedPageName").text("Scrap Request Approval Details");
		$(".sidebar-nav li").each(function () {
			$(this).find("a").parents("li").removeClass("active");

			$(".radioRejected").change(function () {
				if ($(this).is(":checked")) {
					$("#accepatReject").modal();
				}
			});

		});
		$(".table-th-bg").click(function () {
			//alert();
			$(this).next().find(".selectedServicesList").toggle();
		});
		/*************************** rejection radio button function*********************************/
		$(".rejection-details-row").hide();
		$(".radioRejected").change(function () {
			if ($(this).is(":checked")) {
				$(this).closest(".row").siblings(".rejection-details-row").show();
			}
		});
		$(".radioAccepted").change(function () {
			if ($(this).is(":checked")) {
				$(this).closest(".row").siblings(".rejection-details-row").hide();
			}
		});
	});
/*************************** add button function start*********************************/
</script>